({607:function(){var e=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var o=Array(e),s=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,n=a.length;i<n;i++,s++)o[s]=a[i];return o},t=function(){function t(){}return t.processQueue=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.debug("Processing Queue ->",e),"string"==typeof e[0]&&t[e[0]].apply(t,e.slice(1))},t.processOldQueue=function(e){var t=this;e.forEach((function(e){t.processQueue.apply(t,e)}))},t.setCallback=function(e,t){this[e]=t},t.init=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.debug("SDK Initialization");var r=["score","highScore",e,t];if(!this.isLoaded){window.parent.postMessage({controller:"_digitapGame",type:"SDK_SETTINGS",ui:r,ready:!0},"*"),this.listenGameboxEvents();var o=document.getElementsByTagName("canvas"),s=document.getElementsByTagName("html");setTimeout((function(){var e=o[0].getAttribute("style");o[0].setAttribute("style",e+"width: 100%; margin: 0; padding: 0; user-select: none; -webkit-user-select: none; -moz-user-select: none;");var t=s[0].getAttribute("style");s[0].setAttribute("style",(t||"")+"user-select: none; -webkit-user-select: none; -moz-user-select: none;")}),2e3)}this.isLoaded=!0},t.setProgress=function(e,t,r){this.progress={type:"SDK_PLAYER_SCORE_UPDATE",state:e,score:t,level:r,continueScore:t,controller:"_digitapGame"},this.sendData()},t.setLevelUp=function(e){this.progress.level=e,this.progress.type="SDK_PLAYER_LEVEL_UP",this.sendData()},t.setPlayerFailed=function(e){void 0===e&&(e="FAIL"),this.progress.state=e,this.progress.score=0,this.progress.type="SDK_PLAYER_FAILED",this.sendData()},t.sendData=function(){window.parent.postMessage(this.progress,this.origin)},t.listenGameboxEvents=function(){var e=this;window.addEventListener("message",(function(t){if(e.debug("Event Received -> %o -> %o",t.data,t.origin),"object"==typeof t.data&&t.data.controller&&"_digitapApp"==t.data.controller){var r=e.allowedOrigins.indexOf(t.origin);if(-1===r)return void e.debug("Error: Origin not allowed inside game container!");if(e.origin=e.allowedOrigins[r],t.data.type)switch(t.data.type){case"SDK_START_GAME":e.afterStartGame();break;case"SDK_PAUSE_GAME":e.afterPauseGame();break;case"SDK_START_GAME_FROM_ZERO":e.progress.score=0,e.progress.level=0,e.progress.continueScore=0,e.afterStartGameFromZero();break;case"SDK_CONTINUE_WITH_CURRENT_SCORE":e.progress.score=e.progress.continueScore,e.afterContinueWithCurrentScore(e.progress.score,e.progress.level);break;default:e.debug('Error: `data.type` = "'+t.data.type+'" not found! Please check `readme.md` of data collector package!')}else e.debug("Error: `event.data.type` should be implemented!")}}),!1)},t.afterStartGameFromZero=function(){},t.afterContinueWithCurrentScore=function(e,t){},t.afterStartGame=function(){},t.afterPauseGame=function(){},t.debug=function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=window;s.sdkdebug&&console.log.apply(console,e(["DigitapGamePlayerSDK -> "+t],r))},t.gameObject=null,t.isLoaded=!1,t.origin=null,t.isDebugging=!1,t.allowedOrigins=["https://build.digitap.dev","https://wam.app","https://app.wam.app","https://wam.eu","https://play.wam.app","http://localhost:63342","http://localhost:8080","http://localhost:3000","http://localhost:3001","https://localhost:3001","http://127.0.0.1:3001","https://127.0.0.1:3001"],t.progress={controller:"_digitapGame",type:"SDK_PLAYER_SCORE_UPDATE",score:0,level:0,state:null,continueScore:0},t}();if(void 0!==window.digitapSDK){var r=window.digitapSDK.q;t.processOldQueue(r)}window.digitapSDK=t.processQueue}})[607]();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW1lLXBsYXllci1zZGsvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vZ2FtZS1wbGF5ZXItc2RrL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJwcm9jZXNzUXVldWUiLCJEaWdpdGFwR2FtZVBsYXllclNESyIsImRlYnVnIiwiYXJncyIsImFwcGx5Iiwic2xpY2UiLCJwcm9jZXNzT2xkUXVldWUiLCJxdWV1ZSIsImZvckVhY2giLCJzZXRDYWxsYmFjayIsImZuIiwiY2FsbGJhY2siLCJ0aGlzIiwiaW5pdCIsImhhc1Njb3JlIiwiaGFzSGlnaFNjb3JlIiwidWlPcHRpb25zIiwiaXNMb2FkZWQiLCJ3aW5kb3ciLCJwYXJlbnQiLCJwb3N0TWVzc2FnZSIsImNvbnRyb2xsZXIiLCJ0eXBlIiwidWkiLCJyZWFkeSIsImxpc3RlbkdhbWVib3hFdmVudHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic2V0VGltZW91dCIsImNhbnZhc1N0eWxlIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiaHRtbFN0eWxlIiwic2V0UHJvZ3Jlc3MiLCJzdGF0ZSIsInNjb3JlIiwibGV2ZWwiLCJwcm9ncmVzcyIsImNvbnRpbnVlU2NvcmUiLCJzZW5kRGF0YSIsInNldExldmVsVXAiLCJzZXRQbGF5ZXJGYWlsZWQiLCJvcmlnaW4iLCJzZWxmIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZGF0YSIsIm9yaWdpbkluZGV4IiwiYWxsb3dlZE9yaWdpbnMiLCJpbmRleE9mIiwiYWZ0ZXJTdGFydEdhbWUiLCJhZnRlclBhdXNlR2FtZSIsImFmdGVyU3RhcnRHYW1lRnJvbVplcm8iLCJhZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZSIsIm1lc3NhZ2UiLCJwYXJlbnRXaW5kb3ciLCJzZGtkZWJ1ZyIsImNvbnNvbGUiLCJsb2ciLCJwYXJhbXMiLCJnYW1lT2JqZWN0IiwiaXNEZWJ1Z2dpbmciLCJkaWdpdGFwU0RLIiwi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QUt6QyxNQUNILHlCQUNFMkMsRUFBTUMsS0FBS3hCLEtBQ1gseUVBS1JxQixFQUFLekMsTUFBTSx1REFJakIsSUFPVSxFQUFBa0QsdUJBQWQsYUFFYyxFQUFBQyw4QkFBZCxTQUE0Q2xCLEVBQWVDLEtBRTdDLEVBQUFjLGVBQWQsYUFFYyxFQUFBQyxlQUFkLGFBUWUsRUFBQWpELE1BQWYsU0FBcUJvRCxHLElBQWUsd0RBQ2xDLElBQU1DLEVBQW9CckMsT0FFdEJxQyxFQUFhQyxVQUNmQyxRQUFRQyxJQUFHLE1BQVhELFFBQU8sR0FBSywyQkFBNkJILEdBQVlLLEtBMVIzQyxFQUFBQyxXQUFrQixLQUNqQixFQUFBM0MsVUFBb0IsRUFDcEIsRUFBQXlCLE9BQWlCLEtBQ2pCLEVBQUFtQixhQUF1QixFQUV2QixFQUFBYixlQUEyQixDQUN4Qyw0QkFDQSxrQkFDQSxzQkFDQSxpQkFDQSx1QkFDQSx5QkFDQSx3QkFDQSx3QkFDQSx3QkFDQSx5QkFDQSx3QkFDQSwwQkFHYSxFQUFBWCxTQUFxQixDQUNsQ2hCLFdBQVksZUFDWkMsS0FBTSwwQkFDTmEsTUFBTyxFQUNQQyxNQUFPLEVBQ1BGLE1BQU8sS0FDUEksY0FBZSxHQW1RbkIsRUE5UkEsR0FpU0EsUUFBd0MsSUFBdkJwQixPQUFRNEMsV0FBNEIsQ0FDbkQsSUFBSUMsRUFBaUI3QyxPQUFRNEMsV0FBV0UsRUFDeEMvRCxFQUFxQkssZ0JBQWdCeUQsR0FJakM3QyxPQUFRNEMsV0FBYTdELEVBQXFCRCxnQkM3UzVCIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidHlwZSBQcm9ncmVzcyA9IHtcbiAgY29udHJvbGxlcjogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG4gIHNjb3JlOiBudW1iZXI7XG4gIGxldmVsOiBudW1iZXI7XG4gIHN0YXRlOiBhbnk7XG4gIGNvbnRpbnVlU2NvcmU6IG51bWJlcjtcbn07XG5cbmNsYXNzIERpZ2l0YXBHYW1lUGxheWVyU0RLIHtcbiAgcHVibGljIHN0YXRpYyBnYW1lT2JqZWN0OiBhbnkgPSBudWxsO1xuICBwcml2YXRlIHN0YXRpYyBpc0xvYWRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHN0YXRpYyBvcmlnaW46IHN0cmluZyA9IG51bGw7XG4gIHByaXZhdGUgc3RhdGljIGlzRGVidWdnaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYWxsb3dlZE9yaWdpbnM6IHN0cmluZ1tdID0gW1xuICAgIFwiaHR0cHM6Ly9idWlsZC5kaWdpdGFwLmRldlwiLFxuICAgIFwiaHR0cHM6Ly93YW0uYXBwXCIsXG4gICAgXCJodHRwczovL2FwcC53YW0uYXBwXCIsXG4gICAgXCJodHRwczovL3dhbS5ldVwiLFxuICAgIFwiaHR0cHM6Ly9wbGF5LndhbS5hcHBcIixcbiAgICBcImh0dHA6Ly9sb2NhbGhvc3Q6NjMzNDJcIixcbiAgICBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MFwiLFxuICAgIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCIsXG4gICAgXCJodHRwOi8vbG9jYWxob3N0OjMwMDFcIixcbiAgICBcImh0dHBzOi8vbG9jYWxob3N0OjMwMDFcIixcbiAgICBcImh0dHA6Ly8xMjcuMC4wLjE6MzAwMVwiLFxuICAgIFwiaHR0cHM6Ly8xMjcuMC4wLjE6MzAwMVwiLFxuICBdO1xuXG4gIHByaXZhdGUgc3RhdGljIHByb2dyZXNzOiBQcm9ncmVzcyA9IHtcbiAgICBjb250cm9sbGVyOiBcIl9kaWdpdGFwR2FtZVwiLFxuICAgIHR5cGU6IFwiU0RLX1BMQVlFUl9TQ09SRV9VUERBVEVcIixcbiAgICBzY29yZTogMCxcbiAgICBsZXZlbDogMCxcbiAgICBzdGF0ZTogbnVsbCxcbiAgICBjb250aW51ZVNjb3JlOiAwLFxuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsIGEgbWV0aG9kIGZyb20gdGhlIGNsYXNzLFxuICAgKiB0aHJvdWdoIGEgcXVldWUuXG4gICAqIFxuICAgKiBAcGFyYW0gYXJncyBhcnJheVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBwcm9jZXNzUXVldWUoLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBEaWdpdGFwR2FtZVBsYXllclNESy5kZWJ1ZyhcIlByb2Nlc3NpbmcgUXVldWUgLT5cIiwgYXJncyk7XG5cbiAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIERpZ2l0YXBHYW1lUGxheWVyU0RLW1xuICAgICAgICBhcmdzWzBdIGFzXG4gICAgICAgICAgfCBcImluaXRcIlxuICAgICAgICAgIHwgXCJzZXRQcm9ncmVzc1wiXG4gICAgICAgICAgfCBcInNldExldmVsVXBcIlxuICAgICAgICAgIHwgXCJzZXRQbGF5ZXJGYWlsZWRcIlxuICAgICAgICAgIHwgXCJzZXRDYWxsYmFja1wiXG4gICAgICBdLmFwcGx5KERpZ2l0YXBHYW1lUGxheWVyU0RLLCBhcmdzLnNsaWNlKDEpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyBhIGN1cnJlbnQgcXVldWUuXG4gICAqIFxuICAgKiBAcGFyYW0gcXVldWUgYXJyYXlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcHJvY2Vzc09sZFF1ZXVlKHF1ZXVlOiBbXSk6IHZvaWQge1xuICAgIHF1ZXVlLmZvckVhY2goKGFyZ3M6IGFueSkgPT4ge1xuICAgICAgdGhpcy5wcm9jZXNzUXVldWUoLi4uYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhIGNhbGxiYWNrIG1ldGhvZC5cbiAgICogXG4gICAqIEBwYXJhbSBmbiBzdHJpbmdcbiAgICogQHBhcmFtIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNldENhbGxiYWNrKFxuICAgIGZuOlxuICAgICAgfCBcImFmdGVyU3RhcnRHYW1lRnJvbVplcm9cIlxuICAgICAgfCBcImFmdGVyQ29udGludWVXaXRoQ3VycmVudFNjb3JlXCJcbiAgICAgIHwgXCJhZnRlclN0YXJ0R2FtZVwiXG4gICAgICB8IFwiYWZ0ZXJQYXVzZUdhbWVcIixcbiAgICBjYWxsYmFjazogYW55XG4gICk6IHZvaWQge1xuICAgIHRoaXNbZm5dID0gY2FsbGJhY2s7XG4gIH1cblxuICAvKipcbiAgICogSW5pdCBhIG5ldyBnYW1lIGNvbm5lY3Rpb24gd2l0aFxuICAgKiB0aGUgcGFyZW50IHBsYXRmb3JtLlxuICAgKlxuICAgKiBAcGFyYW0gdWlPcHRpb25zIGFycmF5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGluaXQoXG4gICAgaGFzU2NvcmU6IGJvb2xlYW4gPSB0cnVlLFxuICAgIGhhc0hpZ2hTY29yZTogYm9vbGVhbiA9IHRydWVcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5kZWJ1ZyhcIlNESyBJbml0aWFsaXphdGlvblwiKTtcblxuICAgIC8vIEluaXQgdGhlIHVpT3B0aW9uc1xuICAgIGNvbnN0IHVpT3B0aW9ucyA9IFtcInNjb3JlXCIsIFwiaGlnaFNjb3JlXCIsIGhhc1Njb3JlLCBoYXNIaWdoU2NvcmVdO1xuXG4gICAgLy8gSWYgU0RLIGlzIG5vdCBsb2FkZWQgeWV0XG4gICAgaWYgKCF0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAvLyBTZW5kIHRoZSBpbml0IG1lc3NhZ2VcbiAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoXG4gICAgICAgIHtcbiAgICAgICAgICBjb250cm9sbGVyOiBcIl9kaWdpdGFwR2FtZVwiLFxuICAgICAgICAgIHR5cGU6IFwiU0RLX1NFVFRJTkdTXCIsXG4gICAgICAgICAgdWk6IHVpT3B0aW9ucyxcbiAgICAgICAgICByZWFkeTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgXCIqXCJcbiAgICAgICk7XG5cbiAgICAgIC8vIFdhdGNoIGZvciBtZXNzYWdlcyBmcm9tIEdhbWVCb3hcbiAgICAgIHRoaXMubGlzdGVuR2FtZWJveEV2ZW50cygpO1xuXG4gICAgICAvLyBTZXQgdGhlIGNhbnZhcyBmdWxsd2lkdGggJiBibHVlIHNjcmVlbiBmaXhcbiAgICAgIGNvbnN0IGNhbnZhczogSFRNTENvbGxlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImNhbnZhc1wiKTtcbiAgICAgIGNvbnN0IGh0bWw6IEhUTUxDb2xsZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJodG1sXCIpO1xuICAgICAgXG4gICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgbGV0IGNhbnZhc1N0eWxlID0gY2FudmFzWzBdLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgICAgICAgIGNhbnZhc1swXS5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICBcInN0eWxlXCIsXG4gICAgICAgICAgICBjYW52YXNTdHlsZSArIFwid2lkdGg6IDEwMCU7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgdXNlci1zZWxlY3Q6IG5vbmU7IC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XCJcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgbGV0IGh0bWxTdHlsZSA9IGh0bWxbMF0uZ2V0QXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgICAgICAgaHRtbFswXS5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICBcInN0eWxlXCIsXG4gICAgICAgICAgICAoaHRtbFN0eWxlID8gaHRtbFN0eWxlIDogXCJcIikgKyBcInVzZXItc2VsZWN0OiBub25lOyAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOyAtbW96LXVzZXItc2VsZWN0OiBub25lO1wiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICAgMjAwMFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgU0RLIGFzIGxvYWRlZCB0byBwcmV2ZW50IHJlLWluaXRpYXRpb25cbiAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgcHJvZ3Jlc3Mgb2YgYSBnYW1lLlxuICAgKlxuICAgKiBAcGFyYW0gdHlwZSBzdHJpbmdcbiAgICogQHBhcmFtIHN0YXRlIHN0cmluZ1xuICAgKiBAcGFyYW0gc2NvcmUgbnVtYmVyXG4gICAqIEBwYXJhbSBsZXZlbCBudW1iZXJcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgc2V0UHJvZ3Jlc3Moc3RhdGU6IHN0cmluZywgc2NvcmU6IG51bWJlciwgbGV2ZWw6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFNldCB0aGUgY3VycmVudCBwcm9ncmVzc1xuICAgIHRoaXMucHJvZ3Jlc3MgPSB7XG4gICAgICB0eXBlOiBcIlNES19QTEFZRVJfU0NPUkVfVVBEQVRFXCIsXG4gICAgICBzdGF0ZSxcbiAgICAgIHNjb3JlLFxuICAgICAgbGV2ZWwsXG4gICAgICBjb250aW51ZVNjb3JlOiBzY29yZSxcbiAgICAgIGNvbnRyb2xsZXI6IFwiX2RpZ2l0YXBHYW1lXCIsXG4gICAgfTtcblxuICAgIHRoaXMuc2VuZERhdGEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG5ldyBsZXZlbCBvZiB0aGUgZ2FtZS5cbiAgICpcbiAgICogQHBhcmFtIGxldmVsIG51bWJlclxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzZXRMZXZlbFVwKGxldmVsOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnByb2dyZXNzLmxldmVsID0gbGV2ZWw7XG4gICAgdGhpcy5wcm9ncmVzcy50eXBlID0gXCJTREtfUExBWUVSX0xFVkVMX1VQXCI7XG5cbiAgICB0aGlzLnNlbmREYXRhKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBnYW1lIGFzIGZhaWxlZC5cbiAgICpcbiAgICogQHBhcmFtIHN0YXRlIHN0cmluZ1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzZXRQbGF5ZXJGYWlsZWQoc3RhdGU6IHN0cmluZyA9IFwiRkFJTFwiKTogdm9pZCB7XG4gICAgdGhpcy5wcm9ncmVzcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMucHJvZ3Jlc3Muc2NvcmUgPSAwO1xuICAgIHRoaXMucHJvZ3Jlc3MudHlwZSA9IFwiU0RLX1BMQVlFUl9GQUlMRURcIjtcblxuICAgIHRoaXMuc2VuZERhdGEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBnYW1lIGRhdGEgdG8gcGFyZW50IHBsYXRmb3JtLlxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgc2VuZERhdGEoKTogdm9pZCB7XG4gICAgLy8gU2VuZCB0aGUgbWVzc2FnZSB0byBHYW1lYm94LlxuICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UodGhpcy5wcm9ncmVzcywgdGhpcy5vcmlnaW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGxpc3RlbmluZyBmb3IgbWVzc2FnZXNcbiAgICogZnJvbSB0aGUgcGxhdGZvcm0uXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBsaXN0ZW5HYW1lYm94RXZlbnRzKCk6IHZvaWQge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcIm1lc3NhZ2VcIixcbiAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBzZWxmLmRlYnVnKFxuICAgICAgICAgIFwiRXZlbnQgUmVjZWl2ZWQgLT4gJW8gLT4gJW9cIixcbiAgICAgICAgICBldmVudC5kYXRhLFxuICAgICAgICAgIGV2ZW50Lm9yaWdpblxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgZXZlbnQuZGF0YS5jb250cm9sbGVyICYmXG4gICAgICAgICAgZXZlbnQuZGF0YS5jb250cm9sbGVyID09IFwiX2RpZ2l0YXBBcHBcIlxuICAgICAgICApIHtcbiAgICAgICAgICBsZXQgb3JpZ2luSW5kZXggPSBzZWxmLmFsbG93ZWRPcmlnaW5zLmluZGV4T2YoZXZlbnQub3JpZ2luKTtcblxuICAgICAgICAgIGlmIChvcmlnaW5JbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHNlbGYuZGVidWcoXCJFcnJvcjogT3JpZ2luIG5vdCBhbGxvd2VkIGluc2lkZSBnYW1lIGNvbnRhaW5lciFcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYub3JpZ2luID0gc2VsZi5hbGxvd2VkT3JpZ2luc1tvcmlnaW5JbmRleF07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV2ZW50LmRhdGEudHlwZSkge1xuICAgICAgICAgICAgc3dpdGNoIChldmVudC5kYXRhLnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIlNES19TVEFSVF9HQU1FXCI6XG4gICAgICAgICAgICAgICAgc2VsZi5hZnRlclN0YXJ0R2FtZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJTREtfUEFVU0VfR0FNRVwiOlxuICAgICAgICAgICAgICAgIHNlbGYuYWZ0ZXJQYXVzZUdhbWUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIFwiU0RLX1NUQVJUX0dBTUVfRlJPTV9aRVJPXCI6XG4gICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5zY29yZSA9IDA7XG4gICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5sZXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5jb250aW51ZVNjb3JlID0gMDtcblxuICAgICAgICAgICAgICAgIHNlbGYuYWZ0ZXJTdGFydEdhbWVGcm9tWmVybygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJTREtfQ09OVElOVUVfV0lUSF9DVVJSRU5UX1NDT1JFXCI6XG4gICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5zY29yZSA9IHNlbGYucHJvZ3Jlc3MuY29udGludWVTY29yZTtcblxuICAgICAgICAgICAgICAgIHNlbGYuYWZ0ZXJDb250aW51ZVdpdGhDdXJyZW50U2NvcmUoc2VsZi5wcm9ncmVzcy5zY29yZSwgc2VsZi5wcm9ncmVzcy5sZXZlbCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBzZWxmLmRlYnVnKFxuICAgICAgICAgICAgICAgICAgJ0Vycm9yOiBgZGF0YS50eXBlYCA9IFwiJyArXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEudHlwZSArXG4gICAgICAgICAgICAgICAgICAgICdcIiBub3QgZm91bmQhIFBsZWFzZSBjaGVjayBgcmVhZG1lLm1kYCBvZiBkYXRhIGNvbGxlY3RvciBwYWNrYWdlISdcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmRlYnVnKFwiRXJyb3I6IGBldmVudC5kYXRhLnR5cGVgIHNob3VsZCBiZSBpbXBsZW1lbnRlZCFcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZmFsc2VcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEVtcHR5IG1ldGhvZHMgZm9yIGdhbWUgZGV2ZWxvcGVyIHRvIHVzZS5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgYWZ0ZXJTdGFydEdhbWVGcm9tWmVybygpIHt9XG5cbiAgcHVibGljIHN0YXRpYyBhZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZShzY29yZTogbnVtYmVyLCBsZXZlbDogbnVtYmVyKSB7fVxuXG4gIHB1YmxpYyBzdGF0aWMgYWZ0ZXJTdGFydEdhbWUoKSB7fVxuXG4gIHB1YmxpYyBzdGF0aWMgYWZ0ZXJQYXVzZUdhbWUoKSB7fVxuXG4gIC8qKlxuICAgKiBJZiB1c2VyIGlzIGRlYnVnZ2luZywgc2hvdyBzb21lIGNvbnNvbGUgbG9ncy5cbiAgICpcbiAgICogQHBhcmFtIG1lc3NhZ2UgYW55XG4gICAqIEBwYXJhbSBwYXJhbXMgYW55W11cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGRlYnVnKG1lc3NhZ2U/OiBhbnksIC4uLnBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBjb25zdCBwYXJlbnRXaW5kb3c6IGFueSA9IHdpbmRvdztcblxuICAgIGlmIChwYXJlbnRXaW5kb3cuc2RrZGVidWcpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRGlnaXRhcEdhbWVQbGF5ZXJTREsgLT4gXCIgKyBtZXNzYWdlLCAuLi5wYXJhbXMpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBSZWFkIHRoZSBjdXJyZW50IHF1ZXVlXG5pZiAodHlwZW9mICg8YW55PndpbmRvdykuZGlnaXRhcFNESyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBsZXQgb2xkUXVldWUgPSAoPGFueT53aW5kb3cpLmRpZ2l0YXBTREsucTtcbiAgRGlnaXRhcEdhbWVQbGF5ZXJTREsucHJvY2Vzc09sZFF1ZXVlKG9sZFF1ZXVlKTtcbn1cblxuLy8gV2F0Y2ggdGhlIHF1ZXVlIHdpdGggbmV3IG1ldGhvZFxuKDxhbnk+d2luZG93KS5kaWdpdGFwU0RLID0gRGlnaXRhcEdhbWVQbGF5ZXJTREsucHJvY2Vzc1F1ZXVlO1xuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfbW9kdWxlc19fWzYwN10oKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=