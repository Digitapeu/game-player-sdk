({607:function(){var e=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],s=0,n=a.length;s<n;s++,i++)o[i]=a[s];return o},t=function(){function t(){}return t.processQueue=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.debug("Processing Queue ->",e),"string"==typeof e[0]&&t[e[0]].apply(t,e.slice(1))},t.processOldQueue=function(e){var t=this;e.forEach((function(e){t.processQueue.apply(t,e)}))},t.setCallback=function(e,t){this[e]=t},t.init=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.debug("SDK Initialization");var r=["score","highScore",e,t];this.isLoaded||(window.parent.postMessage({controller:"_digitapGame",type:"SDK_SETTINGS",ui:r,ready:!0},"*"),this.listenGameboxEvents()),this.isLoaded=!0},t.setProgress=function(e,t,r){this.progress={type:"SDK_PLAYER_SCORE_UPDATE",state:e,score:t,level:r,continueScore:t,controller:"_digitapGame"},this.sendData()},t.setLevelUp=function(e){this.progress.level=e,this.progress.type="SDK_PLAYER_LEVEL_UP",this.sendData()},t.setPlayerFailed=function(e){void 0===e&&(e="FAIL"),this.progress.state=e,this.progress.score=0,this.progress.type="SDK_PLAYER_FAILED",this.sendData()},t.sendData=function(){window.parent.postMessage(this.progress,this.origin)},t.listenGameboxEvents=function(){var e=this;window.addEventListener("message",(function(t){if(e.debug("Event Received -> %o -> %o",t.data,t.origin),"object"==typeof t.data&&t.data.controller&&"_digitapApp"==t.data.controller){var r=e.allowedOrigins.indexOf(t.origin);if(-1===r)return void e.debug("Error: Origin not allowed inside game container!");if(e.origin=e.allowedOrigins[r],t.data.type)switch(t.data.type){case"SDK_START_GAME":e.afterStartGame();break;case"SDK_PAUSE_GAME":e.afterPauseGame();break;case"SDK_START_GAME_FROM_ZERO":e.progress.score=0,e.progress.level=0,e.progress.continueScore=0,e.afterStartGameFromZero();break;case"SDK_CONTINUE_WITH_CURRENT_SCORE":e.progress.score=e.progress.continueScore,e.afterContinueWithCurrentScore(e.progress.score);break;default:e.debug('Error: `data.type` = "'+t.data.type+'" not found! Please check `readme.md` of data collector package!')}else e.debug("Error: `event.data.type` should be implemented!")}}),!1)},t.afterStartGameFromZero=function(){},t.afterContinueWithCurrentScore=function(e){},t.afterStartGame=function(){},t.afterPauseGame=function(){},t.debug=function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];this.isDebugging||console.log.apply(console,e(["DigitapGamePlayerSDK -> "+t],r))},t.setDebugging=function(){this.isDebugging=!0},t.gameObject=null,t.isLoaded=!1,t.origin=null,t.isDebugging=!1,t.allowedOrigins=["https://build.digitap.dev","https://wam.app","https://app.wam.app","https://wam.eu","http://localhost:63342","http://localhost:8080","http://localhost:3000"],t.progress={controller:"_digitapGame",type:"SDK_PLAYER_SCORE_UPDATE",score:0,level:0,state:null,continueScore:0},t}();if(void 0!==window.digitapSDK){var r=window.digitapSDK.q;t.processOldQueue(r)}window.digitapSDK=t.processQueue}})[607]();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW1lLXBsYXllci1zZGsvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vZ2FtZS1wbGF5ZXItc2RrL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJwcm9jZXNzUXVldWUiLCJEaWdpdGFwR2FtZVBsYXllclNESyIsImRlYnVnIiwiYXJncyIsImFwcGx5Iiwic2xpY2UiLCJwcm9jZXNzT2xkUXVldWUiLCJxdWV1ZSIsImZvckVhY2giLCJzZXRDYWxsYmFjayIsImZuIiwiY2FsbGJhY2siLCJ0aGlzIiwiaW5pdCIsImhhc1Njb3JlIiwiaGFzSGlnaFNjb3JlIiwidWlPcHRpb25zIiwiaXNMb2FkZWQiLCJ3aW5kb3ciLCJwYXJlbnQiLCJwb3N0TWVzc2FnZSIsImNvbnRyb2xsZXIiLCJ0eXBlIiwidWkiLCJyZWFkeSIsImxpc3RlbkdhbWVib3hFdmVudHMiLCJzZXRQcm9ncmVzcyIsInN0YXRlIiwic2NvcmUiLCJsZXZlbCIsInByb2dyZXNzIiwiY29udGludWVTY29yZSIsInNlbmREYXRhIiwic2V0TGV2ZWxVcCIsInNldFBsYXllckZhaWxlZCIsIm9yaWdpbiIsInNlbGYiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJkYXRhIiwib3JpZ2luSW5kZXgiLCJhbGxvd2VkT3JpZ2lucyIsImluZGV4T2YiLCJhZnRlclN0YXJ0R2FtZSIsImFmdGVyUGF1c2VHYW1lIiwiYWZ0ZXJTdGFydEdhbWVGcm9tWmVybyIsImFmdGVyQ29udGludWVXaXRoQ3VycmVudFNjb3JlIiwibWVzc2FnZSIsImlzRGVidWdnaW5nIiwiY29uc29sZSIsImxvZyIsInBhcmFtcyIsInNldERlYnVnZ2luZyIsImdhbWVPYmplY3QiLCJkaWdpdGFwU0RLIiwib2xkUXVldWUiLCJxIl0sIm1hcHBpbmdzIjoid09BU0EsMkJBeVFBLE9BMU9nQixFQUFBQSxhQUFkLFcsSUFBMkIsc0RBQ3pCQyxFQUFxQkMsTUFBTSxzQkFBdUJDLEdBRTNCLGlCQUFaQSxFQUFLLElB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eEMsNEJBQ0Esa0JBQ0Esc0JBQ0EsaUJBQ0EseUJBQ0Esd0JBQ0EseUJBR2EsRUFBQVgsU0FBcUIsQ0FDbENULFdBQVksZUFDWkMsS0FBTSwwQkFDTk0sTUFBTyxFQUNQQyxNQUFPLEVBQ1BGLE1BQU8sS0FDUEksY0FBZSxHQW1QbkIsRUF6UUEsR0E0UUEsUUFBd0MsSUFBdkJiLE9BQVFvQyxXQUE0QixDQUNuRCxJQUFJQyxFQUFpQnJDLE9BQVFvQyxXQUFXRSxFQUN4Q3ZELEVBQXFCSyxnQkFBZ0JpRCxHQUlqQ3JDLE9BQVFvQyxXQUFhckQsRUFBcUJELGdCQ3hSNUIiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ0eXBlIFByb2dyZXNzID0ge1xuICBjb250cm9sbGVyOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgc2NvcmU6IG51bWJlcjtcbiAgbGV2ZWw6IG51bWJlcjtcbiAgc3RhdGU6IGFueTtcbiAgY29udGludWVTY29yZTogbnVtYmVyO1xufTtcblxuY2xhc3MgRGlnaXRhcEdhbWVQbGF5ZXJTREsge1xuICBwdWJsaWMgc3RhdGljIGdhbWVPYmplY3Q6IGFueSA9IG51bGw7XG4gIHByaXZhdGUgc3RhdGljIGlzTG9hZGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgc3RhdGljIG9yaWdpbjogc3RyaW5nID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0aWMgaXNEZWJ1Z2dpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIHN0YXRpYyBhbGxvd2VkT3JpZ2luczogc3RyaW5nW10gPSBbXG4gICAgXCJodHRwczovL2J1aWxkLmRpZ2l0YXAuZGV2XCIsXG4gICAgXCJodHRwczovL3dhbS5hcHBcIixcbiAgICBcImh0dHBzOi8vYXBwLndhbS5hcHBcIixcbiAgICBcImh0dHBzOi8vd2FtLmV1XCIsXG4gICAgXCJodHRwOi8vbG9jYWxob3N0OjYzMzQyXCIsXG4gICAgXCJodHRwOi8vbG9jYWxob3N0OjgwODBcIixcbiAgICBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiLFxuICBdO1xuXG4gIHByaXZhdGUgc3RhdGljIHByb2dyZXNzOiBQcm9ncmVzcyA9IHtcbiAgICBjb250cm9sbGVyOiBcIl9kaWdpdGFwR2FtZVwiLFxuICAgIHR5cGU6IFwiU0RLX1BMQVlFUl9TQ09SRV9VUERBVEVcIixcbiAgICBzY29yZTogMCxcbiAgICBsZXZlbDogMCxcbiAgICBzdGF0ZTogbnVsbCxcbiAgICBjb250aW51ZVNjb3JlOiAwLFxuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsIGEgbWV0aG9kIGZyb20gdGhlIGNsYXNzLFxuICAgKiB0aHJvdWdoIGEgcXVldWUuXG4gICAqIFxuICAgKiBAcGFyYW0gYXJncyBhcnJheVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBwcm9jZXNzUXVldWUoLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBEaWdpdGFwR2FtZVBsYXllclNESy5kZWJ1ZyhcIlByb2Nlc3NpbmcgUXVldWUgLT5cIiwgYXJncyk7XG5cbiAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIERpZ2l0YXBHYW1lUGxheWVyU0RLW1xuICAgICAgICBhcmdzWzBdIGFzXG4gICAgICAgICAgfCBcImluaXRcIlxuICAgICAgICAgIHwgXCJzZXRQcm9ncmVzc1wiXG4gICAgICAgICAgfCBcInNldExldmVsVXBcIlxuICAgICAgICAgIHwgXCJzZXRQbGF5ZXJGYWlsZWRcIlxuICAgICAgICAgIHwgXCJzZXRDYWxsYmFja1wiXG4gICAgICBdLmFwcGx5KERpZ2l0YXBHYW1lUGxheWVyU0RLLCBhcmdzLnNsaWNlKDEpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyBhIGN1cnJlbnQgcXVldWUuXG4gICAqIFxuICAgKiBAcGFyYW0gcXVldWUgYXJyYXlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcHJvY2Vzc09sZFF1ZXVlKHF1ZXVlOiBbXSk6IHZvaWQge1xuICAgIHF1ZXVlLmZvckVhY2goKGFyZ3M6IGFueSkgPT4ge1xuICAgICAgdGhpcy5wcm9jZXNzUXVldWUoLi4uYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhIGNhbGxiYWNrIG1ldGhvZC5cbiAgICogXG4gICAqIEBwYXJhbSBmbiBzdHJpbmdcbiAgICogQHBhcmFtIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNldENhbGxiYWNrKFxuICAgIGZuOlxuICAgICAgfCBcImFmdGVyU3RhcnRHYW1lRnJvbVplcm9cIlxuICAgICAgfCBcImFmdGVyQ29udGludWVXaXRoQ3VycmVudFNjb3JlXCJcbiAgICAgIHwgXCJhZnRlclN0YXJ0R2FtZVwiXG4gICAgICB8IFwiYWZ0ZXJQYXVzZUdhbWVcIixcbiAgICBjYWxsYmFjazogYW55XG4gICk6IHZvaWQge1xuICAgIHRoaXNbZm5dID0gY2FsbGJhY2s7XG4gIH1cblxuICAvKipcbiAgICogSW5pdCBhIG5ldyBnYW1lIGNvbm5lY3Rpb24gd2l0aFxuICAgKiB0aGUgcGFyZW50IHBsYXRmb3JtLlxuICAgKlxuICAgKiBAcGFyYW0gdWlPcHRpb25zIGFycmF5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGluaXQoXG4gICAgaGFzU2NvcmU6IGJvb2xlYW4gPSB0cnVlLFxuICAgIGhhc0hpZ2hTY29yZTogYm9vbGVhbiA9IHRydWVcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5kZWJ1ZyhcIlNESyBJbml0aWFsaXphdGlvblwiKTtcblxuICAgIC8vIEluaXQgdGhlIHVpT3B0aW9uc1xuICAgIGNvbnN0IHVpT3B0aW9ucyA9IFtcInNjb3JlXCIsIFwiaGlnaFNjb3JlXCIsIGhhc1Njb3JlLCBoYXNIaWdoU2NvcmVdO1xuXG4gICAgLy8gSWYgU0RLIGlzIG5vdCBsb2FkZWQgeWV0XG4gICAgaWYgKCF0aGlzLmlzTG9hZGVkKSB7XG4gICAgICAvLyBTZW5kIHRoZSBpbml0IG1lc3NhZ2VcbiAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoXG4gICAgICAgIHtcbiAgICAgICAgICBjb250cm9sbGVyOiBcIl9kaWdpdGFwR2FtZVwiLFxuICAgICAgICAgIHR5cGU6IFwiU0RLX1NFVFRJTkdTXCIsXG4gICAgICAgICAgdWk6IHVpT3B0aW9ucyxcbiAgICAgICAgICByZWFkeTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgXCIqXCJcbiAgICAgICk7XG5cbiAgICAgIC8vIFdhdGNoIGZvciBtZXNzYWdlcyBmcm9tIEdhbWVCb3hcbiAgICAgIHRoaXMubGlzdGVuR2FtZWJveEV2ZW50cygpO1xuICAgIH1cblxuICAgIC8vIFNldCBTREsgYXMgbG9hZGVkIHRvIHByZXZlbnQgcmUtaW5pdGlhdGlvblxuICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBwcm9ncmVzcyBvZiBhIGdhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlIHN0cmluZ1xuICAgKiBAcGFyYW0gc3RhdGUgc3RyaW5nXG4gICAqIEBwYXJhbSBzY29yZSBudW1iZXJcbiAgICogQHBhcmFtIGxldmVsIG51bWJlclxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzZXRQcm9ncmVzcyhzdGF0ZTogc3RyaW5nLCBzY29yZTogbnVtYmVyLCBsZXZlbDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gU2V0IHRoZSBjdXJyZW50IHByb2dyZXNzXG4gICAgdGhpcy5wcm9ncmVzcyA9IHtcbiAgICAgIHR5cGU6IFwiU0RLX1BMQVlFUl9TQ09SRV9VUERBVEVcIixcbiAgICAgIHN0YXRlLFxuICAgICAgc2NvcmUsXG4gICAgICBsZXZlbCxcbiAgICAgIGNvbnRpbnVlU2NvcmU6IHNjb3JlLFxuICAgICAgY29udHJvbGxlcjogXCJfZGlnaXRhcEdhbWVcIixcbiAgICB9O1xuXG4gICAgdGhpcy5zZW5kRGF0YSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgbmV3IGxldmVsIG9mIHRoZSBnYW1lLlxuICAgKlxuICAgKiBAcGFyYW0gbGV2ZWwgbnVtYmVyXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNldExldmVsVXAobGV2ZWw6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMucHJvZ3Jlc3MubGV2ZWwgPSBsZXZlbDtcbiAgICB0aGlzLnByb2dyZXNzLnR5cGUgPSBcIlNES19QTEFZRVJfTEVWRUxfVVBcIjtcblxuICAgIHRoaXMuc2VuZERhdGEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGdhbWUgYXMgZmFpbGVkLlxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGUgc3RyaW5nXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNldFBsYXllckZhaWxlZChzdGF0ZTogc3RyaW5nID0gXCJGQUlMXCIpOiB2b2lkIHtcbiAgICB0aGlzLnByb2dyZXNzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5wcm9ncmVzcy5zY29yZSA9IDA7XG4gICAgdGhpcy5wcm9ncmVzcy50eXBlID0gXCJTREtfUExBWUVSX0ZBSUxFRFwiO1xuXG4gICAgdGhpcy5zZW5kRGF0YSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGdhbWUgZGF0YSB0byBwYXJlbnQgcGxhdGZvcm0uXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBzZW5kRGF0YSgpOiB2b2lkIHtcbiAgICAvLyBTZW5kIHRoZSBtZXNzYWdlIHRvIEdhbWVib3guXG4gICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh0aGlzLnByb2dyZXNzLCB0aGlzLm9yaWdpbik7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgbGlzdGVuaW5nIGZvciBtZXNzYWdlc1xuICAgKiBmcm9tIHRoZSBwbGF0Zm9ybS5cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGxpc3RlbkdhbWVib3hFdmVudHMoKTogdm9pZCB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwibWVzc2FnZVwiLFxuICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHNlbGYuZGVidWcoXG4gICAgICAgICAgXCJFdmVudCBSZWNlaXZlZCAtPiAlbyAtPiAlb1wiLFxuICAgICAgICAgIGV2ZW50LmRhdGEsXG4gICAgICAgICAgZXZlbnQub3JpZ2luXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICBldmVudC5kYXRhLmNvbnRyb2xsZXIgJiZcbiAgICAgICAgICBldmVudC5kYXRhLmNvbnRyb2xsZXIgPT0gXCJfZGlnaXRhcEFwcFwiXG4gICAgICAgICkge1xuICAgICAgICAgIGxldCBvcmlnaW5JbmRleCA9IHNlbGYuYWxsb3dlZE9yaWdpbnMuaW5kZXhPZihldmVudC5vcmlnaW4pO1xuXG4gICAgICAgICAgaWYgKG9yaWdpbkluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgc2VsZi5kZWJ1ZyhcIkVycm9yOiBPcmlnaW4gbm90IGFsbG93ZWQgaW5zaWRlIGdhbWUgY29udGFpbmVyIVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5vcmlnaW4gPSBzZWxmLmFsbG93ZWRPcmlnaW5zW29yaWdpbkluZGV4XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZXZlbnQuZGF0YS50eXBlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmRhdGEudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiU0RLX1NUQVJUX0dBTUVcIjpcbiAgICAgICAgICAgICAgICBzZWxmLmFmdGVyU3RhcnRHYW1lKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcIlNES19QQVVTRV9HQU1FXCI6XG4gICAgICAgICAgICAgICAgc2VsZi5hZnRlclBhdXNlR2FtZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJTREtfU1RBUlRfR0FNRV9GUk9NX1pFUk9cIjpcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLnNjb3JlID0gMDtcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLmxldmVsID0gMDtcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLmNvbnRpbnVlU2NvcmUgPSAwO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5hZnRlclN0YXJ0R2FtZUZyb21aZXJvKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcIlNES19DT05USU5VRV9XSVRIX0NVUlJFTlRfU0NPUkVcIjpcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLnNjb3JlID0gc2VsZi5wcm9ncmVzcy5jb250aW51ZVNjb3JlO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5hZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZShzZWxmLnByb2dyZXNzLnNjb3JlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHNlbGYuZGVidWcoXG4gICAgICAgICAgICAgICAgICAnRXJyb3I6IGBkYXRhLnR5cGVgID0gXCInICtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YS50eXBlICtcbiAgICAgICAgICAgICAgICAgICAgJ1wiIG5vdCBmb3VuZCEgUGxlYXNlIGNoZWNrIGByZWFkbWUubWRgIG9mIGRhdGEgY29sbGVjdG9yIHBhY2thZ2UhJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuZGVidWcoXCJFcnJvcjogYGV2ZW50LmRhdGEudHlwZWAgc2hvdWxkIGJlIGltcGxlbWVudGVkIVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmYWxzZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRW1wdHkgbWV0aG9kcyBmb3IgZ2FtZSBkZXZlbG9wZXIgdG8gdXNlLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBhZnRlclN0YXJ0R2FtZUZyb21aZXJvKCkge31cblxuICBwdWJsaWMgc3RhdGljIGFmdGVyQ29udGludWVXaXRoQ3VycmVudFNjb3JlKHNjb3JlOiBudW1iZXIpIHt9XG5cbiAgcHVibGljIHN0YXRpYyBhZnRlclN0YXJ0R2FtZSgpIHt9XG5cbiAgcHVibGljIHN0YXRpYyBhZnRlclBhdXNlR2FtZSgpIHt9XG5cbiAgLyoqXG4gICAqIElmIHVzZXIgaXMgZGVidWdnaW5nLCBzaG93IHNvbWUgY29uc29sZSBsb2dzLlxuICAgKlxuICAgKiBAcGFyYW0gbWVzc2FnZSBhbnlcbiAgICogQHBhcmFtIHBhcmFtcyBhbnlbXVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZGVidWcobWVzc2FnZT86IGFueSwgLi4ucGFyYW1zOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0RlYnVnZ2luZykge1xuICAgICAgY29uc29sZS5sb2coXCJEaWdpdGFwR2FtZVBsYXllclNESyAtPiBcIiArIG1lc3NhZ2UsIC4uLnBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gc2V0IFNESyBhcyBkZWJ1Z2dpbmcuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNldERlYnVnZ2luZygpOiB2b2lkIHtcbiAgICB0aGlzLmlzRGVidWdnaW5nID0gdHJ1ZTtcbiAgfVxufVxuXG4vLyBSZWFkIHRoZSBjdXJyZW50IHF1ZXVlXG5pZiAodHlwZW9mICg8YW55PndpbmRvdykuZGlnaXRhcFNESyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBsZXQgb2xkUXVldWUgPSAoPGFueT53aW5kb3cpLmRpZ2l0YXBTREsucTtcbiAgRGlnaXRhcEdhbWVQbGF5ZXJTREsucHJvY2Vzc09sZFF1ZXVlKG9sZFF1ZXVlKTtcbn1cblxuLy8gV2F0Y2ggdGhlIHF1ZXVlIHdpdGggbmV3IG1ldGhvZFxuKDxhbnk+d2luZG93KS5kaWdpdGFwU0RLID0gRGlnaXRhcEdhbWVQbGF5ZXJTREsucHJvY2Vzc1F1ZXVlO1xuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfbW9kdWxlc19fWzYwN10oKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=