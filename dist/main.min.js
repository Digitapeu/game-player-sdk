({607:function(){var e=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],s=0,n=a.length;s<n;s++,o++)i[o]=a[s];return i},t=function(){function t(){}return t.processQueue=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.debug("Processing Queue ->",e),"string"==typeof e[0]&&t[e[0]].apply(t,e.slice(1))},t.processOldQueue=function(e){var t=this;e.forEach((function(e){t.processQueue.apply(t,e)}))},t.setCallback=function(e,t){this[e]=t},t.init=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.debug("SDK Initialization");var r=["score","highScore",e,t];this.isLoaded||(window.parent.postMessage({controller:"_digitapGame",type:"SDK_SETTINGS",ui:r,ready:!0},"*"),this.listenGameboxEvents(),document.getElementsByTagName("canvas")[0].setAttribute("style","width: 100%; height: 100%; margin: 0;")),this.isLoaded=!0},t.setProgress=function(e,t,r){this.progress={type:"SDK_PLAYER_SCORE_UPDATE",state:e,score:t,level:r,continueScore:t,controller:"_digitapGame"},this.sendData()},t.setLevelUp=function(e){this.progress.level=e,this.progress.type="SDK_PLAYER_LEVEL_UP",this.sendData()},t.setPlayerFailed=function(e){void 0===e&&(e="FAIL"),this.progress.state=e,this.progress.score=0,this.progress.type="SDK_PLAYER_FAILED",this.sendData()},t.sendData=function(){window.parent.postMessage(this.progress,this.origin)},t.listenGameboxEvents=function(){var e=this;window.addEventListener("message",(function(t){if(e.debug("Event Received -> %o -> %o",t.data,t.origin),"object"==typeof t.data&&t.data.controller&&"_digitapApp"==t.data.controller){var r=e.allowedOrigins.indexOf(t.origin);if(-1===r)return void e.debug("Error: Origin not allowed inside game container!");if(e.origin=e.allowedOrigins[r],t.data.type)switch(t.data.type){case"SDK_START_GAME":e.afterStartGame();break;case"SDK_PAUSE_GAME":e.afterPauseGame();break;case"SDK_START_GAME_FROM_ZERO":e.progress.score=0,e.progress.level=0,e.progress.continueScore=0,e.afterStartGameFromZero();break;case"SDK_CONTINUE_WITH_CURRENT_SCORE":e.progress.score=e.progress.continueScore,e.afterContinueWithCurrentScore(e.progress.score);break;default:e.debug('Error: `data.type` = "'+t.data.type+'" not found! Please check `readme.md` of data collector package!')}else e.debug("Error: `event.data.type` should be implemented!")}}),!1)},t.afterStartGameFromZero=function(){},t.afterContinueWithCurrentScore=function(e){},t.afterStartGame=function(){},t.afterPauseGame=function(){},t.debug=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];this.isDebugging||console.log.apply(console,e(["DigitapGamePlayerSDK -> "+t],r))},t.setDebugging=function(){this.isDebugging=!0},t.gameObject=null,t.isLoaded=!1,t.origin=null,t.isDebugging=!1,t.allowedOrigins=["https://build.digitap.dev","https://wam.app","https://app.wam.app","https://wam.eu","http://localhost:63342","http://localhost:8080","http://localhost:3000"],t.progress={controller:"_digitapGame",type:"SDK_PLAYER_SCORE_UPDATE",score:0,level:0,state:null,continueScore:0},t}();if(void 0!==window.digitapSDK){var r=window.digitapSDK.q;t.processOldQueue(r)}window.digitapSDK=t.processQueue}})[607]();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW1lLXBsYXllci1zZGsvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vZ2FtZS1wbGF5ZXItc2RrL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJwcm9jZXNzUXVldWUiLCJEaWdpdGFwR2FtZVBsYXllclNESyIsImRlYnVnIiwiYXJncyIsImFwcGx5Iiwic2xpY2UiLCJwcm9jZXNzT2xkUXVldWUiLCJxdWV1ZSIsImZvckVhY2giLCJzZXRDYWxsYmFjayIsImZuIiwiY2FsbGJhY2siLCJ0aGlzIiwiaW5pdCIsImhhc1Njb3JlIiwiaGFzSGlnaFNjb3JlIiwidWlPcHRpb25zIiwiaXNMb2FkZWQiLCJ3aW5kb3ciLCJwYXJlbnQiLCJwb3N0TWVzc2FnZSIsImNvbnRyb2xsZXIiLCJ0eXBlIiwidWkiLCJyZWFkeSIsImxpc3RlbkdhbWVib3hFdmVudHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic2V0QXR0cmlidXRlIiwic2V0UHJvZ3Jlc3MiLCJzdGF0ZSIsInNjb3JlIiwibGV2ZWwiLCJwcm9ncmVzcyIsImNvbnRpbnVlU2NvcmUiLCJzZW5kRGF0YSIsInNldExldmVsVXAiLCJzZXRQbGF5ZXJGYWlsZWQiLCJvcmlnaW4iLCJzZWxmIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZGF0YSIsIm9yaWdpbkluZGV4IiwiYWxsb3dlZE9yaWdpbnMiLCJpbmRleE9mIiwiYWZ0ZXJTdGFydEdhbWUiLCJhZnRlclBhdXNlR2FtZSIsImFmdGVyU3RhcnRHYW1lRnJvbVplcm8iLCJhZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZSIsIm1lc3NhZ2UiLCJpc0RlYnVnZ2luZyIsImNvbnNvbGUiLCJsb2ciLCJwYXJhbXMiLCJzZXREZWJ1Z2dpbmciLCJnYW1lT2JqZWN0IiwiZGlnaXRhcFNESyIsIm9sZFF1ZXVlIiwicSJdLCJtYXBwaW5ncyI6IndPQVNBLDJCQTZRQSxPQTlPZ0IsRUFBQUEsYUFBZCxXLElBQTJC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QUFjLEdBMVFQLEVBQUFLLFdBQWtCLEtBQ2pCLEVBQUF2QyxVQUFvQixFQUNwQixFQUFBcUIsT0FBaUIsS0FDakIsRUFBQWEsYUFBdUIsRUFFdkIsRUFBQVAsZUFBMkIsQ0FDeEMsNEJBQ0Esa0JBQ0Esc0JBQ0EsaUJBQ0EseUJBQ0Esd0JBQ0EseUJBR2EsRUFBQVgsU0FBcUIsQ0FDbENaLFdBQVksZUFDWkMsS0FBTSwwQkFDTlMsTUFBTyxFQUNQQyxNQUFPLEVBQ1BGLE1BQU8sS0FDUEksY0FBZSxHQXVQbkIsRUE3UUEsR0FnUkEsUUFBd0MsSUFBdkJoQixPQUFRdUMsV0FBNEIsQ0FDbkQsSUFBSUMsRUFBaUJ4QyxPQUFRdUMsV0FBV0UsRUFDeEMxRCxFQUFxQkssZ0JBQWdCb0QsR0FJakN4QyxPQUFRdUMsV0FBYXhELEVBQXFCRCxnQkM1UjVCIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidHlwZSBQcm9ncmVzcyA9IHtcbiAgY29udHJvbGxlcjogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG4gIHNjb3JlOiBudW1iZXI7XG4gIGxldmVsOiBudW1iZXI7XG4gIHN0YXRlOiBhbnk7XG4gIGNvbnRpbnVlU2NvcmU6IG51bWJlcjtcbn07XG5cbmNsYXNzIERpZ2l0YXBHYW1lUGxheWVyU0RLIHtcbiAgcHVibGljIHN0YXRpYyBnYW1lT2JqZWN0OiBhbnkgPSBudWxsO1xuICBwcml2YXRlIHN0YXRpYyBpc0xvYWRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHN0YXRpYyBvcmlnaW46IHN0cmluZyA9IG51bGw7XG4gIHByaXZhdGUgc3RhdGljIGlzRGVidWdnaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYWxsb3dlZE9yaWdpbnM6IHN0cmluZ1tdID0gW1xuICAgIFwiaHR0cHM6Ly9idWlsZC5kaWdpdGFwLmRldlwiLFxuICAgIFwiaHR0cHM6Ly93YW0uYXBwXCIsXG4gICAgXCJodHRwczovL2FwcC53YW0uYXBwXCIsXG4gICAgXCJodHRwczovL3dhbS5ldVwiLFxuICAgIFwiaHR0cDovL2xvY2FsaG9zdDo2MzM0MlwiLFxuICAgIFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwXCIsXG4gICAgXCJodHRwOi8vbG9jYWxob3N0OjMwMDBcIixcbiAgXTtcblxuICBwcml2YXRlIHN0YXRpYyBwcm9ncmVzczogUHJvZ3Jlc3MgPSB7XG4gICAgY29udHJvbGxlcjogXCJfZGlnaXRhcEdhbWVcIixcbiAgICB0eXBlOiBcIlNES19QTEFZRVJfU0NPUkVfVVBEQVRFXCIsXG4gICAgc2NvcmU6IDAsXG4gICAgbGV2ZWw6IDAsXG4gICAgc3RhdGU6IG51bGwsXG4gICAgY29udGludWVTY29yZTogMCxcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbCBhIG1ldGhvZCBmcm9tIHRoZSBjbGFzcyxcbiAgICogdGhyb3VnaCBhIHF1ZXVlLlxuICAgKiBcbiAgICogQHBhcmFtIGFyZ3MgYXJyYXlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcHJvY2Vzc1F1ZXVlKC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgRGlnaXRhcEdhbWVQbGF5ZXJTREsuZGVidWcoXCJQcm9jZXNzaW5nIFF1ZXVlIC0+XCIsIGFyZ3MpO1xuXG4gICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBEaWdpdGFwR2FtZVBsYXllclNES1tcbiAgICAgICAgYXJnc1swXSBhc1xuICAgICAgICAgIHwgXCJpbml0XCJcbiAgICAgICAgICB8IFwic2V0UHJvZ3Jlc3NcIlxuICAgICAgICAgIHwgXCJzZXRMZXZlbFVwXCJcbiAgICAgICAgICB8IFwic2V0UGxheWVyRmFpbGVkXCJcbiAgICAgICAgICB8IFwic2V0Q2FsbGJhY2tcIlxuICAgICAgXS5hcHBseShEaWdpdGFwR2FtZVBsYXllclNESywgYXJncy5zbGljZSgxKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgYSBjdXJyZW50IHF1ZXVlLlxuICAgKiBcbiAgICogQHBhcmFtIHF1ZXVlIGFycmF5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHByb2Nlc3NPbGRRdWV1ZShxdWV1ZTogW10pOiB2b2lkIHtcbiAgICBxdWV1ZS5mb3JFYWNoKChhcmdzOiBhbnkpID0+IHtcbiAgICAgIHRoaXMucHJvY2Vzc1F1ZXVlKC4uLmFyZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYSBjYWxsYmFjayBtZXRob2QuXG4gICAqIFxuICAgKiBAcGFyYW0gZm4gc3RyaW5nXG4gICAqIEBwYXJhbSBjYWxsYmFjayBmdW5jdGlvblxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzZXRDYWxsYmFjayhcbiAgICBmbjpcbiAgICAgIHwgXCJhZnRlclN0YXJ0R2FtZUZyb21aZXJvXCJcbiAgICAgIHwgXCJhZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZVwiXG4gICAgICB8IFwiYWZ0ZXJTdGFydEdhbWVcIlxuICAgICAgfCBcImFmdGVyUGF1c2VHYW1lXCIsXG4gICAgY2FsbGJhY2s6IGFueVxuICApOiB2b2lkIHtcbiAgICB0aGlzW2ZuXSA9IGNhbGxiYWNrO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXQgYSBuZXcgZ2FtZSBjb25uZWN0aW9uIHdpdGhcbiAgICogdGhlIHBhcmVudCBwbGF0Zm9ybS5cbiAgICpcbiAgICogQHBhcmFtIHVpT3B0aW9ucyBhcnJheVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBpbml0KFxuICAgIGhhc1Njb3JlOiBib29sZWFuID0gdHJ1ZSxcbiAgICBoYXNIaWdoU2NvcmU6IGJvb2xlYW4gPSB0cnVlXG4gICk6IHZvaWQge1xuICAgIHRoaXMuZGVidWcoXCJTREsgSW5pdGlhbGl6YXRpb25cIik7XG5cbiAgICAvLyBJbml0IHRoZSB1aU9wdGlvbnNcbiAgICBjb25zdCB1aU9wdGlvbnMgPSBbXCJzY29yZVwiLCBcImhpZ2hTY29yZVwiLCBoYXNTY29yZSwgaGFzSGlnaFNjb3JlXTtcblxuICAgIC8vIElmIFNESyBpcyBub3QgbG9hZGVkIHlldFxuICAgIGlmICghdGhpcy5pc0xvYWRlZCkge1xuICAgICAgLy8gU2VuZCB0aGUgaW5pdCBtZXNzYWdlXG4gICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKFxuICAgICAgICB7XG4gICAgICAgICAgY29udHJvbGxlcjogXCJfZGlnaXRhcEdhbWVcIixcbiAgICAgICAgICB0eXBlOiBcIlNES19TRVRUSU5HU1wiLFxuICAgICAgICAgIHVpOiB1aU9wdGlvbnMsXG4gICAgICAgICAgcmVhZHk6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIFwiKlwiXG4gICAgICApO1xuXG4gICAgICAvLyBXYXRjaCBmb3IgbWVzc2FnZXMgZnJvbSBHYW1lQm94XG4gICAgICB0aGlzLmxpc3RlbkdhbWVib3hFdmVudHMoKTtcblxuICAgICAgLy8gU2V0IHRoZSBjYW52YXMgZnVsbHdpZHRoXG4gICAgICBsZXQgY2FudmFzOiBIVE1MQ29sbGVjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiY2FudmFzXCIpO1xuICAgICAgY2FudmFzWzBdLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgbWFyZ2luOiAwO1wiKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgU0RLIGFzIGxvYWRlZCB0byBwcmV2ZW50IHJlLWluaXRpYXRpb25cbiAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgcHJvZ3Jlc3Mgb2YgYSBnYW1lLlxuICAgKlxuICAgKiBAcGFyYW0gdHlwZSBzdHJpbmdcbiAgICogQHBhcmFtIHN0YXRlIHN0cmluZ1xuICAgKiBAcGFyYW0gc2NvcmUgbnVtYmVyXG4gICAqIEBwYXJhbSBsZXZlbCBudW1iZXJcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgc2V0UHJvZ3Jlc3Moc3RhdGU6IHN0cmluZywgc2NvcmU6IG51bWJlciwgbGV2ZWw6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFNldCB0aGUgY3VycmVudCBwcm9ncmVzc1xuICAgIHRoaXMucHJvZ3Jlc3MgPSB7XG4gICAgICB0eXBlOiBcIlNES19QTEFZRVJfU0NPUkVfVVBEQVRFXCIsXG4gICAgICBzdGF0ZSxcbiAgICAgIHNjb3JlLFxuICAgICAgbGV2ZWwsXG4gICAgICBjb250aW51ZVNjb3JlOiBzY29yZSxcbiAgICAgIGNvbnRyb2xsZXI6IFwiX2RpZ2l0YXBHYW1lXCIsXG4gICAgfTtcblxuICAgIHRoaXMuc2VuZERhdGEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG5ldyBsZXZlbCBvZiB0aGUgZ2FtZS5cbiAgICpcbiAgICogQHBhcmFtIGxldmVsIG51bWJlclxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzZXRMZXZlbFVwKGxldmVsOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnByb2dyZXNzLmxldmVsID0gbGV2ZWw7XG4gICAgdGhpcy5wcm9ncmVzcy50eXBlID0gXCJTREtfUExBWUVSX0xFVkVMX1VQXCI7XG5cbiAgICB0aGlzLnNlbmREYXRhKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBnYW1lIGFzIGZhaWxlZC5cbiAgICpcbiAgICogQHBhcmFtIHN0YXRlIHN0cmluZ1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzZXRQbGF5ZXJGYWlsZWQoc3RhdGU6IHN0cmluZyA9IFwiRkFJTFwiKTogdm9pZCB7XG4gICAgdGhpcy5wcm9ncmVzcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMucHJvZ3Jlc3Muc2NvcmUgPSAwO1xuICAgIHRoaXMucHJvZ3Jlc3MudHlwZSA9IFwiU0RLX1BMQVlFUl9GQUlMRURcIjtcblxuICAgIHRoaXMuc2VuZERhdGEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBnYW1lIGRhdGEgdG8gcGFyZW50IHBsYXRmb3JtLlxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgc2VuZERhdGEoKTogdm9pZCB7XG4gICAgLy8gU2VuZCB0aGUgbWVzc2FnZSB0byBHYW1lYm94LlxuICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UodGhpcy5wcm9ncmVzcywgdGhpcy5vcmlnaW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGxpc3RlbmluZyBmb3IgbWVzc2FnZXNcbiAgICogZnJvbSB0aGUgcGxhdGZvcm0uXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBsaXN0ZW5HYW1lYm94RXZlbnRzKCk6IHZvaWQge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcIm1lc3NhZ2VcIixcbiAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBzZWxmLmRlYnVnKFxuICAgICAgICAgIFwiRXZlbnQgUmVjZWl2ZWQgLT4gJW8gLT4gJW9cIixcbiAgICAgICAgICBldmVudC5kYXRhLFxuICAgICAgICAgIGV2ZW50Lm9yaWdpblxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgZXZlbnQuZGF0YS5jb250cm9sbGVyICYmXG4gICAgICAgICAgZXZlbnQuZGF0YS5jb250cm9sbGVyID09IFwiX2RpZ2l0YXBBcHBcIlxuICAgICAgICApIHtcbiAgICAgICAgICBsZXQgb3JpZ2luSW5kZXggPSBzZWxmLmFsbG93ZWRPcmlnaW5zLmluZGV4T2YoZXZlbnQub3JpZ2luKTtcblxuICAgICAgICAgIGlmIChvcmlnaW5JbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHNlbGYuZGVidWcoXCJFcnJvcjogT3JpZ2luIG5vdCBhbGxvd2VkIGluc2lkZSBnYW1lIGNvbnRhaW5lciFcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYub3JpZ2luID0gc2VsZi5hbGxvd2VkT3JpZ2luc1tvcmlnaW5JbmRleF07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV2ZW50LmRhdGEudHlwZSkge1xuICAgICAgICAgICAgc3dpdGNoIChldmVudC5kYXRhLnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIlNES19TVEFSVF9HQU1FXCI6XG4gICAgICAgICAgICAgICAgc2VsZi5hZnRlclN0YXJ0R2FtZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJTREtfUEFVU0VfR0FNRVwiOlxuICAgICAgICAgICAgICAgIHNlbGYuYWZ0ZXJQYXVzZUdhbWUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIFwiU0RLX1NUQVJUX0dBTUVfRlJPTV9aRVJPXCI6XG4gICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5zY29yZSA9IDA7XG4gICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5sZXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5jb250aW51ZVNjb3JlID0gMDtcblxuICAgICAgICAgICAgICAgIHNlbGYuYWZ0ZXJTdGFydEdhbWVGcm9tWmVybygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJTREtfQ09OVElOVUVfV0lUSF9DVVJSRU5UX1NDT1JFXCI6XG4gICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5zY29yZSA9IHNlbGYucHJvZ3Jlc3MuY29udGludWVTY29yZTtcblxuICAgICAgICAgICAgICAgIHNlbGYuYWZ0ZXJDb250aW51ZVdpdGhDdXJyZW50U2NvcmUoc2VsZi5wcm9ncmVzcy5zY29yZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBzZWxmLmRlYnVnKFxuICAgICAgICAgICAgICAgICAgJ0Vycm9yOiBgZGF0YS50eXBlYCA9IFwiJyArXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEudHlwZSArXG4gICAgICAgICAgICAgICAgICAgICdcIiBub3QgZm91bmQhIFBsZWFzZSBjaGVjayBgcmVhZG1lLm1kYCBvZiBkYXRhIGNvbGxlY3RvciBwYWNrYWdlISdcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmRlYnVnKFwiRXJyb3I6IGBldmVudC5kYXRhLnR5cGVgIHNob3VsZCBiZSBpbXBsZW1lbnRlZCFcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZmFsc2VcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEVtcHR5IG1ldGhvZHMgZm9yIGdhbWUgZGV2ZWxvcGVyIHRvIHVzZS5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgYWZ0ZXJTdGFydEdhbWVGcm9tWmVybygpIHt9XG5cbiAgcHVibGljIHN0YXRpYyBhZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZShzY29yZTogbnVtYmVyKSB7fVxuXG4gIHB1YmxpYyBzdGF0aWMgYWZ0ZXJTdGFydEdhbWUoKSB7fVxuXG4gIHB1YmxpYyBzdGF0aWMgYWZ0ZXJQYXVzZUdhbWUoKSB7fVxuXG4gIC8qKlxuICAgKiBJZiB1c2VyIGlzIGRlYnVnZ2luZywgc2hvdyBzb21lIGNvbnNvbGUgbG9ncy5cbiAgICpcbiAgICogQHBhcmFtIG1lc3NhZ2UgYW55XG4gICAqIEBwYXJhbSBwYXJhbXMgYW55W11cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGRlYnVnKG1lc3NhZ2U/OiBhbnksIC4uLnBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNEZWJ1Z2dpbmcpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRGlnaXRhcEdhbWVQbGF5ZXJTREsgLT4gXCIgKyBtZXNzYWdlLCAuLi5wYXJhbXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIHNldCBTREsgYXMgZGVidWdnaW5nLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzZXREZWJ1Z2dpbmcoKTogdm9pZCB7XG4gICAgdGhpcy5pc0RlYnVnZ2luZyA9IHRydWU7XG4gIH1cbn1cblxuLy8gUmVhZCB0aGUgY3VycmVudCBxdWV1ZVxuaWYgKHR5cGVvZiAoPGFueT53aW5kb3cpLmRpZ2l0YXBTREsgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgbGV0IG9sZFF1ZXVlID0gKDxhbnk+d2luZG93KS5kaWdpdGFwU0RLLnE7XG4gIERpZ2l0YXBHYW1lUGxheWVyU0RLLnByb2Nlc3NPbGRRdWV1ZShvbGRRdWV1ZSk7XG59XG5cbi8vIFdhdGNoIHRoZSBxdWV1ZSB3aXRoIG5ldyBtZXRob2Rcbig8YW55PndpbmRvdykuZGlnaXRhcFNESyA9IERpZ2l0YXBHYW1lUGxheWVyU0RLLnByb2Nlc3NRdWV1ZTtcbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuX193ZWJwYWNrX21vZHVsZXNfX1s2MDddKCk7XG4iXSwic291cmNlUm9vdCI6IiJ9