({607:function(){var e=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var o=Array(e),s=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,n=a.length;i<n;i++,s++)o[s]=a[i];return o},t=function(){function t(){}return t.processQueue=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.debug("Processing Queue ->",e),"string"==typeof e[0]&&t[e[0]].apply(t,e.slice(1))},t.processOldQueue=function(e){var t=this;e.forEach((function(e){t.processQueue.apply(t,e)}))},t.setCallback=function(e,t){this[e]=t},t.init=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.debug("SDK Initialization");var r=["score","highScore",e,t];if(!this.isLoaded){window.parent.postMessage({controller:"_digitapGame",type:"SDK_SETTINGS",ui:r,ready:!0},"*"),this.listenGameboxEvents();var o=document.getElementsByTagName("canvas"),s=document.getElementsByTagName("html");setTimeout((function(){var e=o[0].getAttribute("style");o[0].setAttribute("style",e+"width: 100%; margin: 0; padding: 0; user-select: none; -webkit-user-select: none; -moz-user-select: none;");var t=s[0].getAttribute("style");s[0].setAttribute("style",(t||"")+"user-select: none; -webkit-user-select: none; -moz-user-select: none;")}),2e3)}this.isLoaded=!0},t.setProgress=function(e,t,r){this.progress={type:"SDK_PLAYER_SCORE_UPDATE",state:e,score:t,level:r,continueScore:t,controller:"_digitapGame"},this.sendData()},t.setLevelUp=function(e){this.progress.level=e,this.progress.type="SDK_PLAYER_LEVEL_UP",this.sendData()},t.setPlayerFailed=function(e){void 0===e&&(e="FAIL"),this.progress.state=e,this.progress.score=0,this.progress.type="SDK_PLAYER_FAILED",this.sendData()},t.sendData=function(){window.parent.postMessage(this.progress,this.origin)},t.listenGameboxEvents=function(){var e=this;window.addEventListener("message",(function(t){if(e.debug("Event Received -> %o -> %o",t.data,t.origin),"object"==typeof t.data&&t.data.controller&&"_digitapApp"==t.data.controller){var r=e.allowedOrigins.indexOf(t.origin);if(-1===r)return void e.debug("Error: Origin not allowed inside game container!");if(e.origin=e.allowedOrigins[r],t.data.type)switch(t.data.type){case"SDK_START_GAME":e.afterStartGame();break;case"SDK_PAUSE_GAME":e.afterPauseGame();break;case"SDK_START_GAME_FROM_ZERO":e.progress.score=0,e.progress.level=0,e.progress.continueScore=0,e.afterStartGameFromZero();break;case"SDK_CONTINUE_WITH_CURRENT_SCORE":e.progress.score=e.progress.continueScore,e.afterContinueWithCurrentScore(e.progress.score);break;default:e.debug('Error: `data.type` = "'+t.data.type+'" not found! Please check `readme.md` of data collector package!')}else e.debug("Error: `event.data.type` should be implemented!")}}),!1)},t.afterStartGameFromZero=function(){},t.afterContinueWithCurrentScore=function(e){},t.afterStartGame=function(){},t.afterPauseGame=function(){},t.debug=function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=window;s.sdkdebug&&console.log.apply(console,e(["DigitapGamePlayerSDK -> "+t],r))},t.gameObject=null,t.isLoaded=!1,t.origin=null,t.isDebugging=!1,t.allowedOrigins=["https://build.digitap.dev","https://wam.app","https://app.wam.app","https://wam.eu","http://localhost:63342","http://localhost:8080","http://localhost:3000"],t.progress={controller:"_digitapGame",type:"SDK_PLAYER_SCORE_UPDATE",score:0,level:0,state:null,continueScore:0},t}();if(void 0!==window.digitapSDK){var r=window.digitapSDK.q;t.processOldQueue(r)}window.digitapSDK=t.processQueue}})[607]();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW1lLXBsYXllci1zZGsvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vZ2FtZS1wbGF5ZXItc2RrL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJwcm9jZXNzUXVldWUiLCJEaWdpdGFwR2FtZVBsYXllclNESyIsImRlYnVnIiwiYXJncyIsImFwcGx5Iiwic2xpY2UiLCJwcm9jZXNzT2xkUXVldWUiLCJxdWV1ZSIsImZvckVhY2giLCJzZXRDYWxsYmFjayIsImZuIiwiY2FsbGJhY2siLCJ0aGlzIiwiaW5pdCIsImhhc1Njb3JlIiwiaGFzSGlnaFNjb3JlIiwidWlPcHRpb25zIiwiaXNMb2FkZWQiLCJ3aW5kb3ciLCJwYXJlbnQiLCJwb3N0TWVzc2FnZSIsImNvbnRyb2xsZXIiLCJ0eXBlIiwidWkiLCJyZWFkeSIsImxpc3RlbkdhbWVib3hFdmVudHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic2V0VGltZW91dCIsImNhbnZhc1N0eWxlIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiaHRtbFN0eWxlIiwic2V0UHJvZ3Jlc3MiLCJzdGF0ZSIsInNjb3JlIiwibGV2ZWwiLCJwcm9ncmVzcyIsImNvbnRpbnVlU2NvcmUiLCJzZW5kRGF0YSIsInNldExldmVsVXAiLCJzZXRQbGF5ZXJGYWlsZWQiLCJvcmlnaW4iLCJzZWxmIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZGF0YSIsIm9yaWdpbkluZGV4IiwiYWxsb3dlZE9yaWdpbnMiLCJpbmRleE9mIiwiYWZ0ZXJTdGFydEdhbWUiLCJhZnRlclBhdXNlR2FtZSIsImFmdGVyU3RhcnRHYW1lRnJvbVplcm8iLCJhZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZSIsIm1lc3NhZ2UiLCJwYXJlbnRXaW5kb3ciLCJzZGtkZWJ1ZyIsImNvbnNvbGUiLCJsb2ciLCJwYXJhbXMiLCJnYW1lT2JqZWN0IiwiaXNEZWJ1Z2dpbmciLCJkaWdpdGFwU0RLIiwi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RUFBTUMsS0FBS3hCLEtBQ1gseUVBS1JxQixFQUFLekMsTUFBTSx1REFJakIsSUFPVSxFQUFBa0QsdUJBQWQsYUFFYyxFQUFBQyw4QkFBZCxTQUE0Q2xCLEtBRTlCLEVBQUFlLGVBQWQsYUFFYyxFQUFBQyxlQUFkLGFBUWUsRUFBQWpELE1BQWYsU0FBcUJvRCxHLElBQWUsd0RBQ2xDLElBQU1DLEVBQW9CckMsT0FFdEJxQyxFQUFhQyxVQUNmQyxRQUFRQyxJQUFHLE1BQVhELFFBQU8sR0FBSywyQkFBNkJILEdBQVlLLEtBclIzQyxFQUFBQyxXQUFrQixLQUNqQixFQUFBM0MsVUFBb0IsRUFDcEIsRUFBQXlCLE9BQWlCLEtBQ2pCLEVBQUFtQixhQUF1QixFQUV2QixFQUFBYixlQUEyQixDQUN4Qyw0QkFDQSxrQkFDQSxzQkFDQSxpQkFDQSx5QkFDQSx3QkFDQSx5QkFHYSxFQUFBWCxTQUFxQixDQUNsQ2hCLFdBQVksZUFDWkMsS0FBTSwwQkFDTmEsTUFBTyxFQUNQQyxNQUFPLEVBQ1BGLE1BQU8sS0FDUEksY0FBZSxHQW1RbkIsRUF6UkEsR0E0UkEsUUFBd0MsSUFBdkJwQixPQUFRNEMsV0FBNEIsQ0FDbkQsSUFBSUMsRUFBaUI3QyxPQUFRNEMsV0FBV0UsRUFDeEMvRCxFQUFxQkssZ0JBQWdCeUQsR0FJakM3QyxPQUFRNEMsV0FBYTdELEVBQXFCRCxnQkN4UzVCIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidHlwZSBQcm9ncmVzcyA9IHtcbiAgY29udHJvbGxlcjogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG4gIHNjb3JlOiBudW1iZXI7XG4gIGxldmVsOiBudW1iZXI7XG4gIHN0YXRlOiBhbnk7XG4gIGNvbnRpbnVlU2NvcmU6IG51bWJlcjtcbn07XG5cbmNsYXNzIERpZ2l0YXBHYW1lUGxheWVyU0RLIHtcbiAgcHVibGljIHN0YXRpYyBnYW1lT2JqZWN0OiBhbnkgPSBudWxsO1xuICBwcml2YXRlIHN0YXRpYyBpc0xvYWRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHN0YXRpYyBvcmlnaW46IHN0cmluZyA9IG51bGw7XG4gIHByaXZhdGUgc3RhdGljIGlzRGVidWdnaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYWxsb3dlZE9yaWdpbnM6IHN0cmluZ1tdID0gW1xuICAgIFwiaHR0cHM6Ly9idWlsZC5kaWdpdGFwLmRldlwiLFxuICAgIFwiaHR0cHM6Ly93YW0uYXBwXCIsXG4gICAgXCJodHRwczovL2FwcC53YW0uYXBwXCIsXG4gICAgXCJodHRwczovL3dhbS5ldVwiLFxuICAgIFwiaHR0cDovL2xvY2FsaG9zdDo2MzM0MlwiLFxuICAgIFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwXCIsXG4gICAgXCJodHRwOi8vbG9jYWxob3N0OjMwMDBcIixcbiAgXTtcblxuICBwcml2YXRlIHN0YXRpYyBwcm9ncmVzczogUHJvZ3Jlc3MgPSB7XG4gICAgY29udHJvbGxlcjogXCJfZGlnaXRhcEdhbWVcIixcbiAgICB0eXBlOiBcIlNES19QTEFZRVJfU0NPUkVfVVBEQVRFXCIsXG4gICAgc2NvcmU6IDAsXG4gICAgbGV2ZWw6IDAsXG4gICAgc3RhdGU6IG51bGwsXG4gICAgY29udGludWVTY29yZTogMCxcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbCBhIG1ldGhvZCBmcm9tIHRoZSBjbGFzcyxcbiAgICogdGhyb3VnaCBhIHF1ZXVlLlxuICAgKiBcbiAgICogQHBhcmFtIGFyZ3MgYXJyYXlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcHJvY2Vzc1F1ZXVlKC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgRGlnaXRhcEdhbWVQbGF5ZXJTREsuZGVidWcoXCJQcm9jZXNzaW5nIFF1ZXVlIC0+XCIsIGFyZ3MpO1xuXG4gICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBEaWdpdGFwR2FtZVBsYXllclNES1tcbiAgICAgICAgYXJnc1swXSBhc1xuICAgICAgICAgIHwgXCJpbml0XCJcbiAgICAgICAgICB8IFwic2V0UHJvZ3Jlc3NcIlxuICAgICAgICAgIHwgXCJzZXRMZXZlbFVwXCJcbiAgICAgICAgICB8IFwic2V0UGxheWVyRmFpbGVkXCJcbiAgICAgICAgICB8IFwic2V0Q2FsbGJhY2tcIlxuICAgICAgXS5hcHBseShEaWdpdGFwR2FtZVBsYXllclNESywgYXJncy5zbGljZSgxKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgYSBjdXJyZW50IHF1ZXVlLlxuICAgKiBcbiAgICogQHBhcmFtIHF1ZXVlIGFycmF5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHByb2Nlc3NPbGRRdWV1ZShxdWV1ZTogW10pOiB2b2lkIHtcbiAgICBxdWV1ZS5mb3JFYWNoKChhcmdzOiBhbnkpID0+IHtcbiAgICAgIHRoaXMucHJvY2Vzc1F1ZXVlKC4uLmFyZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYSBjYWxsYmFjayBtZXRob2QuXG4gICAqIFxuICAgKiBAcGFyYW0gZm4gc3RyaW5nXG4gICAqIEBwYXJhbSBjYWxsYmFjayBmdW5jdGlvblxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzZXRDYWxsYmFjayhcbiAgICBmbjpcbiAgICAgIHwgXCJhZnRlclN0YXJ0R2FtZUZyb21aZXJvXCJcbiAgICAgIHwgXCJhZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZVwiXG4gICAgICB8IFwiYWZ0ZXJTdGFydEdhbWVcIlxuICAgICAgfCBcImFmdGVyUGF1c2VHYW1lXCIsXG4gICAgY2FsbGJhY2s6IGFueVxuICApOiB2b2lkIHtcbiAgICB0aGlzW2ZuXSA9IGNhbGxiYWNrO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXQgYSBuZXcgZ2FtZSBjb25uZWN0aW9uIHdpdGhcbiAgICogdGhlIHBhcmVudCBwbGF0Zm9ybS5cbiAgICpcbiAgICogQHBhcmFtIHVpT3B0aW9ucyBhcnJheVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBpbml0KFxuICAgIGhhc1Njb3JlOiBib29sZWFuID0gdHJ1ZSxcbiAgICBoYXNIaWdoU2NvcmU6IGJvb2xlYW4gPSB0cnVlXG4gICk6IHZvaWQge1xuICAgIHRoaXMuZGVidWcoXCJTREsgSW5pdGlhbGl6YXRpb25cIik7XG5cbiAgICAvLyBJbml0IHRoZSB1aU9wdGlvbnNcbiAgICBjb25zdCB1aU9wdGlvbnMgPSBbXCJzY29yZVwiLCBcImhpZ2hTY29yZVwiLCBoYXNTY29yZSwgaGFzSGlnaFNjb3JlXTtcblxuICAgIC8vIElmIFNESyBpcyBub3QgbG9hZGVkIHlldFxuICAgIGlmICghdGhpcy5pc0xvYWRlZCkge1xuICAgICAgLy8gU2VuZCB0aGUgaW5pdCBtZXNzYWdlXG4gICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKFxuICAgICAgICB7XG4gICAgICAgICAgY29udHJvbGxlcjogXCJfZGlnaXRhcEdhbWVcIixcbiAgICAgICAgICB0eXBlOiBcIlNES19TRVRUSU5HU1wiLFxuICAgICAgICAgIHVpOiB1aU9wdGlvbnMsXG4gICAgICAgICAgcmVhZHk6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIFwiKlwiXG4gICAgICApO1xuXG4gICAgICAvLyBXYXRjaCBmb3IgbWVzc2FnZXMgZnJvbSBHYW1lQm94XG4gICAgICB0aGlzLmxpc3RlbkdhbWVib3hFdmVudHMoKTtcblxuICAgICAgLy8gU2V0IHRoZSBjYW52YXMgZnVsbHdpZHRoICYgYmx1ZSBzY3JlZW4gZml4XG4gICAgICBjb25zdCBjYW52YXM6IEhUTUxDb2xsZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJjYW52YXNcIik7XG4gICAgICBjb25zdCBodG1sOiBIVE1MQ29sbGVjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaHRtbFwiKTtcbiAgICAgIFxuICAgICAgc2V0VGltZW91dChcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGxldCBjYW52YXNTdHlsZSA9IGNhbnZhc1swXS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICAgICAgICBjYW52YXNbMF0uc2V0QXR0cmlidXRlKFxuICAgICAgICAgICAgXCJzdHlsZVwiLFxuICAgICAgICAgICAgY2FudmFzU3R5bGUgKyBcIndpZHRoOiAxMDAlOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IHVzZXItc2VsZWN0OiBub25lOyAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOyAtbW96LXVzZXItc2VsZWN0OiBub25lO1wiXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGxldCBodG1sU3R5bGUgPSBodG1sWzBdLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgICAgICAgIGh0bWxbMF0uc2V0QXR0cmlidXRlKFxuICAgICAgICAgICAgXCJzdHlsZVwiLFxuICAgICAgICAgICAgKGh0bWxTdHlsZSA/IGh0bWxTdHlsZSA6IFwiXCIpICsgXCJ1c2VyLXNlbGVjdDogbm9uZTsgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcIlxuICAgICAgICAgICk7XG4gICAgICAgIH0sXG4gICAgICAgIDIwMDBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gU2V0IFNESyBhcyBsb2FkZWQgdG8gcHJldmVudCByZS1pbml0aWF0aW9uXG4gICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHByb2dyZXNzIG9mIGEgZ2FtZS5cbiAgICpcbiAgICogQHBhcmFtIHR5cGUgc3RyaW5nXG4gICAqIEBwYXJhbSBzdGF0ZSBzdHJpbmdcbiAgICogQHBhcmFtIHNjb3JlIG51bWJlclxuICAgKiBAcGFyYW0gbGV2ZWwgbnVtYmVyXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNldFByb2dyZXNzKHN0YXRlOiBzdHJpbmcsIHNjb3JlOiBudW1iZXIsIGxldmVsOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBTZXQgdGhlIGN1cnJlbnQgcHJvZ3Jlc3NcbiAgICB0aGlzLnByb2dyZXNzID0ge1xuICAgICAgdHlwZTogXCJTREtfUExBWUVSX1NDT1JFX1VQREFURVwiLFxuICAgICAgc3RhdGUsXG4gICAgICBzY29yZSxcbiAgICAgIGxldmVsLFxuICAgICAgY29udGludWVTY29yZTogc2NvcmUsXG4gICAgICBjb250cm9sbGVyOiBcIl9kaWdpdGFwR2FtZVwiLFxuICAgIH07XG5cbiAgICB0aGlzLnNlbmREYXRhKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBuZXcgbGV2ZWwgb2YgdGhlIGdhbWUuXG4gICAqXG4gICAqIEBwYXJhbSBsZXZlbCBudW1iZXJcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgc2V0TGV2ZWxVcChsZXZlbDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5wcm9ncmVzcy5sZXZlbCA9IGxldmVsO1xuICAgIHRoaXMucHJvZ3Jlc3MudHlwZSA9IFwiU0RLX1BMQVlFUl9MRVZFTF9VUFwiO1xuXG4gICAgdGhpcy5zZW5kRGF0YSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZ2FtZSBhcyBmYWlsZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZSBzdHJpbmdcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgc2V0UGxheWVyRmFpbGVkKHN0YXRlOiBzdHJpbmcgPSBcIkZBSUxcIik6IHZvaWQge1xuICAgIHRoaXMucHJvZ3Jlc3Muc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLnByb2dyZXNzLnNjb3JlID0gMDtcbiAgICB0aGlzLnByb2dyZXNzLnR5cGUgPSBcIlNES19QTEFZRVJfRkFJTEVEXCI7XG5cbiAgICB0aGlzLnNlbmREYXRhKCk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgZ2FtZSBkYXRhIHRvIHBhcmVudCBwbGF0Zm9ybS5cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIHNlbmREYXRhKCk6IHZvaWQge1xuICAgIC8vIFNlbmQgdGhlIG1lc3NhZ2UgdG8gR2FtZWJveC5cbiAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHRoaXMucHJvZ3Jlc3MsIHRoaXMub3JpZ2luKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBsaXN0ZW5pbmcgZm9yIG1lc3NhZ2VzXG4gICAqIGZyb20gdGhlIHBsYXRmb3JtLlxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgbGlzdGVuR2FtZWJveEV2ZW50cygpOiB2b2lkIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJtZXNzYWdlXCIsXG4gICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgc2VsZi5kZWJ1ZyhcbiAgICAgICAgICBcIkV2ZW50IFJlY2VpdmVkIC0+ICVvIC0+ICVvXCIsXG4gICAgICAgICAgZXZlbnQuZGF0YSxcbiAgICAgICAgICBldmVudC5vcmlnaW5cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgIGV2ZW50LmRhdGEuY29udHJvbGxlciAmJlxuICAgICAgICAgIGV2ZW50LmRhdGEuY29udHJvbGxlciA9PSBcIl9kaWdpdGFwQXBwXCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgbGV0IG9yaWdpbkluZGV4ID0gc2VsZi5hbGxvd2VkT3JpZ2lucy5pbmRleE9mKGV2ZW50Lm9yaWdpbik7XG5cbiAgICAgICAgICBpZiAob3JpZ2luSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICBzZWxmLmRlYnVnKFwiRXJyb3I6IE9yaWdpbiBub3QgYWxsb3dlZCBpbnNpZGUgZ2FtZSBjb250YWluZXIhXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLm9yaWdpbiA9IHNlbGYuYWxsb3dlZE9yaWdpbnNbb3JpZ2luSW5kZXhdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChldmVudC5kYXRhLnR5cGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuZGF0YS50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJTREtfU1RBUlRfR0FNRVwiOlxuICAgICAgICAgICAgICAgIHNlbGYuYWZ0ZXJTdGFydEdhbWUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIFwiU0RLX1BBVVNFX0dBTUVcIjpcbiAgICAgICAgICAgICAgICBzZWxmLmFmdGVyUGF1c2VHYW1lKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcIlNES19TVEFSVF9HQU1FX0ZST01fWkVST1wiOlxuICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3Muc2NvcmUgPSAwO1xuICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3MubGV2ZWwgPSAwO1xuICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3MuY29udGludWVTY29yZSA9IDA7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmFmdGVyU3RhcnRHYW1lRnJvbVplcm8oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIFwiU0RLX0NPTlRJTlVFX1dJVEhfQ1VSUkVOVF9TQ09SRVwiOlxuICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3Muc2NvcmUgPSBzZWxmLnByb2dyZXNzLmNvbnRpbnVlU2NvcmU7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmFmdGVyQ29udGludWVXaXRoQ3VycmVudFNjb3JlKHNlbGYucHJvZ3Jlc3Muc2NvcmUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgc2VsZi5kZWJ1ZyhcbiAgICAgICAgICAgICAgICAgICdFcnJvcjogYGRhdGEudHlwZWAgPSBcIicgK1xuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLnR5cGUgK1xuICAgICAgICAgICAgICAgICAgICAnXCIgbm90IGZvdW5kISBQbGVhc2UgY2hlY2sgYHJlYWRtZS5tZGAgb2YgZGF0YSBjb2xsZWN0b3IgcGFja2FnZSEnXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5kZWJ1ZyhcIkVycm9yOiBgZXZlbnQuZGF0YS50eXBlYCBzaG91bGQgYmUgaW1wbGVtZW50ZWQhXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbXB0eSBtZXRob2RzIGZvciBnYW1lIGRldmVsb3BlciB0byB1c2UuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGFmdGVyU3RhcnRHYW1lRnJvbVplcm8oKSB7fVxuXG4gIHB1YmxpYyBzdGF0aWMgYWZ0ZXJDb250aW51ZVdpdGhDdXJyZW50U2NvcmUoc2NvcmU6IG51bWJlcikge31cblxuICBwdWJsaWMgc3RhdGljIGFmdGVyU3RhcnRHYW1lKCkge31cblxuICBwdWJsaWMgc3RhdGljIGFmdGVyUGF1c2VHYW1lKCkge31cblxuICAvKipcbiAgICogSWYgdXNlciBpcyBkZWJ1Z2dpbmcsIHNob3cgc29tZSBjb25zb2xlIGxvZ3MuXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlIGFueVxuICAgKiBAcGFyYW0gcGFyYW1zIGFueVtdXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBkZWJ1ZyhtZXNzYWdlPzogYW55LCAuLi5wYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgY29uc3QgcGFyZW50V2luZG93OiBhbnkgPSB3aW5kb3c7XG5cbiAgICBpZiAocGFyZW50V2luZG93LnNka2RlYnVnKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkRpZ2l0YXBHYW1lUGxheWVyU0RLIC0+IFwiICsgbWVzc2FnZSwgLi4ucGFyYW1zKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gUmVhZCB0aGUgY3VycmVudCBxdWV1ZVxuaWYgKHR5cGVvZiAoPGFueT53aW5kb3cpLmRpZ2l0YXBTREsgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgbGV0IG9sZFF1ZXVlID0gKDxhbnk+d2luZG93KS5kaWdpdGFwU0RLLnE7XG4gIERpZ2l0YXBHYW1lUGxheWVyU0RLLnByb2Nlc3NPbGRRdWV1ZShvbGRRdWV1ZSk7XG59XG5cbi8vIFdhdGNoIHRoZSBxdWV1ZSB3aXRoIG5ldyBtZXRob2Rcbig8YW55PndpbmRvdykuZGlnaXRhcFNESyA9IERpZ2l0YXBHYW1lUGxheWVyU0RLLnByb2Nlc3NRdWV1ZTtcbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuX193ZWJwYWNrX21vZHVsZXNfX1s2MDddKCk7XG4iXSwic291cmNlUm9vdCI6IiJ9