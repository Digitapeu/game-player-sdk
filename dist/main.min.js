({607:function(){var e=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var a=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,n=i.length;s<n;s++,o++)a[o]=i[s];return a},t=function(){function t(){}return t.processQueue=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.debug("Processing Queue ->",e),"string"==typeof e[0]&&t[e[0]].apply(t,e.slice(1))},t.processOldQueue=function(e){var t=this;e.forEach((function(e){t.processQueue.apply(t,e)}))},t.setCallback=function(e,t){this[e]=t},t.init=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.debug("SDK Initialization");var r=["score","highScore",e,t];if(!this.isLoaded){window.parent.postMessage({controller:"_digitapGame",type:"SDK_SETTINGS",ui:r,ready:!0},"*"),this.listenGameboxEvents();var a=document.getElementsByTagName("canvas");setTimeout((function(){var e=a[0].getAttribute("style");a[0].setAttribute("style",e+"width: 100%; margin: 0; padding: 0;")}),2e3)}this.isLoaded=!0},t.setProgress=function(e,t,r){this.progress={type:"SDK_PLAYER_SCORE_UPDATE",state:e,score:t,level:r,continueScore:t,controller:"_digitapGame"},this.sendData()},t.setLevelUp=function(e){this.progress.level=e,this.progress.type="SDK_PLAYER_LEVEL_UP",this.sendData()},t.setPlayerFailed=function(e){void 0===e&&(e="FAIL"),this.progress.state=e,this.progress.score=0,this.progress.type="SDK_PLAYER_FAILED",this.sendData()},t.sendData=function(){window.parent.postMessage(this.progress,this.origin)},t.listenGameboxEvents=function(){var e=this;window.addEventListener("message",(function(t){if(e.debug("Event Received -> %o -> %o",t.data,t.origin),"object"==typeof t.data&&t.data.controller&&"_digitapApp"==t.data.controller){var r=e.allowedOrigins.indexOf(t.origin);if(-1===r)return void e.debug("Error: Origin not allowed inside game container!");if(e.origin=e.allowedOrigins[r],t.data.type)switch(t.data.type){case"SDK_START_GAME":e.afterStartGame();break;case"SDK_PAUSE_GAME":e.afterPauseGame();break;case"SDK_START_GAME_FROM_ZERO":e.progress.score=0,e.progress.level=0,e.progress.continueScore=0,e.afterStartGameFromZero();break;case"SDK_CONTINUE_WITH_CURRENT_SCORE":e.progress.score=e.progress.continueScore,e.afterContinueWithCurrentScore(e.progress.score);break;default:e.debug('Error: `data.type` = "'+t.data.type+'" not found! Please check `readme.md` of data collector package!')}else e.debug("Error: `event.data.type` should be implemented!")}}),!1)},t.afterStartGameFromZero=function(){},t.afterContinueWithCurrentScore=function(e){},t.afterStartGame=function(){},t.afterPauseGame=function(){},t.debug=function(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var o=window.parent;o.sdkdebug&&console.log.apply(console,e(["DigitapGamePlayerSDK -> "+t],r))},t.gameObject=null,t.isLoaded=!1,t.origin=null,t.isDebugging=!1,t.allowedOrigins=["https://build.digitap.dev","https://wam.app","https://app.wam.app","https://wam.eu","http://localhost:63342","http://localhost:8080","http://localhost:3000"],t.progress={controller:"_digitapGame",type:"SDK_PLAYER_SCORE_UPDATE",score:0,level:0,state:null,continueScore:0},t}();if(void 0!==window.digitapSDK){var r=window.digitapSDK.q;t.processOldQueue(r)}window.digitapSDK=t.processQueue}})[607]();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW1lLXBsYXllci1zZGsvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vZ2FtZS1wbGF5ZXItc2RrL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJwcm9jZXNzUXVldWUiLCJEaWdpdGFwR2FtZVBsYXllclNESyIsImRlYnVnIiwiYXJncyIsImFwcGx5Iiwic2xpY2UiLCJwcm9jZXNzT2xkUXVldWUiLCJxdWV1ZSIsImZvckVhY2giLCJzZXRDYWxsYmFjayIsImZuIiwiY2FsbGJhY2siLCJ0aGlzIiwiaW5pdCIsImhhc1Njb3JlIiwiaGFzSGlnaFNjb3JlIiwidWlPcHRpb25zIiwiaXNMb2FkZWQiLCJ3aW5kb3ciLCJwYXJlbnQiLCJwb3N0TWVzc2FnZSIsImNvbnRyb2xsZXIiLCJ0eXBlIiwidWkiLCJyZWFkeSIsImxpc3RlbkdhbWVib3hFdmVudHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic2V0VGltZW91dCIsImNhbnZhc1N0eWxlIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwic2V0UHJvZ3Jlc3MiLCJzdGF0ZSIsInNjb3JlIiwibGV2ZWwiLCJwcm9ncmVzcyIsImNvbnRpbnVlU2NvcmUiLCJzZW5kRGF0YSIsInNldExldmVsVXAiLCJzZXRQbGF5ZXJGYWlsZWQiLCJvcmlnaW4iLCJzZWxmIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZGF0YSIsIm9yaWdpbkluZGV4IiwiYWxsb3dlZE9yaWdpbnMiLCJpbmRleE9mIiwiYWZ0ZXJTdGFydEdhbWUiLCJhZnRlclBhdXNlR2FtZSIsImFmdGVyU3RhcnRHYW1lRnJvbVplcm8iLCJhZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZSIsIm1lc3NhZ2UiLCJwYXJlbnRXaW5kb3ciLCJzZGtkZWJ1ZyIsImNvbnNvbGUiLCJsb2ciLCJwYXJhbXMiLCJnYW1lT2JqZWN0IiwiaXNEZWJ1Z2dpbmciLCJkaWdpdGFwU0RLIiwib2xkUXVldWUiLCJx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QUFDLGVBQWQsYUFRZSxFQUFBaEQsTUFBZixTQUFxQm1ELEcsSUFBZSx3REFDbEMsSUFBTUMsRUFBb0JwQyxPQUFPQyxPQUU3Qm1DLEVBQWFDLFVBQ2ZDLFFBQVFDLElBQUcsTUFBWEQsUUFBTyxHQUFLLDJCQUE2QkgsR0FBWUssS0E5UTNDLEVBQUFDLFdBQWtCLEtBQ2pCLEVBQUExQyxVQUFvQixFQUNwQixFQUFBd0IsT0FBaUIsS0FDakIsRUFBQW1CLGFBQXVCLEVBRXZCLEVBQUFiLGVBQTJCLENBQ3hDLDRCQUNBLGtCQUNBLHNCQUNBLGlCQUNBLHlCQUNBLHdCQUNBLHlCQUdhLEVBQUFYLFNBQXFCLENBQ2xDZixXQUFZLGVBQ1pDLEtBQU0sMEJBQ05ZLE1BQU8sRUFDUEMsTUFBTyxFQUNQRixNQUFPLEtBQ1BJLGNBQWUsR0E0UG5CLEVBbFJBLEdBcVJBLFFBQXdDLElBQXZCbkIsT0FBUTJDLFdBQTRCLENBQ25ELElBQUlDLEVBQWlCNUMsT0FBUTJDLFdBQVdFLEVBQ3hDOUQsRUFBcUJLLGdCQUFnQndELEdBSWpDNUMsT0FBUTJDLFdBQWE1RCxFQUFxQkQsZ0JDalM1QiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInR5cGUgUHJvZ3Jlc3MgPSB7XG4gIGNvbnRyb2xsZXI6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBzY29yZTogbnVtYmVyO1xuICBsZXZlbDogbnVtYmVyO1xuICBzdGF0ZTogYW55O1xuICBjb250aW51ZVNjb3JlOiBudW1iZXI7XG59O1xuXG5jbGFzcyBEaWdpdGFwR2FtZVBsYXllclNESyB7XG4gIHB1YmxpYyBzdGF0aWMgZ2FtZU9iamVjdDogYW55ID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0aWMgaXNMb2FkZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBzdGF0aWMgb3JpZ2luOiBzdHJpbmcgPSBudWxsO1xuICBwcml2YXRlIHN0YXRpYyBpc0RlYnVnZ2luZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgc3RhdGljIGFsbG93ZWRPcmlnaW5zOiBzdHJpbmdbXSA9IFtcbiAgICBcImh0dHBzOi8vYnVpbGQuZGlnaXRhcC5kZXZcIixcbiAgICBcImh0dHBzOi8vd2FtLmFwcFwiLFxuICAgIFwiaHR0cHM6Ly9hcHAud2FtLmFwcFwiLFxuICAgIFwiaHR0cHM6Ly93YW0uZXVcIixcbiAgICBcImh0dHA6Ly9sb2NhbGhvc3Q6NjMzNDJcIixcbiAgICBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MFwiLFxuICAgIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCIsXG4gIF07XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcHJvZ3Jlc3M6IFByb2dyZXNzID0ge1xuICAgIGNvbnRyb2xsZXI6IFwiX2RpZ2l0YXBHYW1lXCIsXG4gICAgdHlwZTogXCJTREtfUExBWUVSX1NDT1JFX1VQREFURVwiLFxuICAgIHNjb3JlOiAwLFxuICAgIGxldmVsOiAwLFxuICAgIHN0YXRlOiBudWxsLFxuICAgIGNvbnRpbnVlU2NvcmU6IDAsXG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGwgYSBtZXRob2QgZnJvbSB0aGUgY2xhc3MsXG4gICAqIHRocm91Z2ggYSBxdWV1ZS5cbiAgICogXG4gICAqIEBwYXJhbSBhcmdzIGFycmF5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHByb2Nlc3NRdWV1ZSguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIERpZ2l0YXBHYW1lUGxheWVyU0RLLmRlYnVnKFwiUHJvY2Vzc2luZyBRdWV1ZSAtPlwiLCBhcmdzKTtcblxuICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgRGlnaXRhcEdhbWVQbGF5ZXJTREtbXG4gICAgICAgIGFyZ3NbMF0gYXNcbiAgICAgICAgICB8IFwiaW5pdFwiXG4gICAgICAgICAgfCBcInNldFByb2dyZXNzXCJcbiAgICAgICAgICB8IFwic2V0TGV2ZWxVcFwiXG4gICAgICAgICAgfCBcInNldFBsYXllckZhaWxlZFwiXG4gICAgICAgICAgfCBcInNldENhbGxiYWNrXCJcbiAgICAgIF0uYXBwbHkoRGlnaXRhcEdhbWVQbGF5ZXJTREssIGFyZ3Muc2xpY2UoMSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIGEgY3VycmVudCBxdWV1ZS5cbiAgICogXG4gICAqIEBwYXJhbSBxdWV1ZSBhcnJheVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBwcm9jZXNzT2xkUXVldWUocXVldWU6IFtdKTogdm9pZCB7XG4gICAgcXVldWUuZm9yRWFjaCgoYXJnczogYW55KSA9PiB7XG4gICAgICB0aGlzLnByb2Nlc3NRdWV1ZSguLi5hcmdzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGEgY2FsbGJhY2sgbWV0aG9kLlxuICAgKiBcbiAgICogQHBhcmFtIGZuIHN0cmluZ1xuICAgKiBAcGFyYW0gY2FsbGJhY2sgZnVuY3Rpb25cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgc2V0Q2FsbGJhY2soXG4gICAgZm46XG4gICAgICB8IFwiYWZ0ZXJTdGFydEdhbWVGcm9tWmVyb1wiXG4gICAgICB8IFwiYWZ0ZXJDb250aW51ZVdpdGhDdXJyZW50U2NvcmVcIlxuICAgICAgfCBcImFmdGVyU3RhcnRHYW1lXCJcbiAgICAgIHwgXCJhZnRlclBhdXNlR2FtZVwiLFxuICAgIGNhbGxiYWNrOiBhbnlcbiAgKTogdm9pZCB7XG4gICAgdGhpc1tmbl0gPSBjYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0IGEgbmV3IGdhbWUgY29ubmVjdGlvbiB3aXRoXG4gICAqIHRoZSBwYXJlbnQgcGxhdGZvcm0uXG4gICAqXG4gICAqIEBwYXJhbSB1aU9wdGlvbnMgYXJyYXlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgaW5pdChcbiAgICBoYXNTY29yZTogYm9vbGVhbiA9IHRydWUsXG4gICAgaGFzSGlnaFNjb3JlOiBib29sZWFuID0gdHJ1ZVxuICApOiB2b2lkIHtcbiAgICB0aGlzLmRlYnVnKFwiU0RLIEluaXRpYWxpemF0aW9uXCIpO1xuXG4gICAgLy8gSW5pdCB0aGUgdWlPcHRpb25zXG4gICAgY29uc3QgdWlPcHRpb25zID0gW1wic2NvcmVcIiwgXCJoaWdoU2NvcmVcIiwgaGFzU2NvcmUsIGhhc0hpZ2hTY29yZV07XG5cbiAgICAvLyBJZiBTREsgaXMgbm90IGxvYWRlZCB5ZXRcbiAgICBpZiAoIXRoaXMuaXNMb2FkZWQpIHtcbiAgICAgIC8vIFNlbmQgdGhlIGluaXQgbWVzc2FnZVxuICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZShcbiAgICAgICAge1xuICAgICAgICAgIGNvbnRyb2xsZXI6IFwiX2RpZ2l0YXBHYW1lXCIsXG4gICAgICAgICAgdHlwZTogXCJTREtfU0VUVElOR1NcIixcbiAgICAgICAgICB1aTogdWlPcHRpb25zLFxuICAgICAgICAgIHJlYWR5OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBcIipcIlxuICAgICAgKTtcblxuICAgICAgLy8gV2F0Y2ggZm9yIG1lc3NhZ2VzIGZyb20gR2FtZUJveFxuICAgICAgdGhpcy5saXN0ZW5HYW1lYm94RXZlbnRzKCk7XG5cbiAgICAgIC8vIFNldCB0aGUgY2FudmFzIGZ1bGx3aWR0aFxuICAgICAgY29uc3QgY2FudmFzOiBIVE1MQ29sbGVjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiY2FudmFzXCIpO1xuICAgICAgXG4gICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgbGV0IGNhbnZhc1N0eWxlID0gY2FudmFzWzBdLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgICAgICAgIGNhbnZhc1swXS5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICBcInN0eWxlXCIsXG4gICAgICAgICAgICBjYW52YXNTdHlsZSArIFwid2lkdGg6IDEwMCU7IG1hcmdpbjogMDsgcGFkZGluZzogMDtcIlxuICAgICAgICAgICk7XG4gICAgICAgIH0sXG4gICAgICAgIDIwMDBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gU2V0IFNESyBhcyBsb2FkZWQgdG8gcHJldmVudCByZS1pbml0aWF0aW9uXG4gICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHByb2dyZXNzIG9mIGEgZ2FtZS5cbiAgICpcbiAgICogQHBhcmFtIHR5cGUgc3RyaW5nXG4gICAqIEBwYXJhbSBzdGF0ZSBzdHJpbmdcbiAgICogQHBhcmFtIHNjb3JlIG51bWJlclxuICAgKiBAcGFyYW0gbGV2ZWwgbnVtYmVyXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNldFByb2dyZXNzKHN0YXRlOiBzdHJpbmcsIHNjb3JlOiBudW1iZXIsIGxldmVsOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBTZXQgdGhlIGN1cnJlbnQgcHJvZ3Jlc3NcbiAgICB0aGlzLnByb2dyZXNzID0ge1xuICAgICAgdHlwZTogXCJTREtfUExBWUVSX1NDT1JFX1VQREFURVwiLFxuICAgICAgc3RhdGUsXG4gICAgICBzY29yZSxcbiAgICAgIGxldmVsLFxuICAgICAgY29udGludWVTY29yZTogc2NvcmUsXG4gICAgICBjb250cm9sbGVyOiBcIl9kaWdpdGFwR2FtZVwiLFxuICAgIH07XG5cbiAgICB0aGlzLnNlbmREYXRhKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBuZXcgbGV2ZWwgb2YgdGhlIGdhbWUuXG4gICAqXG4gICAqIEBwYXJhbSBsZXZlbCBudW1iZXJcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgc2V0TGV2ZWxVcChsZXZlbDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5wcm9ncmVzcy5sZXZlbCA9IGxldmVsO1xuICAgIHRoaXMucHJvZ3Jlc3MudHlwZSA9IFwiU0RLX1BMQVlFUl9MRVZFTF9VUFwiO1xuXG4gICAgdGhpcy5zZW5kRGF0YSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZ2FtZSBhcyBmYWlsZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZSBzdHJpbmdcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgc2V0UGxheWVyRmFpbGVkKHN0YXRlOiBzdHJpbmcgPSBcIkZBSUxcIik6IHZvaWQge1xuICAgIHRoaXMucHJvZ3Jlc3Muc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLnByb2dyZXNzLnNjb3JlID0gMDtcbiAgICB0aGlzLnByb2dyZXNzLnR5cGUgPSBcIlNES19QTEFZRVJfRkFJTEVEXCI7XG5cbiAgICB0aGlzLnNlbmREYXRhKCk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgZ2FtZSBkYXRhIHRvIHBhcmVudCBwbGF0Zm9ybS5cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIHNlbmREYXRhKCk6IHZvaWQge1xuICAgIC8vIFNlbmQgdGhlIG1lc3NhZ2UgdG8gR2FtZWJveC5cbiAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHRoaXMucHJvZ3Jlc3MsIHRoaXMub3JpZ2luKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBsaXN0ZW5pbmcgZm9yIG1lc3NhZ2VzXG4gICAqIGZyb20gdGhlIHBsYXRmb3JtLlxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgbGlzdGVuR2FtZWJveEV2ZW50cygpOiB2b2lkIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJtZXNzYWdlXCIsXG4gICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgc2VsZi5kZWJ1ZyhcbiAgICAgICAgICBcIkV2ZW50IFJlY2VpdmVkIC0+ICVvIC0+ICVvXCIsXG4gICAgICAgICAgZXZlbnQuZGF0YSxcbiAgICAgICAgICBldmVudC5vcmlnaW5cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgIGV2ZW50LmRhdGEuY29udHJvbGxlciAmJlxuICAgICAgICAgIGV2ZW50LmRhdGEuY29udHJvbGxlciA9PSBcIl9kaWdpdGFwQXBwXCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgbGV0IG9yaWdpbkluZGV4ID0gc2VsZi5hbGxvd2VkT3JpZ2lucy5pbmRleE9mKGV2ZW50Lm9yaWdpbik7XG5cbiAgICAgICAgICBpZiAob3JpZ2luSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICBzZWxmLmRlYnVnKFwiRXJyb3I6IE9yaWdpbiBub3QgYWxsb3dlZCBpbnNpZGUgZ2FtZSBjb250YWluZXIhXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLm9yaWdpbiA9IHNlbGYuYWxsb3dlZE9yaWdpbnNbb3JpZ2luSW5kZXhdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChldmVudC5kYXRhLnR5cGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuZGF0YS50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJTREtfU1RBUlRfR0FNRVwiOlxuICAgICAgICAgICAgICAgIHNlbGYuYWZ0ZXJTdGFydEdhbWUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIFwiU0RLX1BBVVNFX0dBTUVcIjpcbiAgICAgICAgICAgICAgICBzZWxmLmFmdGVyUGF1c2VHYW1lKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcIlNES19TVEFSVF9HQU1FX0ZST01fWkVST1wiOlxuICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3Muc2NvcmUgPSAwO1xuICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3MubGV2ZWwgPSAwO1xuICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3MuY29udGludWVTY29yZSA9IDA7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmFmdGVyU3RhcnRHYW1lRnJvbVplcm8oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIFwiU0RLX0NPTlRJTlVFX1dJVEhfQ1VSUkVOVF9TQ09SRVwiOlxuICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3Muc2NvcmUgPSBzZWxmLnByb2dyZXNzLmNvbnRpbnVlU2NvcmU7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmFmdGVyQ29udGludWVXaXRoQ3VycmVudFNjb3JlKHNlbGYucHJvZ3Jlc3Muc2NvcmUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgc2VsZi5kZWJ1ZyhcbiAgICAgICAgICAgICAgICAgICdFcnJvcjogYGRhdGEudHlwZWAgPSBcIicgK1xuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLnR5cGUgK1xuICAgICAgICAgICAgICAgICAgICAnXCIgbm90IGZvdW5kISBQbGVhc2UgY2hlY2sgYHJlYWRtZS5tZGAgb2YgZGF0YSBjb2xsZWN0b3IgcGFja2FnZSEnXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5kZWJ1ZyhcIkVycm9yOiBgZXZlbnQuZGF0YS50eXBlYCBzaG91bGQgYmUgaW1wbGVtZW50ZWQhXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbXB0eSBtZXRob2RzIGZvciBnYW1lIGRldmVsb3BlciB0byB1c2UuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGFmdGVyU3RhcnRHYW1lRnJvbVplcm8oKSB7fVxuXG4gIHB1YmxpYyBzdGF0aWMgYWZ0ZXJDb250aW51ZVdpdGhDdXJyZW50U2NvcmUoc2NvcmU6IG51bWJlcikge31cblxuICBwdWJsaWMgc3RhdGljIGFmdGVyU3RhcnRHYW1lKCkge31cblxuICBwdWJsaWMgc3RhdGljIGFmdGVyUGF1c2VHYW1lKCkge31cblxuICAvKipcbiAgICogSWYgdXNlciBpcyBkZWJ1Z2dpbmcsIHNob3cgc29tZSBjb25zb2xlIGxvZ3MuXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlIGFueVxuICAgKiBAcGFyYW0gcGFyYW1zIGFueVtdXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBkZWJ1ZyhtZXNzYWdlPzogYW55LCAuLi5wYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgY29uc3QgcGFyZW50V2luZG93OiBhbnkgPSB3aW5kb3cucGFyZW50O1xuICAgIFxuICAgIGlmIChwYXJlbnRXaW5kb3cuc2RrZGVidWcpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRGlnaXRhcEdhbWVQbGF5ZXJTREsgLT4gXCIgKyBtZXNzYWdlLCAuLi5wYXJhbXMpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBSZWFkIHRoZSBjdXJyZW50IHF1ZXVlXG5pZiAodHlwZW9mICg8YW55PndpbmRvdykuZGlnaXRhcFNESyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBsZXQgb2xkUXVldWUgPSAoPGFueT53aW5kb3cpLmRpZ2l0YXBTREsucTtcbiAgRGlnaXRhcEdhbWVQbGF5ZXJTREsucHJvY2Vzc09sZFF1ZXVlKG9sZFF1ZXVlKTtcbn1cblxuLy8gV2F0Y2ggdGhlIHF1ZXVlIHdpdGggbmV3IG1ldGhvZFxuKDxhbnk+d2luZG93KS5kaWdpdGFwU0RLID0gRGlnaXRhcEdhbWVQbGF5ZXJTREsucHJvY2Vzc1F1ZXVlO1xuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfbW9kdWxlc19fWzYwN10oKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=