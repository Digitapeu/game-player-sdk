({607:function(){var e=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}))},t=this&&this.__generator||function(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},n=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,i=o.length;s<i;s++,a++)r[a]=o[s];return r},r=function(){function r(){}return r.processQueue=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.debug("Processing Queue ->",e),"string"==typeof e[0]&&r[e[0]].apply(r,e.slice(1))},r.processOldQueue=function(e){var t=this;e.forEach((function(e){t.processQueue.apply(t,e)}))},r.setCallback=function(e,t){this[e]=t},r.init=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.debug("SDK Initialization");var n=["score","highScore",e,t];if(!this.isLoaded){window.parent.postMessage({controller:"_digitapGame",type:"SDK_SETTINGS",ui:n,ready:!0},"*"),this.listenGameboxEvents(),this.listenStreamrEvents();var r=document.getElementsByTagName("canvas"),a=document.getElementsByTagName("html");setTimeout((function(){var e=r[0].getAttribute("style");r[0].setAttribute("style",e+"width: 100%; margin: 0; padding: 0; user-select: none; -webkit-user-select: none; -moz-user-select: none;");var t=a[0].getAttribute("style");a[0].setAttribute("style",(t||"")+"user-select: none; -webkit-user-select: none; -moz-user-select: none;")}),2e3)}this.isLoaded=!0},r.setProgress=function(e,t,n){this.progress={type:"SDK_PLAYER_SCORE_UPDATE",state:e,score:t,level:n,continueScore:t,controller:"_digitapGame"},this.sendData()},r.setLevelUp=function(e){this.progress.level=e,this.progress.type="SDK_PLAYER_LEVEL_UP",this.sendData()},r.setPlayerFailed=function(e){void 0===e&&(e="FAIL"),this.progress.state=e,this.progress.score=0,this.progress.type="SDK_PLAYER_FAILED",this.sendData()},r.sendData=function(){window.parent.postMessage(this.progress,this.origin)},r.listenGameboxEvents=function(){var e=this;window.addEventListener("message",(function(t){if(e.debug("Event Received -> %o -> %o",t.data,t.origin),"object"==typeof t.data&&t.data.controller&&"_digitapApp"==t.data.controller){var n=e.allowedOrigins.indexOf(t.origin);if(-1===n)return void e.debug("Error: Origin not allowed inside game container!");if(e.origin=e.allowedOrigins[n],t.data.type)switch(t.data.type){case"SDK_START_GAME":e.afterStartGame();break;case"SDK_PAUSE_GAME":e.afterPauseGame();break;case"SDK_START_GAME_FROM_ZERO":e.progress.score=0,e.progress.level=0,e.progress.continueScore=0,e.afterStartGameFromZero();break;case"SDK_CONTINUE_WITH_CURRENT_SCORE":e.progress.score=e.progress.continueScore,e.afterContinueWithCurrentScore(e.progress.score,e.progress.level);break;default:e.debug('Error: `data.type` = "'+t.data.type+'" not found! Please check `readme.md` of data collector package!')}else e.debug("Error: `event.data.type` should be implemented!")}}),!1)},r.listenStreamrEvents=function(){var n=this,r=null,a=null,o=null,s=null,i=null,c=!1,l=!1,u=this;u.debug("Init Streamr v1.0.2"),window.addEventListener("message",(function(d){return e(n,void 0,void 0,(function(){var n,p,g,f,h,v,m,_,E,S,y,b,w,C,D,L,T,R,A,k,O,G,P=this;return t(this,(function(K){switch(K.label){case 0:if(K.trys.push([0,5,,6]),u.debug("Streamr Event received",d.data),!d.data||"object"!=typeof d.data)return[2];if(n=d.data,p=n.controller,g=n.type,f=n.action,h=n.offer,v=n.tournament_id,m=n.username,u.debug("Streamr Event details: ",p,g,f,h,v,m),"_digitapApp"!==p&&"webrtc"!==g)return[2];if(c||(r=document.querySelector("canvas"),a=r.captureStream(30),o=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),s=o.createDataChannel("streamr-"+v+"-"+m,{negotiated:!0,id:0})),"close"===f){for(_=0,E=o.getSenders();_<E.length;_++)S=E[_],o.removeTrack(S);return r=null,a=null,s.send(JSON.stringify({type:"streamr",action:"close"})),o.close(),o=null,s=null,i=null,c=!1,l=!1,[2]}if("init"!==f)return[3,4];for(y=0,b=a.getTracks();y<b.length;y++)w=b[y],o.addTrack(w,a);return C=function(e){switch(console.log("__WEBRTC.onConnectionStateChange__",o.connectionState),o.connectionState){case"connected":c=!0,d.source.postMessage({type:"streamr",action:"connected"},d.origin);break;case"disconnected":for(var t=0,n=o.getSenders();t<n.length;t++){var l=n[t];o.removeTrack(l)}r=null,a=null,d.source.postMessage({type:"streamr",action:"disconnected"},d.origin),s.close(),o.close(),o.removeEventListener("connectionstatechange",C),o.removeEventListener("iceconnectionstatechange",D),o.removeEventListener("icecandidate",L),o.removeEventListener("onnegotiationneeded",R),o.removeEventListener("onsignalingstatechange",A),s.removeEventListener("message",T),o=null,s=null,i=null,c=!1}},D=function(e){switch(console.log("__WEBRTC.onICEConnectionStateChange__",o.iceConnectionState),o.iceConnectionState){case"connected":break;case"disconnected":case"failed":o.restartIce()}},L=function(e){try{u.debug("__WEBRTC.onICECandidate__",e.candidate),e.candidate?i=e.candidate:(u.debug("__WEBRTC.localDescription__",o.localDescription),d.source.postMessage({type:"streamr",action:"answer",offer:window.btoa(JSON.stringify(o.localDescription))},d.origin))}catch(e){console.error("__WEBRTC.onICECandidate__",e.message)}},T=function(n){return e(P,void 0,void 0,(function(){var e,r;return t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),n.data?(e=JSON.parse(n.data)).iceCandidate?[4,o.addIceCandidate(e.iceCandidate)]:[3,2]:[2];case 1:t.sent(),s.send(JSON.stringify({iceCandidate:i})),t.label=2;case 2:return[3,4];case 3:return r=t.sent(),console.error("__WEBRTC.onMessage__",r.message),[3,4];case 4:return[2]}}))}))},R=function(n){return e(P,void 0,void 0,(function(){var e,n,r;return t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),l?[2]:[4,o.setRemoteDescription(JSON.parse(h))];case 1:return t.sent(),n=(e=o).setLocalDescription,[4,o.createAnswer()];case 2:return[4,n.apply(e,[t.sent()])];case 3:return t.sent(),[3,5];case 4:return r=t.sent(),console.error("__WEBRTC.onNegotiationNeeded",r.message),[3,5];case 5:return[2]}}))}))},A=function(e){return l="stable"!==o.signalingState},o.addEventListener("connectionstatechange",C),o.addEventListener("iceconnectionstatechange",D),o.addEventListener("icecandidate",L),o.addEventListener("onnegotiationneeded",R),o.addEventListener("onsignalingstatechange",A),s.addEventListener("message",T),[4,o.setRemoteDescription(JSON.parse(h))];case 1:return K.sent(),O=(k=o).setLocalDescription,[4,o.createAnswer()];case 2:return[4,O.apply(k,[K.sent()])];case 3:K.sent(),K.label=4;case 4:return[3,6];case 5:return G=K.sent(),console.error("__WEBRTC__",G.message),[3,6];case 6:return[2]}}))}))}))},r.afterStartGameFromZero=function(){},r.afterContinueWithCurrentScore=function(e,t){},r.afterStartGame=function(){},r.afterPauseGame=function(){},r.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var a=window;a.sdkdebug&&console.log.apply(console,n(["DigitapGamePlayerSDK -> "+e],t))},r.gameObject=null,r.isLoaded=!1,r.origin=null,r.isDebugging=!1,r.allowedOrigins=["https://build.digitap.dev","https://wam.app","https://app.wam.app","https://wam.eu","https://play.wam.app","https://stage.wam.app","http://localhost:63342","http://localhost:8080","http://localhost:3000","http://localhost:3001","https://localhost:3001","http://127.0.0.1:3001","https://127.0.0.1:3001"],r.progress={controller:"_digitapGame",type:"SDK_PLAYER_SCORE_UPDATE",score:0,level:0,state:null,continueScore:0},r}();if(void 0!==window.digitapSDK){var a=window.digitapSDK.q;r.processOldQueue(a)}window.digitapSDK=r.processQueue}})[607]();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW1lLXBsYXllci1zZGsvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vZ2FtZS1wbGF5ZXItc2RrL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJwcm9jZXNzUXVldWUiLCJEaWdpdGFwR2FtZVBsYXllclNESyIsImRlYnVnIiwiYXJncyIsImFwcGx5Iiwic2xpY2UiLCJwcm9jZXNzT2xkUXVldWUiLCJxdWV1ZSIsImZvckVhY2giLCJzZXRDYWxsYmFjayIsImZuIiwiY2FsbGJhY2siLCJ0aGlzIiwiaW5pdCIsImhhc1Njb3JlIiwiaGFzSGlnaFNjb3JlIiwidWlPcHRpb25zIiwiaXNMb2FkZWQiLCJ3aW5kb3ciLCJwYXJlbnQiLCJwb3N0TWVzc2FnZSIsImNvbnRyb2xsZXIiLCJ0eXBlIiwidWkiLCJyZWFkeSIsImxpc3RlbkdhbWVib3hFdmVudHMiLCJsaXN0ZW5TdHJlYW1yRXZlbnRzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInNldFRpbWVvdXQiLCJjYW52YXNTdHlsZSIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImh0bWxTdHlsZSIsInNldFByb2dyZXNzIiwic3RhdGUiLCJzY29yZSIsImxldmVsIiwicHJvZ3Jlc3MiLCJjb250aW51ZVNjb3JlIiwic2VuZERhdGEiLCJzZXRMZXZlbFVwIiwic2V0UGxheWVyRmFpbGVkIiwib3JpZ2luIiwic2VsZiIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImRhdGEiLCJvcmlnaW5JbmRleCIsImFsbG93ZWRPcmlnaW5zIiwiaW5kZXhPZiIsImFmdGVyU3RhcnRHYW1lIiwiYWZ0ZXJQYXVzZUdhbWUiLCJhZnRlclN0YXJ0R2FtZUZyb21aZXJvIiwiYWZ0ZXJDb250aW51ZVdpdGhDdXJyZW50U2NvcmUiLCJjYW52YXMiLCJzdHJlYW0iLCJjb25uZWN0aW9uIiwiY2hhbm5lbCIsImljZUNhbmRpZGF0ZSIsImNvbm5lY3RlZCIsImlzTmVnb3RpYXRpb25OZWVkZWQiLCJhY3Rpb24iLCJvZmZlciIsInRvdXJuYW1lbnRfaWQiLCJ1c2VybmFtZSIsInF1ZXJ5U2VsZWN0b3IiLCJjYXB0dXJlU3RyZWFtIiwiUlRDUGVlckNvbm5lY3Rpb24iLCJpY2VTZXJ2ZXJzIiwidXJscyIsImNyZWF0ZURhdGFDaGFubmVsIiwibmVnb3RpYXRlZCIsImlkIiwiZ2V0U2VuZGVycyIsInNlbmRlciIsInJlbW92ZVRyYWNrIiwic2VuZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJjbG9zZSIsImdldFRyYWNrcyIsInRyYWNrIiwiYWRkVHJhY2siLCJlIiwiY29uc29sZSIsImxvZyIsImNvbm5lY3Rpb25TdGF0ZSIsInNvdXJjZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpY2VDb25uZWN0aW9uU3RhdGUiLCJyZXN0YXJ0SWNlIiwiY2FuZGlkYXRlIiwibG9jYWxEZXNjcmlwdGlvbiIsImJ0b2EiLCJlcnIiLCJlcnJvciIsIm1lc3NhZ2UiLCJwYXJzZSIsImFkZEljZUNhbmRpZGF0ZSIsInNldFJlbW90ZURlc2NyaXB0aW9uIiwic2V0TG9jYWxEZXNjcmlwdGlvbiIsImNyZWF0ZUFuc3dlciIsInNpZ25hbGluZ1N0YXRlIiwicGFyZW50V2luZG93Iiwic2RrZGVidWciLCJwYXJhbXMiLCJnYW1lT2JqZWN0IiwiaXNEZWJ1Z2dpbmciLCJkaWdpdGFwU0RLIiwib2xkUXVldWUiLCJxIl0sIm1hcHBpbmdzIjoibW1EQWFBLDJCQW1nQkEsT0E5ZGdCLEVBQUFBLGFBQWQsVyxJQUEyQixzREFDekJDLEVBQXFCQyxNQUFNLHNCQUF1QkMsR0FFM0IsaUJBQVpBLEVBQUssSUFDZEYsRUFDRUUsRUFBSyxJQU1MQyxNQUFNSCxFQUFzQkUsRUFBS0UsTUFBTSxLQVMvQixFQUFBQyxnQkFBZCxTQUE4QkMsR0FBOUIsV0FDRUEsRUFBTUMsU0FBUSxTQUFDTCxHQUNiLEVBQUtILGFBQVksTUFBakIsRUFBcUJHLE9BVVgsRUFBQU0sWUFBZCxTQUNFQyxFQUtBQyxHQUVBQyxLQUFLRixHQUFNQyxH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QUssMkJBQTZCWSxHQUFZUyxLQS9mM0MsRUFBQUMsV0FBa0IsS0FDakIsRUFBQTFGLFVBQW9CLEVBQ3BCLEVBQUEwQixPQUFpQixLQUNqQixFQUFBaUUsYUFBdUIsRUFFdkIsRUFBQTNELGVBQTJCLENBQ3hDLDRCQUNBLGtCQUNBLHNCQUNBLGlCQUNBLHVCQUNBLHdCQUNBLHlCQUNBLHdCQUNBLHdCQUNBLHdCQUNBLHlCQUNBLHdCQUNBLDBCQUdhLEVBQUFYLFNBQXFCLENBQ2xDakIsV0FBWSxlQUNaQyxLQUFNLDBCQUNOYyxNQUFPLEVBQ1BDLE1BQU8sRUFDUEYsTUFBTyxLQUNQSSxjQUFlLEdBdWVuQixFQW5nQkEsR0FzZ0JBLFFBQXdDLElBQXZCckIsT0FBUTJGLFdBQTRCLENBQ25ELElBQUlDLEVBQWlCNUYsT0FBUTJGLFdBQVdFLEVBQ3hDOUcsRUFBcUJLLGdCQUFnQndHLEdBSWpDNUYsT0FBUTJGLFdBQWE1RyxFQUFxQkQsZ0JDdGhCNUIiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ0eXBlIFByb2dyZXNzID0ge1xuICBjb250cm9sbGVyOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgc2NvcmU6IG51bWJlcjtcbiAgbGV2ZWw6IG51bWJlcjtcbiAgc3RhdGU6IGFueTtcbiAgY29udGludWVTY29yZTogbnVtYmVyO1xufTtcblxuaW50ZXJmYWNlIENhbnZhc0VsZW1lbnQgZXh0ZW5kcyBIVE1MQ2FudmFzRWxlbWVudCB7XG4gIGNhcHR1cmVTdHJlYW0oZnJhbWVSYXRlPzogbnVtYmVyKTogTWVkaWFTdHJlYW07XG59XG5cbmNsYXNzIERpZ2l0YXBHYW1lUGxheWVyU0RLIHtcbiAgcHVibGljIHN0YXRpYyBnYW1lT2JqZWN0OiBhbnkgPSBudWxsO1xuICBwcml2YXRlIHN0YXRpYyBpc0xvYWRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHN0YXRpYyBvcmlnaW46IHN0cmluZyA9IG51bGw7XG4gIHByaXZhdGUgc3RhdGljIGlzRGVidWdnaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYWxsb3dlZE9yaWdpbnM6IHN0cmluZ1tdID0gW1xuICAgIFwiaHR0cHM6Ly9idWlsZC5kaWdpdGFwLmRldlwiLFxuICAgIFwiaHR0cHM6Ly93YW0uYXBwXCIsXG4gICAgXCJodHRwczovL2FwcC53YW0uYXBwXCIsXG4gICAgXCJodHRwczovL3dhbS5ldVwiLFxuICAgIFwiaHR0cHM6Ly9wbGF5LndhbS5hcHBcIixcbiAgICBcImh0dHBzOi8vc3RhZ2Uud2FtLmFwcFwiLFxuICAgIFwiaHR0cDovL2xvY2FsaG9zdDo2MzM0MlwiLFxuICAgIFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwXCIsXG4gICAgXCJodHRwOi8vbG9jYWxob3N0OjMwMDBcIixcbiAgICBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMVwiLFxuICAgIFwiaHR0cHM6Ly9sb2NhbGhvc3Q6MzAwMVwiLFxuICAgIFwiaHR0cDovLzEyNy4wLjAuMTozMDAxXCIsXG4gICAgXCJodHRwczovLzEyNy4wLjAuMTozMDAxXCIsXG4gIF07XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcHJvZ3Jlc3M6IFByb2dyZXNzID0ge1xuICAgIGNvbnRyb2xsZXI6IFwiX2RpZ2l0YXBHYW1lXCIsXG4gICAgdHlwZTogXCJTREtfUExBWUVSX1NDT1JFX1VQREFURVwiLFxuICAgIHNjb3JlOiAwLFxuICAgIGxldmVsOiAwLFxuICAgIHN0YXRlOiBudWxsLFxuICAgIGNvbnRpbnVlU2NvcmU6IDAsXG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGwgYSBtZXRob2QgZnJvbSB0aGUgY2xhc3MsXG4gICAqIHRocm91Z2ggYSBxdWV1ZS5cbiAgICpcbiAgICogQHBhcmFtIGFyZ3MgYXJyYXlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcHJvY2Vzc1F1ZXVlKC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgRGlnaXRhcEdhbWVQbGF5ZXJTREsuZGVidWcoXCJQcm9jZXNzaW5nIFF1ZXVlIC0+XCIsIGFyZ3MpO1xuXG4gICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBEaWdpdGFwR2FtZVBsYXllclNES1tcbiAgICAgICAgYXJnc1swXSBhc1xuICAgICAgICAgIHwgXCJpbml0XCJcbiAgICAgICAgICB8IFwic2V0UHJvZ3Jlc3NcIlxuICAgICAgICAgIHwgXCJzZXRMZXZlbFVwXCJcbiAgICAgICAgICB8IFwic2V0UGxheWVyRmFpbGVkXCJcbiAgICAgICAgICB8IFwic2V0Q2FsbGJhY2tcIlxuICAgICAgXS5hcHBseShEaWdpdGFwR2FtZVBsYXllclNESywgYXJncy5zbGljZSgxKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgYSBjdXJyZW50IHF1ZXVlLlxuICAgKlxuICAgKiBAcGFyYW0gcXVldWUgYXJyYXlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcHJvY2Vzc09sZFF1ZXVlKHF1ZXVlOiBbXSk6IHZvaWQge1xuICAgIHF1ZXVlLmZvckVhY2goKGFyZ3M6IGFueSkgPT4ge1xuICAgICAgdGhpcy5wcm9jZXNzUXVldWUoLi4uYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhIGNhbGxiYWNrIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIGZuIHN0cmluZ1xuICAgKiBAcGFyYW0gY2FsbGJhY2sgZnVuY3Rpb25cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgc2V0Q2FsbGJhY2soXG4gICAgZm46XG4gICAgICB8IFwiYWZ0ZXJTdGFydEdhbWVGcm9tWmVyb1wiXG4gICAgICB8IFwiYWZ0ZXJDb250aW51ZVdpdGhDdXJyZW50U2NvcmVcIlxuICAgICAgfCBcImFmdGVyU3RhcnRHYW1lXCJcbiAgICAgIHwgXCJhZnRlclBhdXNlR2FtZVwiLFxuICAgIGNhbGxiYWNrOiBhbnlcbiAgKTogdm9pZCB7XG4gICAgdGhpc1tmbl0gPSBjYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0IGEgbmV3IGdhbWUgY29ubmVjdGlvbiB3aXRoXG4gICAqIHRoZSBwYXJlbnQgcGxhdGZvcm0uXG4gICAqXG4gICAqIEBwYXJhbSB1aU9wdGlvbnMgYXJyYXlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgaW5pdChcbiAgICBoYXNTY29yZTogYm9vbGVhbiA9IHRydWUsXG4gICAgaGFzSGlnaFNjb3JlOiBib29sZWFuID0gdHJ1ZVxuICApOiB2b2lkIHtcbiAgICB0aGlzLmRlYnVnKFwiU0RLIEluaXRpYWxpemF0aW9uXCIpO1xuXG4gICAgLy8gSW5pdCB0aGUgdWlPcHRpb25zXG4gICAgY29uc3QgdWlPcHRpb25zID0gW1wic2NvcmVcIiwgXCJoaWdoU2NvcmVcIiwgaGFzU2NvcmUsIGhhc0hpZ2hTY29yZV07XG5cbiAgICAvLyBJZiBTREsgaXMgbm90IGxvYWRlZCB5ZXRcbiAgICBpZiAoIXRoaXMuaXNMb2FkZWQpIHtcbiAgICAgIC8vIFNlbmQgdGhlIGluaXQgbWVzc2FnZVxuICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZShcbiAgICAgICAge1xuICAgICAgICAgIGNvbnRyb2xsZXI6IFwiX2RpZ2l0YXBHYW1lXCIsXG4gICAgICAgICAgdHlwZTogXCJTREtfU0VUVElOR1NcIixcbiAgICAgICAgICB1aTogdWlPcHRpb25zLFxuICAgICAgICAgIHJlYWR5OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBcIipcIlxuICAgICAgKTtcblxuICAgICAgLy8gV2F0Y2ggZm9yIG1lc3NhZ2VzIGZyb20gR2FtZUJveFxuICAgICAgdGhpcy5saXN0ZW5HYW1lYm94RXZlbnRzKCk7XG4gICAgICBcbiAgICAgIC8vIFdhdGNoIGZvciBtZXNzYWdlcyBmcm9tIFN0cmVhbXJcbiAgICAgIHRoaXMubGlzdGVuU3RyZWFtckV2ZW50cygpO1xuXG4gICAgICAvLyBTZXQgdGhlIGNhbnZhcyBmdWxsd2lkdGggJiBibHVlIHNjcmVlbiBmaXhcbiAgICAgIGNvbnN0IGNhbnZhczogSFRNTENvbGxlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImNhbnZhc1wiKTtcbiAgICAgIGNvbnN0IGh0bWw6IEhUTUxDb2xsZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJodG1sXCIpO1xuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbGV0IGNhbnZhc1N0eWxlID0gY2FudmFzWzBdLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgICAgICBjYW52YXNbMF0uc2V0QXR0cmlidXRlKFxuICAgICAgICAgIFwic3R5bGVcIixcbiAgICAgICAgICBjYW52YXNTdHlsZSArXG4gICAgICAgICAgICBcIndpZHRoOiAxMDAlOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IHVzZXItc2VsZWN0OiBub25lOyAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOyAtbW96LXVzZXItc2VsZWN0OiBub25lO1wiXG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IGh0bWxTdHlsZSA9IGh0bWxbMF0uZ2V0QXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgICAgIGh0bWxbMF0uc2V0QXR0cmlidXRlKFxuICAgICAgICAgIFwic3R5bGVcIixcbiAgICAgICAgICAoaHRtbFN0eWxlID8gaHRtbFN0eWxlIDogXCJcIikgK1xuICAgICAgICAgICAgXCJ1c2VyLXNlbGVjdDogbm9uZTsgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcIlxuICAgICAgICApO1xuICAgICAgfSwgMjAwMCk7XG4gICAgfVxuXG4gICAgLy8gU2V0IFNESyBhcyBsb2FkZWQgdG8gcHJldmVudCByZS1pbml0aWF0aW9uXG4gICAgdGhpcy5pc0xvYWRlZCA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHByb2dyZXNzIG9mIGEgZ2FtZS5cbiAgICpcbiAgICogQHBhcmFtIHR5cGUgc3RyaW5nXG4gICAqIEBwYXJhbSBzdGF0ZSBzdHJpbmdcbiAgICogQHBhcmFtIHNjb3JlIG51bWJlclxuICAgKiBAcGFyYW0gbGV2ZWwgbnVtYmVyXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNldFByb2dyZXNzKHN0YXRlOiBzdHJpbmcsIHNjb3JlOiBudW1iZXIsIGxldmVsOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBTZXQgdGhlIGN1cnJlbnQgcHJvZ3Jlc3NcbiAgICB0aGlzLnByb2dyZXNzID0ge1xuICAgICAgdHlwZTogXCJTREtfUExBWUVSX1NDT1JFX1VQREFURVwiLFxuICAgICAgc3RhdGUsXG4gICAgICBzY29yZSxcbiAgICAgIGxldmVsLFxuICAgICAgY29udGludWVTY29yZTogc2NvcmUsXG4gICAgICBjb250cm9sbGVyOiBcIl9kaWdpdGFwR2FtZVwiLFxuICAgIH07XG5cbiAgICB0aGlzLnNlbmREYXRhKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBuZXcgbGV2ZWwgb2YgdGhlIGdhbWUuXG4gICAqXG4gICAqIEBwYXJhbSBsZXZlbCBudW1iZXJcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgc2V0TGV2ZWxVcChsZXZlbDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5wcm9ncmVzcy5sZXZlbCA9IGxldmVsO1xuICAgIHRoaXMucHJvZ3Jlc3MudHlwZSA9IFwiU0RLX1BMQVlFUl9MRVZFTF9VUFwiO1xuXG4gICAgdGhpcy5zZW5kRGF0YSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZ2FtZSBhcyBmYWlsZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzdGF0ZSBzdHJpbmdcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgc2V0UGxheWVyRmFpbGVkKHN0YXRlOiBzdHJpbmcgPSBcIkZBSUxcIik6IHZvaWQge1xuICAgIHRoaXMucHJvZ3Jlc3Muc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLnByb2dyZXNzLnNjb3JlID0gMDtcbiAgICB0aGlzLnByb2dyZXNzLnR5cGUgPSBcIlNES19QTEFZRVJfRkFJTEVEXCI7XG5cbiAgICB0aGlzLnNlbmREYXRhKCk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgZ2FtZSBkYXRhIHRvIHBhcmVudCBwbGF0Zm9ybS5cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIHNlbmREYXRhKCk6IHZvaWQge1xuICAgIC8vIFNlbmQgdGhlIG1lc3NhZ2UgdG8gR2FtZWJveC5cbiAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHRoaXMucHJvZ3Jlc3MsIHRoaXMub3JpZ2luKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBsaXN0ZW5pbmcgZm9yIG1lc3NhZ2VzXG4gICAqIGZyb20gdGhlIHBsYXRmb3JtLlxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgbGlzdGVuR2FtZWJveEV2ZW50cygpOiB2b2lkIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJtZXNzYWdlXCIsXG4gICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgc2VsZi5kZWJ1ZyhcIkV2ZW50IFJlY2VpdmVkIC0+ICVvIC0+ICVvXCIsIGV2ZW50LmRhdGEsIGV2ZW50Lm9yaWdpbik7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICBldmVudC5kYXRhLmNvbnRyb2xsZXIgJiZcbiAgICAgICAgICBldmVudC5kYXRhLmNvbnRyb2xsZXIgPT0gXCJfZGlnaXRhcEFwcFwiXG4gICAgICAgICkge1xuICAgICAgICAgIGxldCBvcmlnaW5JbmRleCA9IHNlbGYuYWxsb3dlZE9yaWdpbnMuaW5kZXhPZihldmVudC5vcmlnaW4pO1xuXG4gICAgICAgICAgaWYgKG9yaWdpbkluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgc2VsZi5kZWJ1ZyhcIkVycm9yOiBPcmlnaW4gbm90IGFsbG93ZWQgaW5zaWRlIGdhbWUgY29udGFpbmVyIVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5vcmlnaW4gPSBzZWxmLmFsbG93ZWRPcmlnaW5zW29yaWdpbkluZGV4XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZXZlbnQuZGF0YS50eXBlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmRhdGEudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiU0RLX1NUQVJUX0dBTUVcIjpcbiAgICAgICAgICAgICAgICBzZWxmLmFmdGVyU3RhcnRHYW1lKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcIlNES19QQVVTRV9HQU1FXCI6XG4gICAgICAgICAgICAgICAgc2VsZi5hZnRlclBhdXNlR2FtZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJTREtfU1RBUlRfR0FNRV9GUk9NX1pFUk9cIjpcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLnNjb3JlID0gMDtcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLmxldmVsID0gMDtcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLmNvbnRpbnVlU2NvcmUgPSAwO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5hZnRlclN0YXJ0R2FtZUZyb21aZXJvKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcIlNES19DT05USU5VRV9XSVRIX0NVUlJFTlRfU0NPUkVcIjpcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLnNjb3JlID0gc2VsZi5wcm9ncmVzcy5jb250aW51ZVNjb3JlO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5hZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZShcbiAgICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3Muc2NvcmUsXG4gICAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLmxldmVsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHNlbGYuZGVidWcoXG4gICAgICAgICAgICAgICAgICAnRXJyb3I6IGBkYXRhLnR5cGVgID0gXCInICtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YS50eXBlICtcbiAgICAgICAgICAgICAgICAgICAgJ1wiIG5vdCBmb3VuZCEgUGxlYXNlIGNoZWNrIGByZWFkbWUubWRgIG9mIGRhdGEgY29sbGVjdG9yIHBhY2thZ2UhJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuZGVidWcoXCJFcnJvcjogYGV2ZW50LmRhdGEudHlwZWAgc2hvdWxkIGJlIGltcGxlbWVudGVkIVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmYWxzZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgbGlzdGVuaW5nIGZvciBtZXNzYWdlc1xuICAgKiBmcm9tIHRoZSBTdHJlYW1yIHBsYXRmb3JtLlxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgbGlzdGVuU3RyZWFtckV2ZW50cygpOiB2b2lkIHtcbiAgICBsZXQgY2FudmFzOiBDYW52YXNFbGVtZW50ID0gbnVsbDtcbiAgICBsZXQgc3RyZWFtOiBhbnkgPSBudWxsO1xuICAgIGxldCBjb25uZWN0aW9uOiBhbnkgPSBudWxsO1xuICAgIGxldCBjaGFubmVsOiBhbnkgPSBudWxsO1xuICAgIGxldCBpY2VDYW5kaWRhdGU6IGFueSA9IG51bGw7XG4gICAgbGV0IGNvbm5lY3RlZCA9IGZhbHNlO1xuICAgIGxldCBpc05lZ290aWF0aW9uTmVlZGVkID0gZmFsc2U7XG5cbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5kZWJ1ZygnSW5pdCBTdHJlYW1yIHYxLjAuMicpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2VsZi5kZWJ1ZygnU3RyZWFtciBFdmVudCByZWNlaXZlZCcsIGV2ZW50LmRhdGEpO1xuXG4gICAgICAgIGlmICghZXZlbnQuZGF0YSB8fCB0eXBlb2YgZXZlbnQuZGF0YSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgY29udHJvbGxlciwgdHlwZSwgYWN0aW9uLCBvZmZlciwgdG91cm5hbWVudF9pZCwgdXNlcm5hbWUgfSA9IGV2ZW50LmRhdGE7XG5cbiAgICAgICAgc2VsZi5kZWJ1ZygnU3RyZWFtciBFdmVudCBkZXRhaWxzOiAnLCBjb250cm9sbGVyLCB0eXBlLCBhY3Rpb24sIG9mZmVyLCB0b3VybmFtZW50X2lkLCB1c2VybmFtZSk7XG5cbiAgICAgICAgaWYgKGNvbnRyb2xsZXIgIT09IFwiX2RpZ2l0YXBBcHBcIiAmJiB0eXBlICE9PSBcIndlYnJ0Y1wiKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb25uZWN0ZWQpIHtcbiAgICAgICAgICBjYW52YXMgPSA8Q2FudmFzRWxlbWVudD4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImNhbnZhc1wiKTtcbiAgICAgICAgICBzdHJlYW0gPSBjYW52YXMuY2FwdHVyZVN0cmVhbSgzMCk7XG4gICAgICAgICAgY29ubmVjdGlvbiA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbih7XG4gICAgICAgICAgICBpY2VTZXJ2ZXJzOiBbeyB1cmxzOiBcInN0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDJcIiB9XSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjaGFubmVsID0gY29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbChgc3RyZWFtci0ke3RvdXJuYW1lbnRfaWR9LSR7dXNlcm5hbWV9YCwge1xuICAgICAgICAgICAgbmVnb3RpYXRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGlkOiAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJjbG9zZVwiKSB7XG4gICAgICAgICAgZm9yIChsZXQgc2VuZGVyIG9mIGNvbm5lY3Rpb24uZ2V0U2VuZGVycygpKSB7XG4gICAgICAgICAgICBjb25uZWN0aW9uLnJlbW92ZVRyYWNrKHNlbmRlcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FudmFzID0gbnVsbDtcbiAgICAgICAgICBzdHJlYW0gPSBudWxsO1xuXG4gICAgICAgICAgY2hhbm5lbC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogJ3N0cmVhbXInLCBhY3Rpb246ICdjbG9zZScgfSkpO1xuICAgICAgICAgIGNvbm5lY3Rpb24uY2xvc2UoKTtcblxuICAgICAgICAgIGNvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICAgIGNoYW5uZWwgPSBudWxsO1xuICAgICAgICAgIGljZUNhbmRpZGF0ZSA9IG51bGw7XG4gICAgICAgICAgY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgaXNOZWdvdGlhdGlvbk5lZWRlZCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhY3Rpb24gPT09IFwiaW5pdFwiKSB7XG4gICAgICAgICAgZm9yIChjb25zdCB0cmFjayBvZiBzdHJlYW0uZ2V0VHJhY2tzKCkpIHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uYWRkVHJhY2sodHJhY2ssIHN0cmVhbSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3Qgb25Db25uZWN0aW9uU3RhdGVDaGFuZ2UgPSAoZTogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgXCJfX1dFQlJUQy5vbkNvbm5lY3Rpb25TdGF0ZUNoYW5nZV9fXCIsXG4gICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdGlvblN0YXRlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgc3dpdGNoIChjb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiY29ubmVjdGVkXCI6XG4gICAgICAgICAgICAgICAgY29ubmVjdGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICg8V2luZG93PmV2ZW50LnNvdXJjZSkucG9zdE1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgICB7IHR5cGU6IFwic3RyZWFtclwiLCBhY3Rpb246IFwiY29ubmVjdGVkXCIgfSxcbiAgICAgICAgICAgICAgICAgIGV2ZW50Lm9yaWdpblxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgXCJkaXNjb25uZWN0ZWRcIjpcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzZW5kZXIgb2YgY29ubmVjdGlvbi5nZXRTZW5kZXJzKCkpIHtcbiAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucmVtb3ZlVHJhY2soc2VuZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FudmFzID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzdHJlYW0gPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgKDxXaW5kb3c+ZXZlbnQuc291cmNlKS5wb3N0TWVzc2FnZShcbiAgICAgICAgICAgICAgICAgIHsgdHlwZTogXCJzdHJlYW1yXCIsIGFjdGlvbjogXCJkaXNjb25uZWN0ZWRcIiB9LFxuICAgICAgICAgICAgICAgICAgZXZlbnQub3JpZ2luXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNoYW5uZWwuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixcbiAgICAgICAgICAgICAgICAgIG9uQ29ubmVjdGlvblN0YXRlQ2hhbmdlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICBcImljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLFxuICAgICAgICAgICAgICAgICAgb25JY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2VcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImljZWNhbmRpZGF0ZVwiLCBvbkljZUNhbmRpZGF0ZSk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgXCJvbm5lZ290aWF0aW9ubmVlZGVkXCIsXG4gICAgICAgICAgICAgICAgICBvbk5lZ290aWF0aW9uTmVlZGVkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICBcIm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2VcIixcbiAgICAgICAgICAgICAgICAgIG9uU2lnbmFsaW5nU3RhdGVDaGFuZ2VcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNoYW5uZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25NZXNzYWdlKTtcblxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIGNoYW5uZWwgPSBudWxsO1xuICAgICAgICAgICAgICAgIGljZUNhbmRpZGF0ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgY29ubmVjdGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29uc3Qgb25JY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2UgPSAoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgIFwiX19XRUJSVEMub25JQ0VDb25uZWN0aW9uU3RhdGVDaGFuZ2VfX1wiLFxuICAgICAgICAgICAgICBjb25uZWN0aW9uLmljZUNvbm5lY3Rpb25TdGF0ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbi5pY2VDb25uZWN0aW9uU3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcImNvbm5lY3RlZFwiOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIFwiZGlzY29ubmVjdGVkXCI6XG4gICAgICAgICAgICAgIGNhc2UgXCJmYWlsZWRcIjpcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnJlc3RhcnRJY2UoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29uc3Qgb25JY2VDYW5kaWRhdGUgPSAoZTogYW55KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBzZWxmLmRlYnVnKFwiX19XRUJSVEMub25JQ0VDYW5kaWRhdGVfX1wiLCBlLmNhbmRpZGF0ZSk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoZS5jYW5kaWRhdGUpIHtcbiAgICAgICAgICAgICAgICBpY2VDYW5kaWRhdGUgPSBlLmNhbmRpZGF0ZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLmRlYnVnKCdfX1dFQlJUQy5sb2NhbERlc2NyaXB0aW9uX18nLCBjb25uZWN0aW9uLmxvY2FsRGVzY3JpcHRpb24pO1xuXG4gICAgICAgICAgICAgICAgKDxXaW5kb3c+ZXZlbnQuc291cmNlKS5wb3N0TWVzc2FnZShcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJlYW1yXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJhbnN3ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgb2ZmZXI6IHdpbmRvdy5idG9hKFxuICAgICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbilcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBldmVudC5vcmlnaW5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIl9fV0VCUlRDLm9uSUNFQ2FuZGlkYXRlX19cIiwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCBvbk1lc3NhZ2UgPSBhc3luYyAoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgaWYgKCFldmVudC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG5cbiAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaWNlQ2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5hZGRJY2VDYW5kaWRhdGUobWVzc2FnZS5pY2VDYW5kaWRhdGUpO1xuICAgICAgICAgICAgICAgIGNoYW5uZWwuc2VuZChKU09OLnN0cmluZ2lmeSh7IGljZUNhbmRpZGF0ZSB9KSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiX19XRUJSVEMub25NZXNzYWdlX19cIiwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCBvbk5lZ290aWF0aW9uTmVlZGVkID0gYXN5bmMgKGV2ZW50OiBhbnkpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGlmIChpc05lZ290aWF0aW9uTmVlZGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihKU09OLnBhcnNlKG9mZmVyKSk7XG4gICAgICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihcbiAgICAgICAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmNyZWF0ZUFuc3dlcigpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIl9fV0VCUlRDLm9uTmVnb3RpYXRpb25OZWVkZWRcIiwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3Qgb25TaWduYWxpbmdTdGF0ZUNoYW5nZSA9IChlOiBhbnkpID0+XG4gICAgICAgICAgICAoaXNOZWdvdGlhdGlvbk5lZWRlZCA9IGNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUgIT09IFwic3RhYmxlXCIpO1xuXG4gICAgICAgICAgY29ubmVjdGlvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixcbiAgICAgICAgICAgIG9uQ29ubmVjdGlvblN0YXRlQ2hhbmdlXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25uZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICBcImljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLFxuICAgICAgICAgICAgb25JY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2VcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbm5lY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcihcImljZWNhbmRpZGF0ZVwiLCBvbkljZUNhbmRpZGF0ZSk7XG4gICAgICAgICAgY29ubmVjdGlvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgXCJvbm5lZ290aWF0aW9ubmVlZGVkXCIsXG4gICAgICAgICAgICBvbk5lZ290aWF0aW9uTmVlZGVkXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25uZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICBcIm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2VcIixcbiAgICAgICAgICAgIG9uU2lnbmFsaW5nU3RhdGVDaGFuZ2VcbiAgICAgICAgICApO1xuICAgICAgICAgIGNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25NZXNzYWdlKTtcblxuICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24oSlNPTi5wYXJzZShvZmZlcikpO1xuICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihhd2FpdCBjb25uZWN0aW9uLmNyZWF0ZUFuc3dlcigpKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJfX1dFQlJUQ19fXCIsIGVyci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbXB0eSBtZXRob2RzIGZvciBnYW1lIGRldmVsb3BlciB0byB1c2UuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGFmdGVyU3RhcnRHYW1lRnJvbVplcm8oKSB7fVxuXG4gIHB1YmxpYyBzdGF0aWMgYWZ0ZXJDb250aW51ZVdpdGhDdXJyZW50U2NvcmUoc2NvcmU6IG51bWJlciwgbGV2ZWw6IG51bWJlcikge31cblxuICBwdWJsaWMgc3RhdGljIGFmdGVyU3RhcnRHYW1lKCkge31cblxuICBwdWJsaWMgc3RhdGljIGFmdGVyUGF1c2VHYW1lKCkge31cblxuICAvKipcbiAgICogSWYgdXNlciBpcyBkZWJ1Z2dpbmcsIHNob3cgc29tZSBjb25zb2xlIGxvZ3MuXG4gICAqXG4gICAqIEBwYXJhbSBtZXNzYWdlIGFueVxuICAgKiBAcGFyYW0gcGFyYW1zIGFueVtdXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBkZWJ1ZyhtZXNzYWdlPzogYW55LCAuLi5wYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgY29uc3QgcGFyZW50V2luZG93OiBhbnkgPSB3aW5kb3c7XG5cbiAgICBpZiAocGFyZW50V2luZG93LnNka2RlYnVnKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkRpZ2l0YXBHYW1lUGxheWVyU0RLIC0+IFwiICsgbWVzc2FnZSwgLi4ucGFyYW1zKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gUmVhZCB0aGUgY3VycmVudCBxdWV1ZVxuaWYgKHR5cGVvZiAoPGFueT53aW5kb3cpLmRpZ2l0YXBTREsgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgbGV0IG9sZFF1ZXVlID0gKDxhbnk+d2luZG93KS5kaWdpdGFwU0RLLnE7XG4gIERpZ2l0YXBHYW1lUGxheWVyU0RLLnByb2Nlc3NPbGRRdWV1ZShvbGRRdWV1ZSk7XG59XG5cbi8vIFdhdGNoIHRoZSBxdWV1ZSB3aXRoIG5ldyBtZXRob2Rcbig8YW55PndpbmRvdykuZGlnaXRhcFNESyA9IERpZ2l0YXBHYW1lUGxheWVyU0RLLnByb2Nlc3NRdWV1ZTtcbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuX193ZWJwYWNrX21vZHVsZXNfX1s2MDddKCk7XG4iXSwic291cmNlUm9vdCI6IiJ9