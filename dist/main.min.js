({607:function(){var e=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var s=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,n=a.length;i<n;i++,o++)s[o]=a[i];return s},t=function(){function t(){}return t.processQueue=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.debug("Processing Queue ->",e),"string"==typeof e[0]&&t[e[0]].apply(t,e.slice(1))},t.processOldQueue=function(e){var t=this;e.forEach((function(e){t.processQueue.apply(t,e)}))},t.setCallback=function(e,t){this[e]=t},t.init=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.debug("SDK Initialization");var r=["score","highScore",e,t];if(!this.isLoaded){window.parent.postMessage({controller:"_digitapGame",type:"SDK_SETTINGS",ui:r,ready:!0},"*"),this.listenGameboxEvents();var s=document.getElementsByTagName("canvas"),o=document.getElementsByTagName("html");setTimeout((function(){var e=s[0].getAttribute("style");s[0].setAttribute("style",e+"width: 100%; margin: 0; padding: 0; user-select: none; -webkit-user-select: none; -moz-user-select: none;");var t=o[0].getAttribute("style");o[0].setAttribute("style",(t||"")+"user-select: none; -webkit-user-select: none; -moz-user-select: none;")}),2e3)}this.isLoaded=!0},t.setProgress=function(e,t,r){this.progress={type:"SDK_PLAYER_SCORE_UPDATE",state:e,score:t,level:r,continueScore:t,controller:"_digitapGame"},this.sendData()},t.setLevelUp=function(e){this.progress.level=e,this.progress.type="SDK_PLAYER_LEVEL_UP",this.sendData()},t.setPlayerFailed=function(e){void 0===e&&(e="FAIL"),this.progress.state=e,this.progress.score=0,this.progress.type="SDK_PLAYER_FAILED",this.sendData()},t.sendData=function(){window.parent.postMessage(this.progress,this.origin)},t.listenGameboxEvents=function(){var e=this;window.addEventListener("message",(function(t){if(e.debug("Event Received -> %o -> %o",t.data,t.origin),"object"==typeof t.data&&t.data.controller&&"_digitapApp"==t.data.controller){var r=e.allowedOrigins.indexOf(t.origin);if(-1===r)return void e.debug("Error: Origin not allowed inside game container!");if(e.origin=e.allowedOrigins[r],t.data.type)switch(t.data.type){case"SDK_START_GAME":e.afterStartGame();break;case"SDK_PAUSE_GAME":e.afterPauseGame();break;case"SDK_START_GAME_FROM_ZERO":e.progress.score=0,e.progress.level=0,e.progress.continueScore=0,e.afterStartGameFromZero();break;case"SDK_CONTINUE_WITH_CURRENT_SCORE":e.progress.score=e.progress.continueScore,e.afterContinueWithCurrentScore(e.progress.score,e.progress.level);break;default:e.debug('Error: `data.type` = "'+t.data.type+'" not found! Please check `readme.md` of data collector package!')}else e.debug("Error: `event.data.type` should be implemented!")}}),!1)},t.afterStartGameFromZero=function(){},t.afterContinueWithCurrentScore=function(e,t){},t.afterStartGame=function(){},t.afterPauseGame=function(){},t.debug=function(t){for(var r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var o=window;o.sdkdebug&&console.log.apply(console,e(["DigitapGamePlayerSDK -> "+t],r))},t.gameObject=null,t.isLoaded=!1,t.origin=null,t.isDebugging=!1,t.allowedOrigins=["https://build.digitap.dev","https://wam.app","https://app.wam.app","https://wam.eu","https://play.wam.app","https://stage.wam.app","http://localhost:63342","http://localhost:8080","http://localhost:3000","http://localhost:3001","https://localhost:3001","http://127.0.0.1:3001","https://127.0.0.1:3001"],t.progress={controller:"_digitapGame",type:"SDK_PLAYER_SCORE_UPDATE",score:0,level:0,state:null,continueScore:0},t}();if(void 0!==window.digitapSDK){var r=window.digitapSDK.q;t.processOldQueue(r)}window.digitapSDK=t.processQueue}})[607]();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW1lLXBsYXllci1zZGsvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vZ2FtZS1wbGF5ZXItc2RrL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJwcm9jZXNzUXVldWUiLCJEaWdpdGFwR2FtZVBsYXllclNESyIsImRlYnVnIiwiYXJncyIsImFwcGx5Iiwic2xpY2UiLCJwcm9jZXNzT2xkUXVldWUiLCJxdWV1ZSIsImZvckVhY2giLCJzZXRDYWxsYmFjayIsImZuIiwiY2FsbGJhY2siLCJ0aGlzIiwiaW5pdCIsImhhc1Njb3JlIiwiaGFzSGlnaFNjb3JlIiwidWlPcHRpb25zIiwiaXNMb2FkZWQiLCJ3aW5kb3ciLCJwYXJlbnQiLCJwb3N0TWVzc2FnZSIsImNvbnRyb2xsZXIiLCJ0eXBlIiwidWkiLCJyZWFkeSIsImxpc3RlbkdhbWVib3hFdmVudHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic2V0VGltZW91dCIsImNhbnZhc1N0eWxlIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiaHRtbFN0eWxlIiwic2V0UHJvZ3Jlc3MiLCJzdGF0ZSIsInNjb3JlIiwibGV2ZWwiLCJwcm9ncmVzcyIsImNvbnRpbnVlU2NvcmUiLCJzZW5kRGF0YSIsInNldExldmVsVXAiLCJzZXRQbGF5ZXJGYWlsZWQiLCJvcmlnaW4iLCJzZWxmIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZGF0YSIsIm9yaWdpbkluZGV4IiwiYWxsb3dlZE9yaWdpbnMiLCJpbmRleE9mIiwiYWZ0ZXJTdGFydEdhbWUiLCJhZnRlclBhdXNlR2FtZSIsImFmdGVyU3RhcnRHYW1lRnJvbVplcm8iLCJhZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZSIsIm1lc3NhZ2UiLCJwYXJlbnRXaW5kb3ciLCJzZGtkZWJ1ZyIsImNvbnNvbGUiLCJsb2ciLCJwYXJhbXMiLCJnYW1lT2JqZWN0IiwiaXNEZWJ1Z2dpbmciLCJkaWdpdGFwU0RLIiwi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QUt6QyxNQUNILHlCQUNFMkMsRUFBTUMsS0FBS3hCLEtBQ1gseUVBS1JxQixFQUFLekMsTUFBTSx1REFJakIsSUFPVSxFQUFBa0QsdUJBQWQsYUFFYyxFQUFBQyw4QkFBZCxTQUE0Q2xCLEVBQWVDLEtBRTdDLEVBQUFjLGVBQWQsYUFFYyxFQUFBQyxlQUFkLGFBUWUsRUFBQWpELE1BQWYsU0FBcUJvRCxHLElBQWUsd0RBQ2xDLElBQU1DLEVBQW9CckMsT0FFdEJxQyxFQUFhQyxVQUNmQyxRQUFRQyxJQUFHLE1BQVhELFFBQU8sR0FBSywyQkFBNkJILEdBQVlLLEtBM1IzQyxFQUFBQyxXQUFrQixLQUNqQixFQUFBM0MsVUFBb0IsRUFDcEIsRUFBQXlCLE9BQWlCLEtBQ2pCLEVBQUFtQixhQUF1QixFQUV2QixFQUFBYixlQUEyQixDQUN4Qyw0QkFDQSxrQkFDQSxzQkFDQSxpQkFDQSx1QkFDQSx3QkFDQSx5QkFDQSx3QkFDQSx3QkFDQSx3QkFDQSx5QkFDQSx3QkFDQSwwQkFHYSxFQUFBWCxTQUFxQixDQUNsQ2hCLFdBQVksZUFDWkMsS0FBTSwwQkFDTmEsTUFBTyxFQUNQQyxNQUFPLEVBQ1BGLE1BQU8sS0FDUEksY0FBZSxHQW1RbkIsRUEvUkEsR0FrU0EsUUFBd0MsSUFBdkJwQixPQUFRNEMsV0FBNEIsQ0FDbkQsSUFBSUMsRUFBaUI3QyxPQUFRNEMsV0FBV0UsRUFDeEMvRCxFQUFxQkssZ0JBQWdCeUQsR0FJakM3QyxPQUFRNEMsV0FBYTdELEVBQXFCRCxnQkM5UzVCIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidHlwZSBQcm9ncmVzcyA9IHtcbiAgY29udHJvbGxlcjogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG4gIHNjb3JlOiBudW1iZXI7XG4gIGxldmVsOiBudW1iZXI7XG4gIHN0YXRlOiBhbnk7XG4gIGNvbnRpbnVlU2NvcmU6IG51bWJlcjtcbn07XG5cbmNsYXNzIERpZ2l0YXBHYW1lUGxheWVyU0RLIHtcbiAgcHVibGljIHN0YXRpYyBnYW1lT2JqZWN0OiBhbnkgPSBudWxsO1xuICBwcml2YXRlIHN0YXRpYyBpc0xvYWRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHN0YXRpYyBvcmlnaW46IHN0cmluZyA9IG51bGw7XG4gIHByaXZhdGUgc3RhdGljIGlzRGVidWdnaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgYWxsb3dlZE9yaWdpbnM6IHN0cmluZ1tdID0gW1xuICAgIFwiaHR0cHM6Ly9idWlsZC5kaWdpdGFwLmRldlwiLFxuICAgIFwiaHR0cHM6Ly93YW0uYXBwXCIsXG4gICAgXCJodHRwczovL2FwcC53YW0uYXBwXCIsXG4gICAgXCJodHRwczovL3dhbS5ldVwiLFxuICAgIFwiaHR0cHM6Ly9wbGF5LndhbS5hcHBcIixcbiAgICBcImh0dHBzOi8vc3RhZ2Uud2FtLmFwcFwiLFxuICAgIFwiaHR0cDovL2xvY2FsaG9zdDo2MzM0MlwiLFxuICAgIFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwXCIsXG4gICAgXCJodHRwOi8vbG9jYWxob3N0OjMwMDBcIixcbiAgICBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMVwiLFxuICAgIFwiaHR0cHM6Ly9sb2NhbGhvc3Q6MzAwMVwiLFxuICAgIFwiaHR0cDovLzEyNy4wLjAuMTozMDAxXCIsXG4gICAgXCJodHRwczovLzEyNy4wLjAuMTozMDAxXCIsXG4gIF07XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcHJvZ3Jlc3M6IFByb2dyZXNzID0ge1xuICAgIGNvbnRyb2xsZXI6IFwiX2RpZ2l0YXBHYW1lXCIsXG4gICAgdHlwZTogXCJTREtfUExBWUVSX1NDT1JFX1VQREFURVwiLFxuICAgIHNjb3JlOiAwLFxuICAgIGxldmVsOiAwLFxuICAgIHN0YXRlOiBudWxsLFxuICAgIGNvbnRpbnVlU2NvcmU6IDAsXG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGwgYSBtZXRob2QgZnJvbSB0aGUgY2xhc3MsXG4gICAqIHRocm91Z2ggYSBxdWV1ZS5cbiAgICogXG4gICAqIEBwYXJhbSBhcmdzIGFycmF5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHByb2Nlc3NRdWV1ZSguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIERpZ2l0YXBHYW1lUGxheWVyU0RLLmRlYnVnKFwiUHJvY2Vzc2luZyBRdWV1ZSAtPlwiLCBhcmdzKTtcblxuICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgRGlnaXRhcEdhbWVQbGF5ZXJTREtbXG4gICAgICAgIGFyZ3NbMF0gYXNcbiAgICAgICAgICB8IFwiaW5pdFwiXG4gICAgICAgICAgfCBcInNldFByb2dyZXNzXCJcbiAgICAgICAgICB8IFwic2V0TGV2ZWxVcFwiXG4gICAgICAgICAgfCBcInNldFBsYXllckZhaWxlZFwiXG4gICAgICAgICAgfCBcInNldENhbGxiYWNrXCJcbiAgICAgIF0uYXBwbHkoRGlnaXRhcEdhbWVQbGF5ZXJTREssIGFyZ3Muc2xpY2UoMSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIGEgY3VycmVudCBxdWV1ZS5cbiAgICogXG4gICAqIEBwYXJhbSBxdWV1ZSBhcnJheVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBwcm9jZXNzT2xkUXVldWUocXVldWU6IFtdKTogdm9pZCB7XG4gICAgcXVldWUuZm9yRWFjaCgoYXJnczogYW55KSA9PiB7XG4gICAgICB0aGlzLnByb2Nlc3NRdWV1ZSguLi5hcmdzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGEgY2FsbGJhY2sgbWV0aG9kLlxuICAgKiBcbiAgICogQHBhcmFtIGZuIHN0cmluZ1xuICAgKiBAcGFyYW0gY2FsbGJhY2sgZnVuY3Rpb25cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgc2V0Q2FsbGJhY2soXG4gICAgZm46XG4gICAgICB8IFwiYWZ0ZXJTdGFydEdhbWVGcm9tWmVyb1wiXG4gICAgICB8IFwiYWZ0ZXJDb250aW51ZVdpdGhDdXJyZW50U2NvcmVcIlxuICAgICAgfCBcImFmdGVyU3RhcnRHYW1lXCJcbiAgICAgIHwgXCJhZnRlclBhdXNlR2FtZVwiLFxuICAgIGNhbGxiYWNrOiBhbnlcbiAgKTogdm9pZCB7XG4gICAgdGhpc1tmbl0gPSBjYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0IGEgbmV3IGdhbWUgY29ubmVjdGlvbiB3aXRoXG4gICAqIHRoZSBwYXJlbnQgcGxhdGZvcm0uXG4gICAqXG4gICAqIEBwYXJhbSB1aU9wdGlvbnMgYXJyYXlcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgaW5pdChcbiAgICBoYXNTY29yZTogYm9vbGVhbiA9IHRydWUsXG4gICAgaGFzSGlnaFNjb3JlOiBib29sZWFuID0gdHJ1ZVxuICApOiB2b2lkIHtcbiAgICB0aGlzLmRlYnVnKFwiU0RLIEluaXRpYWxpemF0aW9uXCIpO1xuXG4gICAgLy8gSW5pdCB0aGUgdWlPcHRpb25zXG4gICAgY29uc3QgdWlPcHRpb25zID0gW1wic2NvcmVcIiwgXCJoaWdoU2NvcmVcIiwgaGFzU2NvcmUsIGhhc0hpZ2hTY29yZV07XG5cbiAgICAvLyBJZiBTREsgaXMgbm90IGxvYWRlZCB5ZXRcbiAgICBpZiAoIXRoaXMuaXNMb2FkZWQpIHtcbiAgICAgIC8vIFNlbmQgdGhlIGluaXQgbWVzc2FnZVxuICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZShcbiAgICAgICAge1xuICAgICAgICAgIGNvbnRyb2xsZXI6IFwiX2RpZ2l0YXBHYW1lXCIsXG4gICAgICAgICAgdHlwZTogXCJTREtfU0VUVElOR1NcIixcbiAgICAgICAgICB1aTogdWlPcHRpb25zLFxuICAgICAgICAgIHJlYWR5OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBcIipcIlxuICAgICAgKTtcblxuICAgICAgLy8gV2F0Y2ggZm9yIG1lc3NhZ2VzIGZyb20gR2FtZUJveFxuICAgICAgdGhpcy5saXN0ZW5HYW1lYm94RXZlbnRzKCk7XG5cbiAgICAgIC8vIFNldCB0aGUgY2FudmFzIGZ1bGx3aWR0aCAmIGJsdWUgc2NyZWVuIGZpeFxuICAgICAgY29uc3QgY2FudmFzOiBIVE1MQ29sbGVjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiY2FudmFzXCIpO1xuICAgICAgY29uc3QgaHRtbDogSFRNTENvbGxlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImh0bWxcIik7XG4gICAgICBcbiAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBsZXQgY2FudmFzU3R5bGUgPSBjYW52YXNbMF0uZ2V0QXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgICAgICAgY2FudmFzWzBdLnNldEF0dHJpYnV0ZShcbiAgICAgICAgICAgIFwic3R5bGVcIixcbiAgICAgICAgICAgIGNhbnZhc1N0eWxlICsgXCJ3aWR0aDogMTAwJTsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyB1c2VyLXNlbGVjdDogbm9uZTsgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcIlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBsZXQgaHRtbFN0eWxlID0gaHRtbFswXS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICAgICAgICBodG1sWzBdLnNldEF0dHJpYnV0ZShcbiAgICAgICAgICAgIFwic3R5bGVcIixcbiAgICAgICAgICAgIChodG1sU3R5bGUgPyBodG1sU3R5bGUgOiBcIlwiKSArIFwidXNlci1zZWxlY3Q6IG5vbmU7IC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XCJcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgICAyMDAwXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFNldCBTREsgYXMgbG9hZGVkIHRvIHByZXZlbnQgcmUtaW5pdGlhdGlvblxuICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBwcm9ncmVzcyBvZiBhIGdhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlIHN0cmluZ1xuICAgKiBAcGFyYW0gc3RhdGUgc3RyaW5nXG4gICAqIEBwYXJhbSBzY29yZSBudW1iZXJcbiAgICogQHBhcmFtIGxldmVsIG51bWJlclxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzZXRQcm9ncmVzcyhzdGF0ZTogc3RyaW5nLCBzY29yZTogbnVtYmVyLCBsZXZlbDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gU2V0IHRoZSBjdXJyZW50IHByb2dyZXNzXG4gICAgdGhpcy5wcm9ncmVzcyA9IHtcbiAgICAgIHR5cGU6IFwiU0RLX1BMQVlFUl9TQ09SRV9VUERBVEVcIixcbiAgICAgIHN0YXRlLFxuICAgICAgc2NvcmUsXG4gICAgICBsZXZlbCxcbiAgICAgIGNvbnRpbnVlU2NvcmU6IHNjb3JlLFxuICAgICAgY29udHJvbGxlcjogXCJfZGlnaXRhcEdhbWVcIixcbiAgICB9O1xuXG4gICAgdGhpcy5zZW5kRGF0YSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgbmV3IGxldmVsIG9mIHRoZSBnYW1lLlxuICAgKlxuICAgKiBAcGFyYW0gbGV2ZWwgbnVtYmVyXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNldExldmVsVXAobGV2ZWw6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMucHJvZ3Jlc3MubGV2ZWwgPSBsZXZlbDtcbiAgICB0aGlzLnByb2dyZXNzLnR5cGUgPSBcIlNES19QTEFZRVJfTEVWRUxfVVBcIjtcblxuICAgIHRoaXMuc2VuZERhdGEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGdhbWUgYXMgZmFpbGVkLlxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGUgc3RyaW5nXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNldFBsYXllckZhaWxlZChzdGF0ZTogc3RyaW5nID0gXCJGQUlMXCIpOiB2b2lkIHtcbiAgICB0aGlzLnByb2dyZXNzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5wcm9ncmVzcy5zY29yZSA9IDA7XG4gICAgdGhpcy5wcm9ncmVzcy50eXBlID0gXCJTREtfUExBWUVSX0ZBSUxFRFwiO1xuXG4gICAgdGhpcy5zZW5kRGF0YSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGdhbWUgZGF0YSB0byBwYXJlbnQgcGxhdGZvcm0uXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBzZW5kRGF0YSgpOiB2b2lkIHtcbiAgICAvLyBTZW5kIHRoZSBtZXNzYWdlIHRvIEdhbWVib3guXG4gICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh0aGlzLnByb2dyZXNzLCB0aGlzLm9yaWdpbik7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgbGlzdGVuaW5nIGZvciBtZXNzYWdlc1xuICAgKiBmcm9tIHRoZSBwbGF0Zm9ybS5cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGxpc3RlbkdhbWVib3hFdmVudHMoKTogdm9pZCB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwibWVzc2FnZVwiLFxuICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHNlbGYuZGVidWcoXG4gICAgICAgICAgXCJFdmVudCBSZWNlaXZlZCAtPiAlbyAtPiAlb1wiLFxuICAgICAgICAgIGV2ZW50LmRhdGEsXG4gICAgICAgICAgZXZlbnQub3JpZ2luXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICBldmVudC5kYXRhLmNvbnRyb2xsZXIgJiZcbiAgICAgICAgICBldmVudC5kYXRhLmNvbnRyb2xsZXIgPT0gXCJfZGlnaXRhcEFwcFwiXG4gICAgICAgICkge1xuICAgICAgICAgIGxldCBvcmlnaW5JbmRleCA9IHNlbGYuYWxsb3dlZE9yaWdpbnMuaW5kZXhPZihldmVudC5vcmlnaW4pO1xuXG4gICAgICAgICAgaWYgKG9yaWdpbkluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgc2VsZi5kZWJ1ZyhcIkVycm9yOiBPcmlnaW4gbm90IGFsbG93ZWQgaW5zaWRlIGdhbWUgY29udGFpbmVyIVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5vcmlnaW4gPSBzZWxmLmFsbG93ZWRPcmlnaW5zW29yaWdpbkluZGV4XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZXZlbnQuZGF0YS50eXBlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmRhdGEudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiU0RLX1NUQVJUX0dBTUVcIjpcbiAgICAgICAgICAgICAgICBzZWxmLmFmdGVyU3RhcnRHYW1lKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcIlNES19QQVVTRV9HQU1FXCI6XG4gICAgICAgICAgICAgICAgc2VsZi5hZnRlclBhdXNlR2FtZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJTREtfU1RBUlRfR0FNRV9GUk9NX1pFUk9cIjpcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLnNjb3JlID0gMDtcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLmxldmVsID0gMDtcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLmNvbnRpbnVlU2NvcmUgPSAwO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5hZnRlclN0YXJ0R2FtZUZyb21aZXJvKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcIlNES19DT05USU5VRV9XSVRIX0NVUlJFTlRfU0NPUkVcIjpcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLnNjb3JlID0gc2VsZi5wcm9ncmVzcy5jb250aW51ZVNjb3JlO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5hZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZShzZWxmLnByb2dyZXNzLnNjb3JlLCBzZWxmLnByb2dyZXNzLmxldmVsKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHNlbGYuZGVidWcoXG4gICAgICAgICAgICAgICAgICAnRXJyb3I6IGBkYXRhLnR5cGVgID0gXCInICtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YS50eXBlICtcbiAgICAgICAgICAgICAgICAgICAgJ1wiIG5vdCBmb3VuZCEgUGxlYXNlIGNoZWNrIGByZWFkbWUubWRgIG9mIGRhdGEgY29sbGVjdG9yIHBhY2thZ2UhJ1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuZGVidWcoXCJFcnJvcjogYGV2ZW50LmRhdGEudHlwZWAgc2hvdWxkIGJlIGltcGxlbWVudGVkIVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmYWxzZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRW1wdHkgbWV0aG9kcyBmb3IgZ2FtZSBkZXZlbG9wZXIgdG8gdXNlLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBhZnRlclN0YXJ0R2FtZUZyb21aZXJvKCkge31cblxuICBwdWJsaWMgc3RhdGljIGFmdGVyQ29udGludWVXaXRoQ3VycmVudFNjb3JlKHNjb3JlOiBudW1iZXIsIGxldmVsOiBudW1iZXIpIHt9XG5cbiAgcHVibGljIHN0YXRpYyBhZnRlclN0YXJ0R2FtZSgpIHt9XG5cbiAgcHVibGljIHN0YXRpYyBhZnRlclBhdXNlR2FtZSgpIHt9XG5cbiAgLyoqXG4gICAqIElmIHVzZXIgaXMgZGVidWdnaW5nLCBzaG93IHNvbWUgY29uc29sZSBsb2dzLlxuICAgKlxuICAgKiBAcGFyYW0gbWVzc2FnZSBhbnlcbiAgICogQHBhcmFtIHBhcmFtcyBhbnlbXVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZGVidWcobWVzc2FnZT86IGFueSwgLi4ucGFyYW1zOiBhbnlbXSk6IHZvaWQge1xuICAgIGNvbnN0IHBhcmVudFdpbmRvdzogYW55ID0gd2luZG93O1xuXG4gICAgaWYgKHBhcmVudFdpbmRvdy5zZGtkZWJ1Zykge1xuICAgICAgY29uc29sZS5sb2coXCJEaWdpdGFwR2FtZVBsYXllclNESyAtPiBcIiArIG1lc3NhZ2UsIC4uLnBhcmFtcyk7XG4gICAgfVxuICB9XG59XG5cbi8vIFJlYWQgdGhlIGN1cnJlbnQgcXVldWVcbmlmICh0eXBlb2YgKDxhbnk+d2luZG93KS5kaWdpdGFwU0RLICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGxldCBvbGRRdWV1ZSA9ICg8YW55PndpbmRvdykuZGlnaXRhcFNESy5xO1xuICBEaWdpdGFwR2FtZVBsYXllclNESy5wcm9jZXNzT2xkUXVldWUob2xkUXVldWUpO1xufVxuXG4vLyBXYXRjaCB0aGUgcXVldWUgd2l0aCBuZXcgbWV0aG9kXG4oPGFueT53aW5kb3cpLmRpZ2l0YXBTREsgPSBEaWdpdGFwR2FtZVBsYXllclNESy5wcm9jZXNzUXVldWU7XG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19tb2R1bGVzX19bNjA3XSgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==