var _digitapSDK;_digitapSDK=(()=>{"use strict";var e={607:(e,t,r)=>{r.d(t,{DigitapGamePlayerSDK:()=>o});var a=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var a=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,n=i.length;s<n;s++,o++)a[o]=i[s];return a},o=function(){function e(){}return e.init=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.debug("SDK Initialization");var r=["score","highScore",e,t];this.isLoaded||(window.parent.postMessage({controller:"_digitapGame",type:"SDK_SETTINGS",ui:r,ready:!0},"*"),this.listenGameboxEvents()),this.isLoaded=!0},e.setProgress=function(e,t,r){this.progress={type:"SDK_PLAYER_SCORE_UPDATE",state:e,score:t,level:r,continueScore:t,controller:"_digitapGame"},this.sendData()},e.setLevelUp=function(e){this.progress.level=e,this.progress.type="SDK_PLAYER_LEVEL_UP",this.sendData()},e.setPlayerFailed=function(e){void 0===e&&(e="FAIL"),this.progress.state=e,this.progress.score=0,this.progress.type="SDK_PLAYER_FAILED",this.sendData()},e.sendData=function(){window.parent.postMessage(this.progress,this.origin)},e.listenGameboxEvents=function(){var e=this;window.addEventListener("message",(function(t){if(e.debug("Event Received -> %s -> %s",JSON.stringify(t.data),JSON.stringify(t.origin)),"object"==typeof t.data&&t.data.controller&&"_digitapApp"==t.data.controller){var r=e.allowedOrigins.indexOf(t.origin);if(-1===r)return void e.debug("Error: Origin not allowed inside game container!");if(e.origin=e.allowedOrigins[r],t.data.type)switch(t.data.type){case"SDK_START_GAME":e._afterStartGame();break;case"SDK_PAUSE_GAME":e._afterPauseGame();break;case"SDK_START_GAME_FROM_ZERO":e.progress.score=0,e.progress.level=0,e.progress.continueScore=0,e._afterStartGameFromZero();break;case"SDK_CONTINUE_WITH_CURRENT_SCORE":e.progress.score=e.progress.continueScore,e._afterContinueWithCurrentScore(e.progress.score);break;default:e.debug('Error: `data.type` = "'+t.data.type+'" not found! Please check `readme.md` of data collector package!')}else e.debug("Error: `event.data.type` should be implemented!")}}),!1)},e._afterStartGameFromZero=function(){},e._afterContinueWithCurrentScore=function(e){},e._afterStartGame=function(){},e._afterPauseGame=function(){},e.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.isDebugging||console.log.apply(console,a(["DigitapGamePlayerSDK -> "+e],t))},e.setDebugging=function(){this.isDebugging=!0},e.gameObject=null,e.isLoaded=!1,e.origin=null,e.isDebugging=!1,e.allowedOrigins=["https://build.digitap.dev","https://wam.app","https://app.wam.app","https://wam.eu","http://localhost:63342","http://localhost:8080","http://localhost:3000"],e.progress={controller:"_digitapGame",type:"SDK_PLAYER_SCORE_UPDATE",score:0,level:0,state:null,continueScore:0},e}()}},t={};function r(a){if(t[a])return t[a].exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}return r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(607)})().DigitapGamePlayerSDK;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fZGlnaXRhcFNESy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9fZGlnaXRhcFNESy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9fZGlnaXRhcFNESy93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vX2RpZ2l0YXBTREsvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL19kaWdpdGFwU0RLL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiXSwibmFtZXMiOlsiaW5pdCIsImhhc1Njb3JlIiwiaGFzSGlnaFNjb3JlIiwidGhpcyIsImRlYnVnIiwidWlPcHRpb25zIiwiaXNMb2FkZWQiLCJ3aW5kb3ciLCJwYXJlbnQiLCJwb3N0TWVzc2FnZSIsImNvbnRyb2xsZXIiLCJ0eXBlIiwidWkiLCJyZWFkeSIsImxpc3RlbkdhbWVib3hFdmVudHMiLCJzZXRQcm9ncmVzcyIsInN0YXRlIiwic2NvcmUiLCJsZXZlbCIsInByb2dyZXNzIiwiY29udGludWVTY29yZSIsInNlbmREYXRhIiwic2V0TGV2ZWxVcCIsInNldFBsYXllckZhaWxlZCIsIm9yaWdpbiIsInNlbGYiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsIm9yaWdpbkluZGV4IiwiYWxsb3dlZE9yaWdpbnMiLCJpbmRleE9mIiwiX2FmdGVyU3RhcnRHYW1lIiwiX2FmdGVyUGF1c2VHYW1lIiwiX2FmdGVyU3RhcnRHYW1lRnJvbVplcm8iLCJfYWZ0ZXJDb250aW51ZVdpdGhDdXJyZW50U2NvcmUiLCJtZXNzYWdlIiwiaXNEZWJ1Z2dpbmciLCJjb25zb2xlIiwibG9nIiwicGFyYW1zIiwic2V0RGVidWdnaW5nIiwiZ2FtZU9iamVjdCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCJdLCJtYXBwaW5ncyI6Im9TQVNBLDJCQW9OQSxPQXJMZ0IsRUFBQUEsS0FBZCxTQUNFQyxFQUNBQyxRQURBLElBQUFELE9BQUEsUUFDQSxJQUFBQyxPQUFBLEdBRUFDLEtBQUtDLE1BQU0sc0JBR1gsSUFBTUMsRUFBWSxDQUFDLFFBQVMsWUFBYUosRUFBVUMsR0FHOUNDLEtBQUtHLFdBRVJDLE9BQU9DLE9BQU9DLFlBQ1osQ0FDRUMsV0FBWSxlQUNaQyxLQUFNLGVBQ05DLEdBQUlQLEVBQ0pRLE9BQU8sR0FFVCxLQUlGVixLQUFLVyx1QkFJUFgsS0FBS0csVUFBVyxHQVdKLEVBQUFTLFlBQWQsU0FBMEJDLEVBQWVDLEVBQWVDLEdBRXREZixLQUFLZ0IsU0FBVyxDQUNkUixLQUFNLDBCQUNOSyxNQUFLLEVBQ0xDLE1BQUssRUFDTEMsTUFBSyxFQUNMRSxjQUFlSCxFQUNmUCxXQUFZLGdCQUdkUCxLQUFLa0IsWUFRTyxFQUFBQyxXQUFkLFNBQXlCSixHQUN2QmYsS0FBS2dCLFNBQVNELE1BQVFBLEVBQ3RCZixLQUFLZ0IsU0FBU1IsS0FBTyxzQkFFckJSLEtBQUtrQixZQVFPLEVBQUFFLGdCQUFkLFNBQThCUCxRQUFBLElBQUFBLE1BQUEsUUFDNUJiLEtBQUtnQixTQUFTSCxNQUFRQSxFQUN0QmIsS0FBS2dCLFNBQVNGLE1BQVEsRUFDdEJkLEtBQUtnQixTQUFTUixLQUFPLG9CQUVyQlIsS0FBS2tCLFlBTVEsRUFBQUEsU0FBZixXQUVFZCxPQUFPQyxPQUFPQyxZQUFZTixLQUFLZ0IsU0FBVWhCLEtBQUtxQixTQU9qQyxFQUFBVixvQkFBZixXQUNFLElBQU1XLEVBQU90QixLQUViSSxPQUFPbUIsaUJBQ0wsV0FDQSxTQUFVQyxHQUdSLEdBRkFGLEVBQUtyQixNQUFNLDZCQUE4QndCLEtBQUtDLFVBQVVGLEVBQU1HLE1BQU9GLEtBQUtDLFVBQVVGLEVBQU1ILFNBR25FLGlCQUFkRyxFQUFNRyxNQUNiSCxFQUFNRyxLQUFLcEIsWUFDYyxlQUF6QmlCLEVBQU1HLEtBQUtwQixXQUNYLENBQ0EsSUFBSXFCLEVBQWNOLEVBQUtPLGVBQWVDLFFBQVFOLEVBQU1ILFFBRXBELElBQXFCLElBQWpCTyxFQUVGLFlBREFOLEVBQUtyQixNQUFNLG9EQU1iLEdBSEVxQixFQUFLRCxPQUFTQyxFQUFLTyxlQUFlRCxHQUdoQ0osRUFBTUcsS0FBS25CLEtBQ2IsT0FBUWdCLEVBQU1HLEtBQUtuQixNQUNqQixJQUFLLGlCQUNIYyxFQUFLUyxrQkFDTCxNQUVGLElBQUssaUJBQ0hULEVBQUtVLGtCQUNMLE1BRUYsSUFBSywyQkFDSFYsRUFBS04sU0FBU0YsTUFBUSxFQUN0QlEsRUFBS04sU0FBU0QsTUFBUSxFQUN0Qk8sRUFBS04sU0FBU0MsY0FBZ0IsRUFFOUJLLEVBQUtXLDBCQUNMLE1BRUYsSUFBSyxrQ0FDSFgsRUFBS04sU0FBU0YsTUFBUVEsRUFBS04sU0FBU0MsY0FFcENLLEVBQUtZLCtCQUErQlosRUFBS04sU0FBU0YsT0FDbEQsTUFFRixRQUNFUSxFQUFLckIsTUFDSCx5QkFDRXVCLEVBQU1HLEtBQUtuQixLQUNYLHlFQUtSYyxFQUFLckIsTUFBTSx1REFJakIsSUFPVSxFQUFBZ0Msd0JBQWQsYUFFYyxFQUFBQywrQkFBZCxTQUE2Q3BCLEtBRS9CLEVBQUFpQixnQkFBZCxhQUVjLEVBQUFDLGdCQUFkLGFBUWUsRUFBQS9CLE1BQWYsU0FBcUJrQyxHLElBQWUsd0RBQzdCbkMsS0FBS29DLGFBQ1JDLFFBQVFDLElBQUcsTUFBWEQsUUFBTyxHQUFLLDJCQUE2QkYsR0FBWUksS0FPM0MsRUFBQUMsYUFBZCxXQUNFeEMsS0FBS29DLGFBQWMsR0FqTlAsRUFBQUssV0FBa0IsS0FDakIsRUFBQXRDLFVBQW9CLEVBQ3BCLEVBQUFrQixPQUFpQixLQUNqQixFQUFBZSxhQUF1QixFQUV2QixFQUFBUCxlQUEyQixDQUN4Qyw0QkFDQSxrQkFDQSxzQkFDQSxpQkFDQSx5QkFDQSx3QkFDQSx5QkFHYSxFQUFBYixTQUFxQixDQUNsQ1QsV0FBWSxlQUNaQyxLQUFNLDBCQUNOTSxNQUFPLEVBQ1BDLE1BQU8sRUFDUEYsTUFBTyxLQUNQSSxjQUFlLEdBOExuQixFQXBOQSxLQ1JJeUIsRUFBMkIsR0FHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLEdBQUdGLEVBQXlCRSxHQUMzQixPQUFPRixFQUF5QkUsR0FBVUMsUUFHM0MsSUFBSUMsRUFBU0osRUFBeUJFLEdBQVksQ0FHakRDLFFBQVMsSUFPVixPQUhBRSxFQUFvQkgsR0FBVUUsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0NHLEVBQU9ELFFDakJmLE9DRkFGLEVBQW9CSyxFQUFJLENBQUNILEVBQVNJLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWE4sRUFBb0JRLEVBQUVGLEVBQVlDLEtBQVNQLEVBQW9CUSxFQUFFTixFQUFTSyxJQUM1RUUsT0FBT0MsZUFBZVIsRUFBU0ssRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFUCxFQUFvQlEsRUFBSSxDQUFDSyxFQUFLQyxJQUFTTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHRkcxRWQsRUFBb0IsTSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInR5cGUgUHJvZ3Jlc3MgPSB7XG4gIGNvbnRyb2xsZXI6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBzY29yZTogbnVtYmVyO1xuICBsZXZlbDogbnVtYmVyO1xuICBzdGF0ZTogYW55O1xuICBjb250aW51ZVNjb3JlOiBudW1iZXI7XG59O1xuXG5jbGFzcyBEaWdpdGFwR2FtZVBsYXllclNESyB7XG4gIHB1YmxpYyBzdGF0aWMgZ2FtZU9iamVjdDogYW55ID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0aWMgaXNMb2FkZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBzdGF0aWMgb3JpZ2luOiBzdHJpbmcgPSBudWxsO1xuICBwcml2YXRlIHN0YXRpYyBpc0RlYnVnZ2luZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgc3RhdGljIGFsbG93ZWRPcmlnaW5zOiBzdHJpbmdbXSA9IFtcbiAgICBcImh0dHBzOi8vYnVpbGQuZGlnaXRhcC5kZXZcIixcbiAgICBcImh0dHBzOi8vd2FtLmFwcFwiLFxuICAgIFwiaHR0cHM6Ly9hcHAud2FtLmFwcFwiLFxuICAgIFwiaHR0cHM6Ly93YW0uZXVcIixcbiAgICBcImh0dHA6Ly9sb2NhbGhvc3Q6NjMzNDJcIixcbiAgICBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MFwiLFxuICAgIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCIsXG4gIF07XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcHJvZ3Jlc3M6IFByb2dyZXNzID0ge1xuICAgIGNvbnRyb2xsZXI6IFwiX2RpZ2l0YXBHYW1lXCIsXG4gICAgdHlwZTogXCJTREtfUExBWUVSX1NDT1JFX1VQREFURVwiLFxuICAgIHNjb3JlOiAwLFxuICAgIGxldmVsOiAwLFxuICAgIHN0YXRlOiBudWxsLFxuICAgIGNvbnRpbnVlU2NvcmU6IDAsXG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXQgYSBuZXcgZ2FtZSBjb25uZWN0aW9uIHdpdGhcbiAgICogdGhlIHBhcmVudCBwbGF0Zm9ybS5cbiAgICpcbiAgICogQHBhcmFtIHVpT3B0aW9ucyBhcnJheVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBpbml0KFxuICAgIGhhc1Njb3JlOiBib29sZWFuID0gdHJ1ZSxcbiAgICBoYXNIaWdoU2NvcmU6IGJvb2xlYW4gPSB0cnVlXG4gICk6IHZvaWQge1xuICAgIHRoaXMuZGVidWcoXCJTREsgSW5pdGlhbGl6YXRpb25cIik7XG5cbiAgICAvLyBJbml0IHRoZSB1aU9wdGlvbnNcbiAgICBjb25zdCB1aU9wdGlvbnMgPSBbXCJzY29yZVwiLCBcImhpZ2hTY29yZVwiLCBoYXNTY29yZSwgaGFzSGlnaFNjb3JlXTtcblxuICAgIC8vIElmIFNESyBpcyBub3QgbG9hZGVkIHlldFxuICAgIGlmICghdGhpcy5pc0xvYWRlZCkge1xuICAgICAgLy8gU2VuZCB0aGUgaW5pdCBtZXNzYWdlXG4gICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKFxuICAgICAgICB7XG4gICAgICAgICAgY29udHJvbGxlcjogXCJfZGlnaXRhcEdhbWVcIixcbiAgICAgICAgICB0eXBlOiBcIlNES19TRVRUSU5HU1wiLFxuICAgICAgICAgIHVpOiB1aU9wdGlvbnMsXG4gICAgICAgICAgcmVhZHk6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIFwiKlwiXG4gICAgICApO1xuXG4gICAgICAvLyBXYXRjaCBmb3IgbWVzc2FnZXMgZnJvbSBHYW1lQm94XG4gICAgICB0aGlzLmxpc3RlbkdhbWVib3hFdmVudHMoKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgU0RLIGFzIGxvYWRlZCB0byBwcmV2ZW50IHJlLWluaXRpYXRpb25cbiAgICB0aGlzLmlzTG9hZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgcHJvZ3Jlc3Mgb2YgYSBnYW1lLlxuICAgKlxuICAgKiBAcGFyYW0gdHlwZSBzdHJpbmdcbiAgICogQHBhcmFtIHN0YXRlIHN0cmluZ1xuICAgKiBAcGFyYW0gc2NvcmUgbnVtYmVyXG4gICAqIEBwYXJhbSBsZXZlbCBudW1iZXJcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgc2V0UHJvZ3Jlc3Moc3RhdGU6IHN0cmluZywgc2NvcmU6IG51bWJlciwgbGV2ZWw6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFNldCB0aGUgY3VycmVudCBwcm9ncmVzc1xuICAgIHRoaXMucHJvZ3Jlc3MgPSB7XG4gICAgICB0eXBlOiBcIlNES19QTEFZRVJfU0NPUkVfVVBEQVRFXCIsXG4gICAgICBzdGF0ZSxcbiAgICAgIHNjb3JlLFxuICAgICAgbGV2ZWwsXG4gICAgICBjb250aW51ZVNjb3JlOiBzY29yZSxcbiAgICAgIGNvbnRyb2xsZXI6IFwiX2RpZ2l0YXBHYW1lXCIsXG4gICAgfTtcblxuICAgIHRoaXMuc2VuZERhdGEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG5ldyBsZXZlbCBvZiB0aGUgZ2FtZS5cbiAgICpcbiAgICogQHBhcmFtIGxldmVsIG51bWJlclxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzZXRMZXZlbFVwKGxldmVsOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnByb2dyZXNzLmxldmVsID0gbGV2ZWw7XG4gICAgdGhpcy5wcm9ncmVzcy50eXBlID0gXCJTREtfUExBWUVSX0xFVkVMX1VQXCI7XG5cbiAgICB0aGlzLnNlbmREYXRhKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBnYW1lIGFzIGZhaWxlZC5cbiAgICpcbiAgICogQHBhcmFtIHN0YXRlIHN0cmluZ1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzZXRQbGF5ZXJGYWlsZWQoc3RhdGU6IHN0cmluZyA9IFwiRkFJTFwiKTogdm9pZCB7XG4gICAgdGhpcy5wcm9ncmVzcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMucHJvZ3Jlc3Muc2NvcmUgPSAwO1xuICAgIHRoaXMucHJvZ3Jlc3MudHlwZSA9IFwiU0RLX1BMQVlFUl9GQUlMRURcIjtcblxuICAgIHRoaXMuc2VuZERhdGEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBnYW1lIGRhdGEgdG8gcGFyZW50IHBsYXRmb3JtLlxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgc2VuZERhdGEoKTogdm9pZCB7XG4gICAgLy8gU2VuZCB0aGUgbWVzc2FnZSB0byBHYW1lYm94LlxuICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UodGhpcy5wcm9ncmVzcywgdGhpcy5vcmlnaW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGxpc3RlbmluZyBmb3IgbWVzc2FnZXNcbiAgICogZnJvbSB0aGUgcGxhdGZvcm0uXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBsaXN0ZW5HYW1lYm94RXZlbnRzKCk6IHZvaWQge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcIm1lc3NhZ2VcIixcbiAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBzZWxmLmRlYnVnKFwiRXZlbnQgUmVjZWl2ZWQgLT4gJXMgLT4gJXNcIiwgSlNPTi5zdHJpbmdpZnkoZXZlbnQuZGF0YSksIEpTT04uc3RyaW5naWZ5KGV2ZW50Lm9yaWdpbikpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgZXZlbnQuZGF0YS5jb250cm9sbGVyICYmXG4gICAgICAgICAgZXZlbnQuZGF0YS5jb250cm9sbGVyID09IFwiX2RpZ2l0YXBBcHBcIlxuICAgICAgICApIHtcbiAgICAgICAgICBsZXQgb3JpZ2luSW5kZXggPSBzZWxmLmFsbG93ZWRPcmlnaW5zLmluZGV4T2YoZXZlbnQub3JpZ2luKTtcblxuICAgICAgICAgIGlmIChvcmlnaW5JbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHNlbGYuZGVidWcoXCJFcnJvcjogT3JpZ2luIG5vdCBhbGxvd2VkIGluc2lkZSBnYW1lIGNvbnRhaW5lciFcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYub3JpZ2luID0gc2VsZi5hbGxvd2VkT3JpZ2luc1tvcmlnaW5JbmRleF07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGV2ZW50LmRhdGEudHlwZSkge1xuICAgICAgICAgICAgc3dpdGNoIChldmVudC5kYXRhLnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIlNES19TVEFSVF9HQU1FXCI6XG4gICAgICAgICAgICAgICAgc2VsZi5fYWZ0ZXJTdGFydEdhbWUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIFwiU0RLX1BBVVNFX0dBTUVcIjpcbiAgICAgICAgICAgICAgICBzZWxmLl9hZnRlclBhdXNlR2FtZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJTREtfU1RBUlRfR0FNRV9GUk9NX1pFUk9cIjpcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLnNjb3JlID0gMDtcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLmxldmVsID0gMDtcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLmNvbnRpbnVlU2NvcmUgPSAwO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5fYWZ0ZXJTdGFydEdhbWVGcm9tWmVybygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJTREtfQ09OVElOVUVfV0lUSF9DVVJSRU5UX1NDT1JFXCI6XG4gICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5zY29yZSA9IHNlbGYucHJvZ3Jlc3MuY29udGludWVTY29yZTtcblxuICAgICAgICAgICAgICAgIHNlbGYuX2FmdGVyQ29udGludWVXaXRoQ3VycmVudFNjb3JlKHNlbGYucHJvZ3Jlc3Muc2NvcmUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgc2VsZi5kZWJ1ZyhcbiAgICAgICAgICAgICAgICAgICdFcnJvcjogYGRhdGEudHlwZWAgPSBcIicgK1xuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLnR5cGUgK1xuICAgICAgICAgICAgICAgICAgICAnXCIgbm90IGZvdW5kISBQbGVhc2UgY2hlY2sgYHJlYWRtZS5tZGAgb2YgZGF0YSBjb2xsZWN0b3IgcGFja2FnZSEnXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5kZWJ1ZyhcIkVycm9yOiBgZXZlbnQuZGF0YS50eXBlYCBzaG91bGQgYmUgaW1wbGVtZW50ZWQhXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGZhbHNlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbXB0eSBtZXRob2RzIGZvciBnYW1lIGRldmVsb3BlciB0byB1c2UuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIF9hZnRlclN0YXJ0R2FtZUZyb21aZXJvKCkge31cblxuICBwdWJsaWMgc3RhdGljIF9hZnRlckNvbnRpbnVlV2l0aEN1cnJlbnRTY29yZShzY29yZTogbnVtYmVyKSB7fVxuXG4gIHB1YmxpYyBzdGF0aWMgX2FmdGVyU3RhcnRHYW1lKCkge31cblxuICBwdWJsaWMgc3RhdGljIF9hZnRlclBhdXNlR2FtZSgpIHt9XG5cbiAgLyoqXG4gICAqIElmIHVzZXIgaXMgZGVidWdnaW5nLCBzaG93IHNvbWUgY29uc29sZSBsb2dzLlxuICAgKlxuICAgKiBAcGFyYW0gbWVzc2FnZSBhbnlcbiAgICogQHBhcmFtIHBhcmFtcyBhbnlbXVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZGVidWcobWVzc2FnZT86IGFueSwgLi4ucGFyYW1zOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0RlYnVnZ2luZykge1xuICAgICAgY29uc29sZS5sb2coXCJEaWdpdGFwR2FtZVBsYXllclNESyAtPiBcIiArIG1lc3NhZ2UsIC4uLnBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gc2V0IFNESyBhcyBkZWJ1Z2dpbmcuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNldERlYnVnZ2luZygpOiB2b2lkIHtcbiAgICB0aGlzLmlzRGVidWdnaW5nID0gdHJ1ZTtcbiAgfVxufVxuXG5leHBvcnQgeyBEaWdpdGFwR2FtZVBsYXllclNESyB9O1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBtb2R1bGUgZXhwb3J0cyBtdXN0IGJlIHJldHVybmVkIGZyb20gcnVudGltZSBzbyBlbnRyeSBpbmxpbmluZyBpcyBkaXNhYmxlZFxuLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDcpO1xuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiXSwic291cmNlUm9vdCI6IiJ9